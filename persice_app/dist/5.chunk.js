webpackJsonp([5],{

/***/ 776:
/***/ function(module, exports, __webpack_require__) {

	eval("\"use strict\";\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar core_1 = __webpack_require__(3);\r\nvar router_1 = __webpack_require__(37);\r\nvar profile_view_component_1 = __webpack_require__(1150);\r\nvar profile_my_component_1 = __webpack_require__(777);\r\nvar util_1 = __webpack_require__(12);\r\nvar ProfileLoader = (function () {\r\n    function ProfileLoader(_loader, _el, _params) {\r\n        this._loader = _loader;\r\n        this._el = _el;\r\n        this._params = _params;\r\n        this.username = util_1.CookieUtil.getValue('user_username');\r\n        this.usernameParam = this._params.get('username');\r\n    }\r\n    ProfileLoader.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        if (this.username === this.usernameParam) {\r\n            this._loader.loadIntoLocation(profile_my_component_1.ProfileMyComponent, this._el, 'child')\r\n                .then(function (res) {\r\n            });\r\n        }\r\n        else {\r\n            this._loader.loadIntoLocation(profile_view_component_1.ProfileViewComponent, this._el, 'child')\r\n                .then(function (res) {\r\n                res.instance.setUsername(_this.usernameParam);\r\n            });\r\n        }\r\n    };\r\n    ProfileLoader = __decorate([\r\n        core_1.Component({\r\n            selector: 'profile-loader',\r\n            template: \"<div #child></div>\",\r\n            directives: [\r\n                profile_my_component_1.ProfileMyComponent,\r\n                profile_view_component_1.ProfileViewComponent\r\n            ]\r\n        }), \r\n        __metadata('design:paramtypes', [core_1.DynamicComponentLoader, core_1.ElementRef, router_1.RouteParams])\r\n    ], ProfileLoader);\r\n    return ProfileLoader;\r\n}());\r\nexports.ProfileLoader = ProfileLoader;\r\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/awesome-typescript-loader/dist.babel!./~/tslint-loader!./src/app/components/profile/profile_loader.ts\n ** module id = 776\n ** module chunks = 5\n **/\n//# sourceURL=webpack:///./src/app/components/profile/profile_loader.ts?./~/awesome-typescript-loader/dist.babel!./~/tslint-loader");

/***/ },

/***/ 1150:
/***/ function(module, exports, __webpack_require__) {

	eval("\"use strict\";\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar core_1 = __webpack_require__(3);\r\nvar router_1 = __webpack_require__(37);\r\nvar http_1 = __webpack_require__(91);\r\n/** Components */\r\nvar profile_avatar_component_1 = __webpack_require__(651);\r\nvar profile_about_component_1 = __webpack_require__(650);\r\nvar profile_likes_component_1 = __webpack_require__(654);\r\nvar profile_friends_component_1 = __webpack_require__(652);\r\nvar profile_networks_component_1 = __webpack_require__(655);\r\nvar profile_items_component_1 = __webpack_require__(653);\r\nvar loading_component_1 = __webpack_require__(42);\r\nvar profile_acceptpass_component_1 = __webpack_require__(778);\r\nvar profile_gallery_component_1 = __webpack_require__(768);\r\n/** Services */\r\nvar profile_service_1 = __webpack_require__(156);\r\nvar mutualfriends_service_1 = __webpack_require__(125);\r\nvar friend_service_1 = __webpack_require__(306);\r\nvar photos_service_1 = __webpack_require__(93);\r\nvar history_service_1 = __webpack_require__(94);\r\nvar connections_counter_service_1 = __webpack_require__(92);\r\n/**\r\n * Directives\r\n */\r\nvar dropdown_directive_1 = __webpack_require__(766);\r\nvar remodal_directive_1 = __webpack_require__(649);\r\n/** Utils */\r\nvar util_1 = __webpack_require__(12);\r\n/** View */\r\nvar view = __webpack_require__(769);\r\nvar ProfileViewComponent = (function () {\r\n    function ProfileViewComponent(mutualfriendsService, profileService, friendService, photosService, historyService, http, counterService, _router) {\r\n        this.mutualfriendsService = mutualfriendsService;\r\n        this.profileService = profileService;\r\n        this.friendService = friendService;\r\n        this.photosService = photosService;\r\n        this.historyService = historyService;\r\n        this.http = http;\r\n        this.counterService = counterService;\r\n        this._router = _router;\r\n        this.count = 0;\r\n        this.friendsTitle = 'Mutual Connections';\r\n        this.notFound = false;\r\n        this.profileType = 'friend';\r\n        this.profileAge = '';\r\n        this.profileGender = '';\r\n        this.profileLocation = '';\r\n        this.profileScore = '';\r\n        this.profileName = '';\r\n        this.profileJob = '';\r\n        this.profileReligiousViews = [];\r\n        this.profilePoliticalViews = [];\r\n        this.profileActiveAgo = '2h ago';\r\n        this.profileDistance = '';\r\n        this.profileAbout = '';\r\n        this.profileAvatar = '';\r\n        this.profilePhotos = [];\r\n        this.profilePhotosCount = 0;\r\n        this.profileKeywords = [];\r\n        this.profileKeywordsCount = 0;\r\n        this.profileInterests = [];\r\n        this.profileGoals = [];\r\n        this.profileOffers = [];\r\n        this.profileInterestsCount = 0;\r\n        this.profileGoalsCount = 0;\r\n        this.profileOffersCount = 0;\r\n        this.profileLikes = [];\r\n        this.profileLikesCount = 0;\r\n        this.profileFriends = {\r\n            mutual_bk_friends: [],\r\n            mutual_bk_friends_count: 0,\r\n            mutual_fb_friends: [],\r\n            mutual_fb_friends_count: 0,\r\n            mutual_linkedin_connections: [],\r\n            mutual_linkedin_connections_count: 0,\r\n            mutual_twitter_followers: [],\r\n            mutual_twitter_followers_count: 0,\r\n            mutual_twitter_friends: [],\r\n            mutual_twitter_friends_count: 0\r\n        };\r\n        this.profileFriendsCount = 0;\r\n        this.profileNetworks = {\r\n            facebook: '',\r\n            twitter: '',\r\n            linkedin: ''\r\n        };\r\n        this.loading = false;\r\n        this.loadingLikes = false;\r\n        this.loadingConnections = false;\r\n        this.loadingPhotos = false;\r\n        this.galleryActive = false;\r\n        this.galleryOptions = JSON.stringify({\r\n            hashTracking: false,\r\n            closeOnOutsideClick: true\r\n        });\r\n    }\r\n    ProfileViewComponent.prototype.setUsername = function (username) {\r\n        this.username = username;\r\n    };\r\n    ProfileViewComponent.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        //listen for event when gallery modal is closed\r\n        jQuery(document).on('closed', '.remodal', function (e) {\r\n            _this.galleryActive = false;\r\n        });\r\n        setTimeout(function () {\r\n            window.scrollTo(0, 0);\r\n        });\r\n        this.profileServiceInstance = this.profileService.serviceObserver()\r\n            .subscribe(function (res) {\r\n            _this.user = res.data;\r\n            _this.notFound = res.notFound;\r\n            _this.loading = res.loading;\r\n            if (Object.keys(res.data).length > 0) {\r\n                _this.assignData(_this.user);\r\n                setTimeout(function () {\r\n                    jQuery('#userprofile').focus();\r\n                    window.scrollTo(0, 0);\r\n                });\r\n            }\r\n        });\r\n        this.profileService.loadProfile(this.username);\r\n    };\r\n    ProfileViewComponent.prototype.assignData = function (data) {\r\n        var _this = this;\r\n        this.loadingConnections = true;\r\n        this.loadingLikes = true;\r\n        this.loadingPhotos = true;\r\n        this.profileType = data.connected === true ? 'friend' : 'crowd';\r\n        if (this.profileType === 'friend') {\r\n            if (data.updated_at === null) {\r\n                var url = \"/api/v1/new_connections/updated_at/?format=json&friend_id=\" + data.id;\r\n                this.http.get(url).map(function (res) { return res.json(); }).subscribe(function (data) {\r\n                    _this.counterService.refreshCounter();\r\n                });\r\n            }\r\n        }\r\n        this.profileId = data.id;\r\n        this.profileName = data.first_name;\r\n        this.profileAge = data.age;\r\n        this.profileGender = data.gender === 'm' ? 'Male' : 'Female';\r\n        this.profileDistance = data.distance[0] + \" \" + data.distance[1];\r\n        this.profileLocation = data.lives_in ? data.lives_in : '';\r\n        setTimeout(function () {\r\n            _this.profileLikesCount = 0;\r\n            _this.profileLikes = [];\r\n            var likes = data.likes;\r\n            _this.profileLikes = likes;\r\n            _this.profileLikesCount = _this.profileLikes.length;\r\n            _this.loadingLikes = false;\r\n        });\r\n        this.profileJob = data.position && data.position.job !== null && data.position.company !== null ? data.position.job + \" at \" + data.position.company : '';\r\n        this.profileAvatar = data.image;\r\n        this.profileAbout = data.about;\r\n        this.profileScore = data.score;\r\n        this.profileNetworks.facebook = \"https://www.facebook.com/app_scoped_user_id/\" + data.facebook_id;\r\n        this.profileNetworks.linkedin = data.linkedin_provider && data.linkedin_provider !== null ? data.linkedin_provider : '';\r\n        this.profileNetworks.twitter = data.twitter_provider && data.twitter_provider !== null ? \"https://twitter.com/\" + data.twitter_username : '';\r\n        this.profileOffers = util_1.ObjectUtil.transformSorted(data.offers[0]);\r\n        this.profileInterests = util_1.ObjectUtil.transformSorted(data.interests[0]);\r\n        this.profileGoals = util_1.ObjectUtil.transformSorted(data.goals[0]);\r\n        this.profileInterestsCount = util_1.ObjectUtil.count(data.interests[0]);\r\n        this.profileOffersCount = util_1.ObjectUtil.count(data.offers[0]);\r\n        this.profileGoalsCount = util_1.ObjectUtil.count(data.goals[0]);\r\n        var religious_views = [];\r\n        for (var i = 0; i < data.religious_views.length; ++i) {\r\n            religious_views = religious_views.concat([{\r\n                religious_view: data.religious_views[i]\r\n            }]);\r\n        }\r\n        this.profileReligiousViews = religious_views;\r\n        var political_views = [];\r\n        for (var i = 0; i < data.political_views.length; ++i) {\r\n            political_views = political_views.concat([{\r\n                political_view: data.political_views[i]\r\n            }]);\r\n        }\r\n        this.profilePoliticalViews = political_views;\r\n        this.getMutualFriends(data.id);\r\n        this.getPhotos(data.id);\r\n    };\r\n    ProfileViewComponent.prototype.getPhotos = function (id) {\r\n        var _this = this;\r\n        this.photosService.get('', 6, id)\r\n            .subscribe(function (data) { return _this.assignPhotos(data); });\r\n    };\r\n    ProfileViewComponent.prototype.assignPhotos = function (data) {\r\n        var _this = this;\r\n        this.profilePhotosCount = 0;\r\n        this.profilePhotos = [];\r\n        setTimeout(function () {\r\n            if (data.meta.total_count > 0) {\r\n                _this.profilePhotos = util_1.ListUtil.orderBy(data.objects, ['order'], ['asc']);\r\n                _this.profilePhotosCount = _this.profilePhotos.length;\r\n            }\r\n            _this.loadingPhotos = false;\r\n        });\r\n    };\r\n    ProfileViewComponent.prototype.getMutualFriends = function (id) {\r\n        var _this = this;\r\n        this.mutualfriendsService.get('', 100, id)\r\n            .subscribe(function (data) { return _this.assignMutualFriends(data); });\r\n    };\r\n    ProfileViewComponent.prototype.assignMutualFriends = function (data) {\r\n        var _this = this;\r\n        this.profileFriendsCount = 0;\r\n        this.profileFriends.mutual_bk_friends = [];\r\n        this.profileFriends.mutual_fb_friends = [];\r\n        this.profileFriends.mutual_linkedin_connections = [];\r\n        this.profileFriends.mutual_twitter_friends = [];\r\n        this.profileFriends.mutual_twitter_followers = [];\r\n        setTimeout(function () {\r\n            if (data.meta.total_count > 0) {\r\n                var items = data.objects[0];\r\n                _this.profileFriendsCount += parseInt(items.mutual_bk_friends_count, 10);\r\n                _this.profileFriendsCount += parseInt(items.mutual_fb_friends_count, 10);\r\n                _this.profileFriendsCount += parseInt(items.mutual_linkedin_connections_count, 10);\r\n                _this.profileFriendsCount += parseInt(items.mutual_twitter_followers_count, 10);\r\n                _this.profileFriendsCount += parseInt(items.mutual_twitter_friends_count, 10);\r\n                _this.profileFriends.mutual_bk_friends = items.mutual_bk_friends;\r\n                _this.profileFriends.mutual_fb_friends = items.mutual_fb_friends;\r\n                _this.profileFriends.mutual_linkedin_connections = items.mutual_linkedin_connections;\r\n                _this.profileFriends.mutual_twitter_friends = items.mutual_twitter_friends;\r\n                _this.profileFriends.mutual_twitter_followers = items.mutual_twitter_followers;\r\n                _this.loadingConnections = false;\r\n            }\r\n        });\r\n    };\r\n    ProfileViewComponent.prototype.closeProfile = function (event) {\r\n        var uri = this.historyService.getPrev();\r\n        if (uri !== '') {\r\n            this._router.parent.navigateByUrl(uri);\r\n        }\r\n        else {\r\n            this._router.parent.navigateByUrl('/');\r\n        }\r\n    };\r\n    ProfileViewComponent.prototype.acceptUser = function (event) {\r\n        var _this = this;\r\n        this.friendService.saveFriendship(0, event.user)\r\n            .subscribe(function (data) {\r\n            _this.closeProfile(true);\r\n        });\r\n    };\r\n    ProfileViewComponent.prototype.passUser = function (event) {\r\n        var _this = this;\r\n        this.friendService.saveFriendship(-1, event.user)\r\n            .subscribe(function (data) {\r\n            _this.closeProfile(true);\r\n        });\r\n    };\r\n    ProfileViewComponent.prototype.ngOnDestroy = function () {\r\n        if (this.profileServiceInstance) {\r\n            this.profileServiceInstance.unsubscribe();\r\n        }\r\n        jQuery(document).off('closed', '.remodal');\r\n    };\r\n    ProfileViewComponent.prototype.eventHandler = function (key) {\r\n        switch (key) {\r\n            case 27:\r\n                this.closeProfile(true);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n    ProfileViewComponent.prototype.openGallery = function (event) {\r\n        var remodal = jQuery('[data-remodal-id=modal-gallery]').remodal();\r\n        remodal.open();\r\n        this.galleryActive = true;\r\n    };\r\n    ProfileViewComponent = __decorate([\r\n        core_1.Component({\r\n            selector: 'profile-view',\r\n            template: view,\r\n            directives: [\r\n                profile_avatar_component_1.ProfileAvatarComponent,\r\n                profile_about_component_1.ProfileAboutComponent,\r\n                profile_likes_component_1.ProfileLikesComponent,\r\n                profile_friends_component_1.ProfileFriendsComponent,\r\n                profile_networks_component_1.ProfileNetworksComponent,\r\n                profile_items_component_1.ProfileItemsComponent,\r\n                profile_acceptpass_component_1.ProfileAcceptPassComponent,\r\n                loading_component_1.LoadingComponent,\r\n                dropdown_directive_1.DropdownDirective,\r\n                profile_gallery_component_1.ProfileGalleryComponent,\r\n                remodal_directive_1.RemodalDirective,\r\n                router_1.ROUTER_DIRECTIVES\r\n            ],\r\n            providers: [\r\n                profile_service_1.ProfileService,\r\n                mutualfriends_service_1.MutualFriendsService,\r\n                friend_service_1.FriendService,\r\n                photos_service_1.PhotosService\r\n            ]\r\n        }), \r\n        __metadata('design:paramtypes', [mutualfriends_service_1.MutualFriendsService, profile_service_1.ProfileService, friend_service_1.FriendService, photos_service_1.PhotosService, history_service_1.HistoryService, http_1.Http, connections_counter_service_1.ConnectionsCounterService, router_1.Router])\r\n    ], ProfileViewComponent);\r\n    return ProfileViewComponent;\r\n}());\r\nexports.ProfileViewComponent = ProfileViewComponent;\r\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/profile/profile_view.component.ts\n ** module id = 1150\n ** module chunks = 5\n **/\n//# sourceURL=webpack:///./src/app/components/profile/profile_view.component.ts?");

/***/ }

});