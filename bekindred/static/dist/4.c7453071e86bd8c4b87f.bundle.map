{"version":3,"sources":["webpack:///4.c7453071e86bd8c4b87f.chunk.js","webpack:///./src/app/connections/connections.component.ts","webpack:///./src/app/connections/connections.html","webpack:///./src/app/connections/index.ts"],"names":["webpackJsonp","1252","module","exports","__webpack_require__","core_1","router_1","users_list_1","loading_1","filter_1","profile_1","services_1","lodash_1","ConnectionsComponent","service","filterService","_router","_this","this","items","loading","loadingInitial","isListEmpty","limit","filter","next","total_count","offset","profileViewActive","selectedUser","currentIndex","onRefreshList","debounce","refreshList","leading","trailing","routerInstance","parent","subscribe","closeProfile","prototype","setLocation","loc","window","history","pushState","ngAfterViewInit","setTimeout","scrollTo","ngOnInit","getList","addObserver","observer","data","err","console","log","ngOnDestroy","unsubscribe","removeObserver","serviceInstance","get","assignList","document","body","scrollTop","documentElement","meta","length","more","objects","i","push","jQuery","bind","handleScrollEvent","unbind","viewFriendProfile","id","findIndex","updated_at","username","event","previousProfile","newIndex","nextProfile","scrollOffset","threshold","height","__decorate","Component","selector","template","directives","FilterDesktopComponent","UsersListComponent","LoadingComponent","ProfileFriendComponent","providers","ConnectionsService","__metadata","FilterService","Router","1295","595","__export","m","p","hasOwnProperty"],"mappings":"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","file":"4.c7453071e86bd8c4b87f.chunk.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 1252:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar core_1 = __webpack_require__(1);\r\n\tvar router_1 = __webpack_require__(22);\r\n\tvar users_list_1 = __webpack_require__(598);\r\n\tvar loading_1 = __webpack_require__(24);\r\n\tvar filter_1 = __webpack_require__(589);\r\n\tvar profile_1 = __webpack_require__(134);\r\n\tvar services_1 = __webpack_require__(12);\r\n\tvar lodash_1 = __webpack_require__(23);\r\n\tvar ConnectionsComponent = (function () {\r\n\t    function ConnectionsComponent(service, filterService, _router) {\r\n\t        var _this = this;\r\n\t        this.service = service;\r\n\t        this.filterService = filterService;\r\n\t        this._router = _router;\r\n\t        this.items = [];\r\n\t        this.loading = false;\r\n\t        this.loadingInitial = false;\r\n\t        this.isListEmpty = false;\r\n\t        this.limit = 12;\r\n\t        this.filter = true;\r\n\t        this.next = '';\r\n\t        this.total_count = 0;\r\n\t        this.offset = 0;\r\n\t        this.profileViewActive = false;\r\n\t        this.selectedUser = null;\r\n\t        this.currentIndex = 0;\r\n\t        this.onRefreshList = lodash_1.debounce(this.refreshList, 300, { 'leading': false, 'trailing': true });\r\n\t        this.routerInstance = this._router.parent.subscribe(function (next) {\r\n\t            _this.closeProfile(true);\r\n\t        });\r\n\t    }\r\n\t    ConnectionsComponent.prototype.setLocation = function (loc) {\r\n\t        window.history.pushState('', '', '/' + loc);\r\n\t    };\r\n\t    ConnectionsComponent.prototype.ngAfterViewInit = function () {\r\n\t        setTimeout(function () {\r\n\t            window.scrollTo(0, 0);\r\n\t        });\r\n\t    };\r\n\t    ConnectionsComponent.prototype.ngOnInit = function () {\r\n\t        var _this = this;\r\n\t        this.total_count = 0;\r\n\t        this.getList();\r\n\t        //create new observer and subscribe\r\n\t        this.filterService.addObserver('connections');\r\n\t        this.filterService.observer('connections')\r\n\t            .subscribe(function (data) { return _this.onRefreshList(); }, function (err) { return console.log(err); });\r\n\t    };\r\n\t    ConnectionsComponent.prototype.ngOnDestroy = function () {\r\n\t        this.filterService.observer('connections').unsubscribe();\r\n\t        this.filterService.removeObserver('connections');\r\n\t        if (this.serviceInstance) {\r\n\t            this.serviceInstance.unsubscribe();\r\n\t        }\r\n\t        this.routerInstance.unsubscribe();\r\n\t    };\r\n\t    ConnectionsComponent.prototype.getList = function () {\r\n\t        var _this = this;\r\n\t        if (this.loading) {\r\n\t            return;\r\n\t        }\r\n\t        this.isListEmpty = false;\r\n\t        if (this.next === null)\r\n\t            return;\r\n\t        this.loading = true;\r\n\t        if (this.next === '') {\r\n\t            this.loadingInitial = true;\r\n\t        }\r\n\t        this.serviceInstance = this.service.get(this.next, this.limit, this.filter)\r\n\t            .subscribe(function (data) {\r\n\t            _this.serviceInstance.unsubscribe();\r\n\t            _this.assignList(data);\r\n\t        }, function (err) {\r\n\t            console.log(err);\r\n\t            _this.loading = false;\r\n\t            _this.loadingInitial = false;\r\n\t            _this.serviceInstance.unsubscribe();\r\n\t        }, function () {\r\n\t        });\r\n\t    };\r\n\t    ConnectionsComponent.prototype.refreshList = function () {\r\n\t        if (this.serviceInstance) {\r\n\t            this.serviceInstance.unsubscribe();\r\n\t        }\r\n\t        document.body.scrollTop = document.documentElement.scrollTop = 0;\r\n\t        this.items = [];\r\n\t        this.total_count = 0;\r\n\t        this.currentIndex = 0;\r\n\t        this.isListEmpty = false;\r\n\t        this.next = '';\r\n\t        this.getList();\r\n\t    };\r\n\t    ConnectionsComponent.prototype.assignList = function (data) {\r\n\t        this.loading = false;\r\n\t        this.loadingInitial = false;\r\n\t        if (data.meta.total_count === 0) {\r\n\t            this.isListEmpty = true;\r\n\t            return;\r\n\t        }\r\n\t        else {\r\n\t            this.isListEmpty = false;\r\n\t        }\r\n\t        if (this.items.length > 0) {\r\n\t            var more = data.objects;\r\n\t            for (var i = 0; i <= more.length - 1; i++) {\r\n\t                this.items.push(more[i]);\r\n\t            }\r\n\t            this.total_count += more.length;\r\n\t        }\r\n\t        else {\r\n\t            this.items = data.objects;\r\n\t            this.total_count = data.objects.length;\r\n\t        }\r\n\t        this.next = data.meta.next;\r\n\t        this.offset = data.meta.offset;\r\n\t        //bind to scroll event to load more data on bottom scroll\r\n\t        if (this.next !== null) {\r\n\t            jQuery(window).bind('scroll', this.handleScrollEvent.bind(this));\r\n\t        }\r\n\t        else {\r\n\t            jQuery(window).unbind('scroll');\r\n\t        }\r\n\t    };\r\n\t    ConnectionsComponent.prototype.viewFriendProfile = function (id) {\r\n\t        for (var i = this.items.length - 1; i >= 0; i--) {\r\n\t            if (this.items[i].id === id) {\r\n\t                this.selectedUser = this.items[i];\r\n\t                this.currentIndex = lodash_1.findIndex(this.items, { id: this.selectedUser.id });\r\n\t                this.profileViewActive = true;\r\n\t                if (this.items[i].updated_at === null) {\r\n\t                    this.items[i].updated_at = 'seen';\r\n\t                }\r\n\t                document.body.scrollTop = document.documentElement.scrollTop = 0;\r\n\t                this.setLocation(this.selectedUser.username);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    ConnectionsComponent.prototype.closeProfile = function (event) {\r\n\t        this.profileViewActive = false;\r\n\t        this.selectedUser = null;\r\n\t        this.setLocation('connections');\r\n\t    };\r\n\t    ConnectionsComponent.prototype.previousProfile = function (event) {\r\n\t        var currentIndex = lodash_1.findIndex(this.items, { id: this.selectedUser.id });\r\n\t        var newIndex = currentIndex - 1;\r\n\t        if (newIndex < 0) {\r\n\t            return;\r\n\t        }\r\n\t        if (this.items.length > 0) {\r\n\t            this.selectedUser = this.items[newIndex];\r\n\t            this.setLocation(this.selectedUser.username);\r\n\t        }\r\n\t        else {\r\n\t            this.closeProfile(true);\r\n\t            this.isListEmpty = true;\r\n\t        }\r\n\t        this.currentIndex = newIndex;\r\n\t    };\r\n\t    ConnectionsComponent.prototype.nextProfile = function (event) {\r\n\t        var currentIndex = lodash_1.findIndex(this.items, { id: this.selectedUser.id });\r\n\t        var newIndex = currentIndex + 1;\r\n\t        if (!this.loading && newIndex > this.items.length - 13 && this.next) {\r\n\t            this.getList();\r\n\t        }\r\n\t        if (newIndex > this.items.length - 1) {\r\n\t            return;\r\n\t        }\r\n\t        if (this.items.length > 0) {\r\n\t            this.selectedUser = this.items[newIndex];\r\n\t            this.setLocation(this.selectedUser.username);\r\n\t        }\r\n\t        else {\r\n\t            this.closeProfile(true);\r\n\t            this.isListEmpty = true;\r\n\t        }\r\n\t        this.currentIndex = newIndex;\r\n\t    };\r\n\t    ConnectionsComponent.prototype.handleScrollEvent = function (event) {\r\n\t        var scrollOffset = jQuery(window).scrollTop();\r\n\t        var threshold = jQuery(document).height() - jQuery(window).height() - 60;\r\n\t        if (this.next && scrollOffset > threshold) {\r\n\t            if (!this.loading) {\r\n\t                this.getList();\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    ConnectionsComponent = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'prs-connections',\r\n\t            template: __webpack_require__(1295),\r\n\t            directives: [\r\n\t                filter_1.FilterDesktopComponent,\r\n\t                users_list_1.UsersListComponent,\r\n\t                loading_1.LoadingComponent,\r\n\t                profile_1.ProfileFriendComponent\r\n\t            ],\r\n\t            providers: [\r\n\t                services_1.ConnectionsService\r\n\t            ]\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [services_1.ConnectionsService, services_1.FilterService, router_1.Router])\r\n\t    ], ConnectionsComponent);\r\n\t    return ConnectionsComponent;\r\n\t}());\r\n\texports.ConnectionsComponent = ConnectionsComponent;\r\n\n\n/***/ },\n\n/***/ 1295:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"layout layout--flush content\\\" [ngClass]=\\\"{'is-hidden': profileViewActive}\\\">\\n  <div class=\\\"layout__item 3/4 extralarge-and-up-4/5\\\">\\n    <h3 *ngIf=\\\"!loading && emptyList\\\">No results...</h3>\\n    <prs-users-list [showButtons]=\\\"0\\\" [users]=\\\"items\\\" (onClicked)=\\\"viewFriendProfile($event)\\\"></prs-users-list>\\n    <prs-loading [status]=\\\"loading\\\"></prs-loading>\\n    <div class=\\\"no-results\\\" *ngIf=\\\"isListEmpty\\\" [ngClass]=\\\"{'is-visible': isListEmpty}\\\">\\n      <h2 class=\\\"no-results__title\\\">Whoops!</h2>\\n      <p class=\\\"no-results__par\\\">No results found.\\n        <br>Please broaden your search criteria</p>\\n      <img src=\\\"/static/assets/images/polar-bear.png\\\" alt=\\\"Polar Bear\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"layout__item 1/4 extralarge-and-up-1/5 filter-place\\\">\\n    <prs-filters [type]=\\\"'connections'\\\"></prs-filters>\\n  </div>\\n</div>\\n<prs-profile-friend [currentIndex]=\\\"currentIndex\\\" [count]=\\\"total_count\\\" (previousEvent)=\\\"previousProfile($event)\\\" (nextEvent)=\\\"nextProfile($event)\\\" *ngIf=\\\"profileViewActive\\\" [user]=\\\"selectedUser\\\" (closeprofileEvent)=\\\"closeProfile($event)\\\">\\n</prs-profile-friend>\\n\"\n\n/***/ },\n\n/***/ 595:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tfunction __export(m) {\r\n\t    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n\t}\r\n\t__export(__webpack_require__(1252));\r\n\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 4.c7453071e86bd8c4b87f.chunk.js\n **/","import {Component, AfterViewInit, OnInit, OnDestroy} from 'angular2/core';\nimport {Router} from 'angular2/router';\n\nimport {UsersListComponent} from '../shared/components/users-list';\nimport {LoadingComponent} from '../shared/components/loading';\nimport {FilterDesktopComponent} from '../shared/components/filter';\nimport {ProfileFriendComponent} from '../profile';\n\nimport {ConnectionsService, FilterService} from '../shared/services';\n\nimport {findIndex, debounce} from 'lodash';\n\ndeclare var jQuery: any;\n\n@Component({\n  selector: 'prs-connections',\n  template: require('./connections.html'),\n  directives: [\n    FilterDesktopComponent,\n    UsersListComponent,\n    LoadingComponent,\n    ProfileFriendComponent\n  ],\n  providers: [\n    ConnectionsService\n  ]\n})\nexport class ConnectionsComponent implements OnInit, OnDestroy, AfterViewInit {\n  items: Array<any> = [];\n  loading: boolean = false;\n  loadingInitial: boolean = false;\n  isListEmpty: boolean = false;\n  limit: number = 12;\n  filter: boolean = true;\n  next: string = '';\n  total_count: number = 0;\n  offset: number = 0;\n  profileViewActive = false;\n  selectedUser = null;\n  currentIndex = 0;\n  serviceInstance;\n  routerInstance;\n  onRefreshList: Function;\n\n  constructor(\n    private service: ConnectionsService,\n    private filterService: FilterService,\n    private _router: Router\n    ) {\n    this.onRefreshList = debounce(this.refreshList, 300, { 'leading': false, 'trailing': true });\n    this.routerInstance = this._router.parent.subscribe(next => {\n      this.closeProfile(true);\n    });\n  }\n\n  setLocation(loc) {\n    window.history.pushState('', '', '/' + loc);\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => {\n      window.scrollTo(0, 0);\n    });\n  }\n\n  ngOnInit() {\n    this.total_count = 0;\n    this.getList();\n\n    //create new observer and subscribe\n    this.filterService.addObserver('connections');\n    this.filterService.observer('connections')\n      .subscribe(\n      (data) => this.onRefreshList(),\n      (err) => console.log(err)\n      );\n  }\n\n\n  ngOnDestroy() {\n    this.filterService.observer('connections').unsubscribe();\n    this.filterService.removeObserver('connections');\n    if (this.serviceInstance) {\n      this.serviceInstance.unsubscribe();\n    }\n    this.routerInstance.unsubscribe();\n  }\n\n  getList() {\n    if (this.loading) {\n      return;\n    }\n\n    this.isListEmpty = false;\n    if (this.next === null) return;\n    this.loading = true;\n    if (this.next === '') {\n      this.loadingInitial = true;\n    }\n    this.serviceInstance = this.service.get(this.next, this.limit, this.filter)\n      .subscribe(\n      data => {\n        this.serviceInstance.unsubscribe();\n        this.assignList(data);\n      },\n      (err) => {\n        console.log(err);\n        this.loading = false;\n        this.loadingInitial = false;\n        this.serviceInstance.unsubscribe();\n      },\n      () => {\n\n      });\n  }\n\n\n  refreshList() {\n    if (this.serviceInstance) {\n      this.serviceInstance.unsubscribe();\n    }\n    document.body.scrollTop = document.documentElement.scrollTop = 0;\n    this.items = [];\n    this.total_count = 0;\n    this.currentIndex = 0;\n    this.isListEmpty = false;\n    this.next = '';\n    this.getList();\n  }\n\n  assignList(data) {\n\n    this.loading = false;\n    this.loadingInitial = false;\n\n\n    if (data.meta.total_count === 0) {\n      this.isListEmpty = true;\n      return;\n    } else {\n      this.isListEmpty = false;\n    }\n\n\n    if (this.items.length > 0) {\n      let more = data.objects;\n      for (var i = 0; i <= more.length - 1; i++) {\n        this.items.push(more[i]);\n      }\n      this.total_count += more.length;\n    } else {\n      this.items = data.objects;\n      this.total_count = data.objects.length;\n    }\n\n    this.next = data.meta.next;\n    this.offset = data.meta.offset;\n\n\n    //bind to scroll event to load more data on bottom scroll\n    if (this.next !== null) {\n      jQuery(window).bind('scroll', this.handleScrollEvent.bind(this));\n    } else {\n      jQuery(window).unbind('scroll');\n    }\n\n\n  }\n\n  viewFriendProfile(id) {\n\n    for (var i = this.items.length - 1; i >= 0; i--) {\n      if (this.items[i].id === id) {\n        this.selectedUser = this.items[i];\n        this.currentIndex = findIndex(this.items, { id: this.selectedUser.id });\n        this.profileViewActive = true;\n        if (this.items[i].updated_at === null) {\n          this.items[i].updated_at = 'seen';\n        }\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n        this.setLocation(this.selectedUser.username);\n      }\n    }\n  }\n\n  closeProfile(event) {\n    this.profileViewActive = false;\n    this.selectedUser = null;\n    this.setLocation('connections');\n  }\n\n  previousProfile(event) {\n    let currentIndex = findIndex(this.items, { id: this.selectedUser.id });\n    let newIndex = currentIndex - 1;\n\n    if (newIndex < 0) {\n      return;\n    }\n    if (this.items.length > 0) {\n      this.selectedUser = this.items[newIndex];\n      this.setLocation(this.selectedUser.username);\n    } else {\n      this.closeProfile(true);\n      this.isListEmpty = true;\n    }\n    this.currentIndex = newIndex;\n  }\n\n  nextProfile(event) {\n    let currentIndex = findIndex(this.items, { id: this.selectedUser.id });\n    let newIndex = currentIndex + 1;\n\n    if (!this.loading && newIndex > this.items.length - 13 && this.next) {\n      this.getList();\n    }\n\n    if (newIndex > this.items.length - 1) {\n      return;\n    }\n    if (this.items.length > 0) {\n      this.selectedUser = this.items[newIndex];\n      this.setLocation(this.selectedUser.username);\n    } else {\n      this.closeProfile(true);\n      this.isListEmpty = true;\n    }\n    this.currentIndex = newIndex;\n  }\n\n\n  handleScrollEvent(event) {\n    let scrollOffset = jQuery(window).scrollTop();\n    let threshold = jQuery(document).height() - jQuery(window).height() - 60;\n\n    if (this.next && scrollOffset > threshold) {\n      if (!this.loading) {\n        this.getList();\n      }\n    }\n\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/connections/connections.component.ts\n **/","module.exports = \"<div class=\\\"layout layout--flush content\\\" [ngClass]=\\\"{'is-hidden': profileViewActive}\\\">\\n  <div class=\\\"layout__item 3/4 extralarge-and-up-4/5\\\">\\n    <h3 *ngIf=\\\"!loading && emptyList\\\">No results...</h3>\\n    <prs-users-list [showButtons]=\\\"0\\\" [users]=\\\"items\\\" (onClicked)=\\\"viewFriendProfile($event)\\\"></prs-users-list>\\n    <prs-loading [status]=\\\"loading\\\"></prs-loading>\\n    <div class=\\\"no-results\\\" *ngIf=\\\"isListEmpty\\\" [ngClass]=\\\"{'is-visible': isListEmpty}\\\">\\n      <h2 class=\\\"no-results__title\\\">Whoops!</h2>\\n      <p class=\\\"no-results__par\\\">No results found.\\n        <br>Please broaden your search criteria</p>\\n      <img src=\\\"/static/assets/images/polar-bear.png\\\" alt=\\\"Polar Bear\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"layout__item 1/4 extralarge-and-up-1/5 filter-place\\\">\\n    <prs-filters [type]=\\\"'connections'\\\"></prs-filters>\\n  </div>\\n</div>\\n<prs-profile-friend [currentIndex]=\\\"currentIndex\\\" [count]=\\\"total_count\\\" (previousEvent)=\\\"previousProfile($event)\\\" (nextEvent)=\\\"nextProfile($event)\\\" *ngIf=\\\"profileViewActive\\\" [user]=\\\"selectedUser\\\" (closeprofileEvent)=\\\"closeProfile($event)\\\">\\n</prs-profile-friend>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/connections/connections.html\n ** module id = 1295\n ** module chunks = 4\n **/","export * from './connections.component';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app/connections/index.ts\n **/"],"sourceRoot":""}