webpackJsonp([4],{42:function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},Subject_1=__webpack_require__(19),SyncSubject=function(_super){function SyncSubject(_value){_super.call(this),this._value=_value}return __extends(SyncSubject,_super),SyncSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return subscription&&!subscription.isUnsubscribed&&subscriber.next(this._value),subscription},SyncSubject.prototype._next=function(value){_super.prototype._next.call(this,this._value=value)},SyncSubject.prototype._error=function(err){this.hasErrored=!0,_super.prototype._error.call(this,this.errorValue=err)},SyncSubject}(Subject_1.Subject);exports.SyncSubject=SyncSubject},139:function(module,exports,__webpack_require__){"use strict";var Observable_1=__webpack_require__(2),select_1=__webpack_require__(87);Observable_1.Observable.prototype.select=select_1.select},140:function(module,exports){"use strict";exports.compose=function(){for(var functions=[],_i=0;_i<arguments.length;_i++)functions[_i-0]=arguments[_i];return function(arg){if(0===functions.length)return arg;var last=functions[functions.length-1],rest=functions.slice(0,-1);return rest.reduceRight(function(composed,fn){return fn(composed)},last(arg))}}},87:function(module,exports,__webpack_require__){"use strict";function select(pathOrMapFn){for(var paths=[],_i=1;_i<arguments.length;_i++)paths[_i-1]=arguments[_i];var mapped$;if("string"==typeof pathOrMapFn)mapped$=pluck_1.pluck.call.apply(pluck_1.pluck,[this,pathOrMapFn].concat(paths));else{if("function"!=typeof pathOrMapFn)throw new TypeError("Unexpected type "+typeof pathOrMapFn+" in select operator, expected 'string' or 'function'");mapped$=map_1.map.call(this,pathOrMapFn)}return distinctUntilChanged_1.distinctUntilChanged.call(mapped$)}var pluck_1=__webpack_require__(229),map_1=__webpack_require__(166),distinctUntilChanged_1=__webpack_require__(227);exports.select=select},88:function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},SyncSubject_1=__webpack_require__(42),Dispatcher=function(_super){function Dispatcher(){_super.call(this,{type:Dispatcher.INIT})}return __extends(Dispatcher,_super),Dispatcher.prototype.dispatch=function(action){this.next(action)},Dispatcher.prototype.complete=function(){},Dispatcher.INIT="@ngrx/store/init",Dispatcher}(SyncSubject_1.SyncSubject);exports.Dispatcher=Dispatcher},38:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(__webpack_require__(88)),__export(__webpack_require__(141)),__export(__webpack_require__(89)),__export(__webpack_require__(90)),__export(__webpack_require__(91)),__export(__webpack_require__(92))},141:function(module,exports,__webpack_require__){"use strict";function provideStore(reducer,initialState){return[core_1.provide(exports.INITIAL_REDUCER,{useFactory:function(){return"function"==typeof reducer?reducer:utils_1.combineReducers(reducer)}}),core_1.provide(exports.INITIAL_STATE,{deps:[exports.INITIAL_REDUCER],useFactory:function(reducer){return void 0===initialState?reducer(void 0,{type:dispatcher_1.Dispatcher.INIT}):initialState}}),dispatcherProvider,storeProvider,stateProvider,reducerProvider]}var core_1=__webpack_require__(1),reducer_1=__webpack_require__(89),dispatcher_1=__webpack_require__(88),store_1=__webpack_require__(91),state_1=__webpack_require__(90),utils_1=__webpack_require__(92);exports.INITIAL_REDUCER=new core_1.OpaqueToken("ngrx/store/reducer"),exports.INITIAL_STATE=new core_1.OpaqueToken("ngrx/store/initial-state");var dispatcherProvider=core_1.provide(dispatcher_1.Dispatcher,{useFactory:function(){return new dispatcher_1.Dispatcher}}),storeProvider=core_1.provide(store_1.Store,{deps:[dispatcher_1.Dispatcher,reducer_1.Reducer,state_1.State,exports.INITIAL_STATE],useFactory:function(dispatcher,reducer,state$,initialState){return new store_1.Store(dispatcher,reducer,state$,initialState)}}),stateProvider=core_1.provide(state_1.State,{deps:[exports.INITIAL_STATE,dispatcher_1.Dispatcher,reducer_1.Reducer],useFactory:function(initialState,dispatcher,reducer){return new state_1.State(initialState,dispatcher,reducer)}}),reducerProvider=core_1.provide(reducer_1.Reducer,{deps:[dispatcher_1.Dispatcher,exports.INITIAL_REDUCER],useFactory:function(dispatcher,reducer){return new reducer_1.Reducer(dispatcher,reducer)}});exports.provideStore=provideStore},89:function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},SyncSubject_1=__webpack_require__(42),Reducer=function(_super){function Reducer(_dispatcher,initialReducer){_super.call(this,initialReducer),this._dispatcher=_dispatcher}return __extends(Reducer,_super),Reducer.prototype.replaceReducer=function(reducer){this.next(reducer),this._dispatcher.dispatch({type:Reducer.REPLACE})},Reducer.REPLACE="@ngrx/store/replace-reducer",Reducer}(SyncSubject_1.SyncSubject);exports.Reducer=Reducer},90:function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},withLatestFrom_1=__webpack_require__(231),scan_1=__webpack_require__(230),observeOn_1=__webpack_require__(122),queue_1=__webpack_require__(168),SyncSubject_1=__webpack_require__(42),State=function(_super){function State(_initialState,action$,reducer$){var _this=this;_super.call(this,_initialState);var actionInQueue$=observeOn_1.observeOn.call(action$,queue_1.queue),actionAndReducer$=withLatestFrom_1.withLatestFrom.call(actionInQueue$,reducer$),state$=scan_1.scan.call(actionAndReducer$,function(state,_a){var action=_a[0],reducer=_a[1];return reducer(state,action)},_initialState);state$.subscribe(function(value){return _this.next(value)})}return __extends(State,_super),State}(SyncSubject_1.SyncSubject);exports.State=State},91:function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},SyncSubject_1=__webpack_require__(42),select_1=__webpack_require__(87),Store=function(_super){function Store(_dispatcher,_reducer,state$,initialState){var _this=this;_super.call(this,initialState),this._dispatcher=_dispatcher,this._reducer=_reducer,this.select=select_1.select.bind(this),state$.subscribe(function(state){return _super.prototype.next.call(_this,state)})}return __extends(Store,_super),Store.prototype.replaceReducer=function(reducer){this._reducer.replaceReducer(reducer)},Store.prototype.dispatch=function(action){this._dispatcher.dispatch(action)},Store.prototype.next=function(action){this._dispatcher.dispatch(action)},Store.prototype.error=function(err){this._dispatcher.error(err)},Store.prototype.complete=function(){},Store}(SyncSubject_1.SyncSubject);exports.Store=Store},92:function(module,exports){"use strict";function combineReducers(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var finalReducerKeys=Object.keys(finalReducers);return function(state,action){void 0===state&&(state={});for(var hasChanged=!1,nextState={},i=0;i<finalReducerKeys.length;i++){var key=finalReducerKeys[i],reducer=finalReducers[key],previousStateForKey=state[key],nextStateForKey=reducer(previousStateForKey,action);nextState[key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return hasChanged?nextState:state}}exports.combineReducers=combineReducers},174:function(module,exports){"use strict";var logger=console,INIT_ACTION="@ngrx/store/init",repeat=function(str,times){return new Array(times+1).join(str)},pad=function(num,maxLength){return repeat("0",maxLength-num.toString().length)+num},formatTime=function(time){return"@ "+pad(time.getHours(),2)+":"+pad(time.getMinutes(),2)+":"+pad(time.getSeconds(),2)+"."+pad(time.getMilliseconds(),3)},timer="undefined"!=typeof performance&&"function"==typeof performance.now?performance:Date,getLogLevel=function(level,action,payload,type){switch(typeof level){case"object":return"function"==typeof level[type]?level[type].apply(level,payload):level[type];case"function":return level(action);default:return level}},printBuffer=function(options){return function(logBuffer){var actionTransformer=options.actionTransformer,collapsed=options.collapsed,colors=options.colors,timestamp=options.timestamp,duration=options.duration,level=options.level;logBuffer.forEach(function(logEntry,key){var started=logEntry.started,startedTime=logEntry.startedTime,action=logEntry.action,prevState=logEntry.prevState,error=logEntry.error,took=logEntry.took,nextState=logEntry.nextState,nextEntry=logBuffer[key+1];nextEntry&&(nextState=nextEntry.prevState,took=nextEntry.started-started);var formattedAction=actionTransformer(action),isCollapsed="function"==typeof collapsed?collapsed(function(){return nextState},action):collapsed,formattedTime=formatTime(startedTime),titleCSS=colors.title?"color: "+colors.title(formattedAction)+";":null,title="action "+(timestamp?formattedTime:"")+" "+formattedAction.type+" "+(duration?"(in "+took.toFixed(2)+" ms)":"");try{isCollapsed?colors.title?logger.groupCollapsed("%c "+title,titleCSS):logger.groupCollapsed(title):colors.title?logger.group("%c "+title,titleCSS):logger.group(title)}catch(e){logger.log(title)}var prevStateLevel=getLogLevel(level,formattedAction,[prevState],"prevState"),actionLevel=getLogLevel(level,formattedAction,[formattedAction],"action"),errorLevel=getLogLevel(level,formattedAction,[error,prevState],"error"),nextStateLevel=getLogLevel(level,formattedAction,[nextState],"nextState");prevStateLevel&&(colors.prevState?logger[prevStateLevel]("%c prev state","color: "+colors.prevState(prevState)+"; font-weight: bold",prevState):logger[prevStateLevel]("prev state",prevState)),actionLevel&&(colors.action?logger[actionLevel]("%c action","color: "+colors.action(formattedAction)+"; font-weight: bold",formattedAction):logger[actionLevel]("action",formattedAction)),error&&errorLevel&&(colors.error?logger[errorLevel]("%c error","color: "+colors.error(error,prevState)+"; font-weight: bold",error):logger[errorLevel]("error",error)),nextStateLevel&&(colors.nextState?logger[nextStateLevel]("%c next state","color: "+colors.nextState(nextState)+"; font-weight: bold",nextState):logger[nextStateLevel]("next state",nextState));try{logger.groupEnd()}catch(e){logger.log("—— log end ——")}}),logBuffer.length=0}};exports.storeLogger=function(opts){return void 0===opts&&(opts={}),function(reducer){var log={},ua=window&&window.navigator.userAgent?window.navigator.userAgent:"",ms_ie=!1,old_ie=ua.indexOf("MSIE "),new_ie=ua.indexOf("Trident/");(old_ie>-1||new_ie>-1)&&(ms_ie=!0);var defaults={level:"log",collapsed:!1,duration:!1,timestamp:!0,stateTransformer:function(state){return state},actionTransformer:function(actn){return actn},colors:ms_ie?{}:{title:function(){return"#000000"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}}},options=Object.assign({},defaults,opts),stateTransformer=options.stateTransformer,buffer=printBuffer(options);return function(state,action){var preLog={started:timer.now(),startedTime:new Date,prevState:stateTransformer(log),action:action},nextState=reducer(state,action),postLog={took:timer.now()-preLog.started,nextState:stateTransformer(nextState)};return log=Object.assign({},preLog,postLog),action.type!==INIT_ACTION&&buffer([log]),nextState}}}},149:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),ConversationActions=function(){function ConversationActions(){}return ConversationActions.prototype.loadCollectionSuccess=function(data){return{type:ConversationActions.LOAD_COLLECTION_SUCCESS,payload:{conversations:data.conversations,count:data.count}}},ConversationActions.prototype.loadingCollection=function(loading){return{type:ConversationActions.LOADING_COLLECTION,payload:loading}},ConversationActions.prototype.resetCollection=function(){return{type:ConversationActions.RESET_COLLECTION,payload:{}}},ConversationActions.prototype.selectConversation=function(conversation){return{type:ConversationActions.SELECT_CONVERSATION,payload:conversation}},ConversationActions.prototype.collectionFullyLoaded=function(){return{type:ConversationActions.COLLECTION_FULLY_LOADED,payload:{}}},ConversationActions.prototype.addNewOrReplaceExisting=function(conversation){return{type:ConversationActions.ADD_NEW_OR_REPLACE_EXISTING,payload:conversation}},ConversationActions.LOAD_COLLECTION_SUCCESS="[Conversation] Load Collection Success",ConversationActions.LOADING_COLLECTION="[Conversation] Loading Collection",ConversationActions.RESET_COLLECTION="[Conversation] Reseting Collection",ConversationActions.SELECT_CONVERSATION="[Conversation] Select Conversation",ConversationActions.COLLECTION_FULLY_LOADED="[Conversation] Collection Fully Loaded",ConversationActions.ADD_NEW_OR_REPLACE_EXISTING="[Conversation] Add New Or Replace Existing",ConversationActions=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],ConversationActions)}();exports.ConversationActions=ConversationActions},24:function(module,exports,__webpack_require__){"use strict";var conversation_action_1=__webpack_require__(149);exports.ConversationActions=conversation_action_1.ConversationActions;var message_action_1=__webpack_require__(150);exports.MessageActions=message_action_1.MessageActions;var unread_messages_counter_actions_1=__webpack_require__(152);exports.UnreadMessagesCounterActions=unread_messages_counter_actions_1.UnreadMessagesCounterActions;var new_connections_counter_actions_1=__webpack_require__(151);exports.NewConnectionsCounterActions=new_connections_counter_actions_1.NewConnectionsCounterActions,Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=[conversation_action_1.ConversationActions,message_action_1.MessageActions,unread_messages_counter_actions_1.UnreadMessagesCounterActions,new_connections_counter_actions_1.NewConnectionsCounterActions]},150:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),MessageActions=function(){function MessageActions(){}return MessageActions.prototype.loadCollectionSuccess=function(data){return{type:MessageActions.LOAD_COLLECTION_SUCCESS,payload:{messages:data.messages,count:data.count}}},MessageActions.prototype.loadingCollection=function(loading){return{type:MessageActions.LOADING_COLLECTION,payload:loading}},MessageActions.prototype.resetCollection=function(){return{type:MessageActions.RESET_COLLECTION,payload:{}}},MessageActions.prototype.loadedConversationTitle=function(title){return{type:MessageActions.LOADED_CONVERSATION_TITLE,payload:title}},MessageActions.prototype.collectionFullyLoaded=function(){return{type:MessageActions.COLLECTION_FULLY_LOADED,payload:{}}},MessageActions.prototype.moreItemsLoaded=function(count){return{type:MessageActions.MORE_ITEMS_LOADED,payload:count}},MessageActions.prototype.sendingNewMessage=function(){return{type:MessageActions.SENDING_NEW_MESSAGE,payload:{}}},MessageActions.prototype.addNewMessageToCollectionSuccess=function(message){return{type:MessageActions.ADD_NEW_MESSAGE_TO_COLLECTION_SUCCESS,payload:message}},MessageActions.prototype.addNewMessageToCollectionViaWebsocketSuccess=function(message){return{type:MessageActions.ADD_NEW_MESSAGE_TO_COLLECTION_VIA_WEBSOCKET_SUCCESS,payload:message}},MessageActions.LOAD_COLLECTION_SUCCESS="[Message] Load Collection Success",MessageActions.LOADING_COLLECTION="[Message] Loading Collection",MessageActions.RESET_COLLECTION="[Message] Reseting Collection",MessageActions.LOADED_CONVERSATION_TITLE="[Message] Loaded Conversation title",MessageActions.COLLECTION_FULLY_LOADED="[Message] Collection Fully Loaded",MessageActions.MORE_ITEMS_LOADED="[Message] More Items Loaded",MessageActions.SENDING_NEW_MESSAGE="[Message] Sending New Message",MessageActions.ADD_NEW_MESSAGE_TO_COLLECTION_SUCCESS="[Message] Add New Message To Collection Success",MessageActions.ADD_NEW_MESSAGE_TO_COLLECTION_VIA_WEBSOCKET_SUCCESS="[Message] Add New Message To Collection Via Websocket Success",MessageActions=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],MessageActions)}();exports.MessageActions=MessageActions},151:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),NewConnectionsCounterActions=function(){function NewConnectionsCounterActions(){}return NewConnectionsCounterActions.prototype.loadCounterSuccess=function(data){return{type:NewConnectionsCounterActions.LOAD_COUNTER_SUCCESS,payload:{counter:data}}},NewConnectionsCounterActions.prototype.increaseCounter=function(){return{type:NewConnectionsCounterActions.INCREASE_COUNTER,payload:{}}},NewConnectionsCounterActions.LOAD_COUNTER_SUCCESS="[New Connections Counter] Load Counter Success",NewConnectionsCounterActions.INCREASE_COUNTER="[New Connections Counter] Increase Counter",NewConnectionsCounterActions=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],NewConnectionsCounterActions)}();exports.NewConnectionsCounterActions=NewConnectionsCounterActions},152:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),UnreadMessagesCounterActions=function(){function UnreadMessagesCounterActions(){}return UnreadMessagesCounterActions.prototype.loadCounterSuccess=function(data){return{type:UnreadMessagesCounterActions.LOAD_COUNTER_SUCCESS,payload:{counter:data}}},UnreadMessagesCounterActions.prototype.increaseCounter=function(){return{type:UnreadMessagesCounterActions.INCREASE_COUNTER,payload:{}}},UnreadMessagesCounterActions.LOAD_COUNTER_SUCCESS="[Unread Messages Counter] Load Counter Success",UnreadMessagesCounterActions.INCREASE_COUNTER="[Unread Messages Counter] Increase Counter",UnreadMessagesCounterActions=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],UnreadMessagesCounterActions)}();exports.UnreadMessagesCounterActions=UnreadMessagesCounterActions},93:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(__webpack_require__(157))},158:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(__webpack_require__(219))},159:function(module,exports,__webpack_require__){"use strict";function default_1(state,action){switch(void 0===state&&(state=initialState),action.type){case actions_1.ConversationActions.RESET_COLLECTION:return Object.assign({},state,initialState);case actions_1.ConversationActions.SELECT_CONVERSATION:var conversation=action.payload;return Object.assign({},state,{selectedItem:conversation});case actions_1.ConversationActions.LOAD_COLLECTION_SUCCESS:var conversations=action.payload.conversations,count=action.payload.count,existingConversationsIDs_1=state.entities.map(function(conversation,index){return conversation.id}),conversationsNew=conversations.map(function(conversation,index){return-1===existingConversationsIDs_1.indexOf(conversation.id)?conversation:void 0});return Object.assign({},state,{entities:state.entities.concat(conversationsNew),count:count,loading:!1});case actions_1.ConversationActions.LOADING_COLLECTION:return Object.assign({},state,{loading:!0});case actions_1.ConversationActions.COLLECTION_FULLY_LOADED:return Object.assign({},state,{loaded:!0});case actions_1.ConversationActions.ADD_NEW_OR_REPLACE_EXISTING:var newConversation_1=action.payload,conversationExists_1=!1,conversations=state.entities.map(function(conversation,index){return conversation.id===newConversation_1.id?(conversationExists_1=!0,conversation.unread=newConversation_1.unread,conversation.unreadCounter=newConversation_1.unreadCounter,conversation.body=newConversation_1.body,conversation.sentAt=newConversation_1.sentAt,conversation):conversation});return conversationExists_1?Object.assign({},state,{entities:conversations.slice()}):Object.assign({},state,{entities:[newConversation_1].concat(state.entities)});default:return state}}var actions_1=__webpack_require__(24),initialState={entities:[],selectedItem:{},count:0,loading:!1,loaded:!1};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=default_1},52:function(module,exports,__webpack_require__){"use strict";function getConversationsState(){return function(state$){return state$.select(function(s){return s.conversations})}}function getMessagesState(){return function(state$){return state$.select(function(s){return s.messages})}}function getUnreadMessagesCounterState(){return function(state$){return state$.select(function(s){return s.unreadMessagesCounter})}}function getNewConnectionsCounterState(){return function(state$){return state$.select(function(s){return s.newConnectionsCounter})}}__webpack_require__(139),__webpack_require__(226),__webpack_require__(225);var compose_1=__webpack_require__(140),ngrx_store_logger_1=__webpack_require__(174),store_1=__webpack_require__(38),conversations_reducer_1=__webpack_require__(159),messages_reducer_1=__webpack_require__(160),unread_messages_counter_reducer_1=__webpack_require__(162),new_connections_counter_reducer_1=__webpack_require__(161);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=compose_1.compose(ngrx_store_logger_1.storeLogger(),store_1.combineReducers)({conversations:conversations_reducer_1.default,messages:messages_reducer_1.default,unreadMessagesCounter:unread_messages_counter_reducer_1.default,newConnectionsCounter:new_connections_counter_reducer_1.default}),exports.getConversationsState=getConversationsState,exports.getMessagesState=getMessagesState,exports.getUnreadMessagesCounterState=getUnreadMessagesCounterState,exports.getNewConnectionsCounterState=getNewConnectionsCounterState},160:function(module,exports,__webpack_require__){"use strict";function default_1(state,action){switch(void 0===state&&(state=initialState),action.type){case actions_1.MessageActions.RESET_COLLECTION:return Object.assign({},state,initialState);case actions_1.MessageActions.LOAD_COLLECTION_SUCCESS:var messages=action.payload.messages,count=action.payload.count;return Object.assign({},state,{entities:messages.concat(state.entities),totalCount:count,loading:!1});case actions_1.MessageActions.ADD_NEW_MESSAGE_TO_COLLECTION_SUCCESS:var message=action.payload;return Object.assign({},state,{entities:state.entities.concat([message]),totalCount:state.totalCount+1,isNewMessageBeingSent:!1});case actions_1.MessageActions.ADD_NEW_MESSAGE_TO_COLLECTION_VIA_WEBSOCKET_SUCCESS:var message=action.payload;return Object.assign({},state,{entities:state.entities.concat([message]),totalCount:state.totalCount+1});case actions_1.MessageActions.LOADING_COLLECTION:return Object.assign({},state,{loading:!0});case actions_1.MessageActions.MORE_ITEMS_LOADED:return Object.assign({},state,{loadedCount:action.payload+state.loadedCount});case actions_1.MessageActions.COLLECTION_FULLY_LOADED:return Object.assign({},state,{loaded:!0});case actions_1.MessageActions.SENDING_NEW_MESSAGE:return Object.assign({},state,{isNewMessageBeingSent:!0});case actions_1.MessageActions.LOADED_CONVERSATION_TITLE:var title=action.payload;return Object.assign({},state,{conversationTitle:title});default:return state}}var actions_1=__webpack_require__(24),initialState={entities:[],totalCount:0,loadedCount:0,conversationTitle:"",loading:!1,loaded:!1,isNewMessageBeingSent:!1};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=default_1},161:function(module,exports,__webpack_require__){"use strict";function default_1(state,action){switch(void 0===state&&(state=initialState),action.type){case actions_1.NewConnectionsCounterActions.LOAD_COUNTER_SUCCESS:var counter=action.payload.counter;return Object.assign({},state,{counter:counter});case actions_1.NewConnectionsCounterActions.INCREASE_COUNTER:return Object.assign({},state,{counter:state.counter+1});default:return state}}var actions_1=__webpack_require__(24),initialState={counter:0};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=default_1},162:function(module,exports,__webpack_require__){"use strict";function default_1(state,action){switch(void 0===state&&(state=initialState),action.type){case actions_1.UnreadMessagesCounterActions.LOAD_COUNTER_SUCCESS:var counter=action.payload.counter;return Object.assign({},state,{counter:counter});case actions_1.UnreadMessagesCounterActions.INCREASE_COUNTER:return Object.assign({},state,{counter:state.counter+1});default:return state}}var actions_1=__webpack_require__(24),initialState={counter:0};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=default_1},46:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(__webpack_require__(164)),__export(__webpack_require__(165)),__export(__webpack_require__(163))},163:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),store_1=__webpack_require__(38),core_2=__webpack_require__(4),actions_1=__webpack_require__(24),reducers_1=__webpack_require__(52),NewConnectionsCounterService=function(){function NewConnectionsCounterService(http,store,actions){this.http=http,this.store=store,this.actions=actions;var store$=store.let(reducers_1.getNewConnectionsCounterState());this.counter$=store$.map(function(state){return state.counter})}return NewConnectionsCounterService.prototype.refresh=function(){var _this=this,url=NewConnectionsCounterService.API_URL+"?format=json",subs=this.http.get(url).map(function(res){return res.json()}).subscribe(function(dto){if(1===dto.meta.total_count){var counter=dto.objects[0].new_connection_counter;_this.store.dispatch(_this.actions.loadCounterSuccess(counter)),subs.unsubscribe()}})},NewConnectionsCounterService.prototype.increase=function(){this.store.dispatch(this.actions.increaseCounter())},NewConnectionsCounterService.API_URL="/api/v2/new_connections/counter/",NewConnectionsCounterService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[core_2.HttpClient,store_1.Store,actions_1.NewConnectionsCounterActions])],NewConnectionsCounterService)}();exports.NewConnectionsCounterService=NewConnectionsCounterService,exports.newConnectionsCounterServiceInjectables=[core_1.provide(NewConnectionsCounterService,{useClass:NewConnectionsCounterService})]},164:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),SignupStateService=function(){function SignupStateService(){this.counterEmitter=new core_1.EventEmitter}return SignupStateService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],SignupStateService)}();exports.SignupStateService=SignupStateService,exports.signupStateServiceInjectables=[core_1.provide(SignupStateService,{useClass:SignupStateService})]},165:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),store_1=__webpack_require__(38),core_2=__webpack_require__(4),actions_1=__webpack_require__(24),reducers_1=__webpack_require__(52),UnreadMessagesCounterService=function(){function UnreadMessagesCounterService(http,store,actions){this.http=http,this.store=store,this.actions=actions;var store$=store.let(reducers_1.getUnreadMessagesCounterState());this.counter$=store$.map(function(state){return state.counter})}return UnreadMessagesCounterService.prototype.refresh=function(){var _this=this,url=UnreadMessagesCounterService.API_URL+"?format=json",subs=this.http.get(url).map(function(res){return res.json()}).subscribe(function(dto){if(1===dto.meta.total_count){var counter=dto.objects[0].unread_counter;_this.store.dispatch(_this.actions.loadCounterSuccess(counter)),subs.unsubscribe()}})},UnreadMessagesCounterService.prototype.increase=function(){this.store.dispatch(this.actions.increaseCounter())},UnreadMessagesCounterService.API_URL="/api/v1/inbox/unread_counter/",UnreadMessagesCounterService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[core_2.HttpClient,store_1.Store,actions_1.UnreadMessagesCounterActions])],UnreadMessagesCounterService)}();exports.UnreadMessagesCounterService=UnreadMessagesCounterService,exports.unreadMessagesCounterServiceInjectables=[core_1.provide(UnreadMessagesCounterService,{useClass:UnreadMessagesCounterService})]},0:function(module,exports,__webpack_require__){"use strict";function main(initialHmrState){return platform_browser_dynamic_1.bootstrap(signup_1.SignupComponent,environment_1.ENV_PROVIDERS.concat(browser_1.PROVIDERS_SIGNUP,browser_1.DIRECTIVES,browser_1.PIPES,signup_1.APP_PROVIDERS)).catch(function(err){return console.error(err)})}var platform_browser_dynamic_1=__webpack_require__(136),browser_1=__webpack_require__(221),environment_1=__webpack_require__(222),signup_1=__webpack_require__(963);exports.main=main;document.addEventListener("DOMContentLoaded",function(){return main()})},957:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(__webpack_require__(958))},958:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),services_1=__webpack_require__(7),SignupConnectComponent=function(){function SignupConnectComponent(service,_ngZone){this.service=service,this._ngZone=_ngZone,this.connectStatus={twitter:{connected:!1,username:"Your twitter account",url:""},linkedin:{connected:!1,username:"Your linkedin account",url:""}}}return SignupConnectComponent.prototype.ngOnInit=function(){var _this=this;this.getConnectStatus(),jQuery(".connect-media").on("persice:refreshConnect",function(e){_this.refreshConnectInfo()})},SignupConnectComponent.prototype.refreshConnectInfo=function(){var _this=this;this.service.findOneByUri("me").subscribe(function(data){_this.getConnectStatus()})},SignupConnectComponent.prototype.getConnectStatus=function(){var _this=this;this._ngZone.run(function(){_this.connectStatus=_this.service.getConnectStatus()})},SignupConnectComponent.prototype.toggle=function(provider){this.connectStatus[provider].connected?this.disconnect(provider):this.connect(provider)},SignupConnectComponent.prototype.connect=function(provider){var w=400,h=300,dualScreenLeft=window.screenLeft,dualScreenTop=window.screenTop,width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,left=width/2-w/2+dualScreenLeft,top=height/2-h/2+dualScreenTop,settings="height="+h+",width="+w+",left="+left+",top="+top+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=yes,directories=no,status=yes",url="/social/associate/"+provider+"/?next=/goals/close_login_popup/",newWindow=window.open(url,"Connecting your "+provider+" account...",settings);window.focus&&newWindow.focus()},SignupConnectComponent.prototype.disconnect=function(provider){
var w=400,h=300,dualScreenLeft=window.screenLeft,dualScreenTop=window.screenTop,width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,left=width/2-w/2+dualScreenLeft,top=height/2-h/2+dualScreenTop,settings="height="+h+",width="+w+",left="+left+",top="+top+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=yes,directories=no,status=yes",url="/social/disconnect/"+provider+"/?next=/goals/close_login_popup/",newWindow=window.open(url,"Disconnecting your "+provider+" account...",settings);window.focus&&newWindow.focus()},SignupConnectComponent.prototype.openUrl=function(provider){if(this.connectStatus[provider].connected){var win=window.open(this.connectStatus[provider].url,"_blank");win.focus()}},SignupConnectComponent=__decorate([core_1.Component({selector:"prs-signup-connect",template:__webpack_require__(1052)}),__metadata("design:paramtypes",[services_1.UserAuthService,core_1.NgZone])],SignupConnectComponent)}();exports.SignupConnectComponent=SignupConnectComponent},1052:function(module,exports){module.exports='<h2 class="signup-step__title mb mt+">Connect your LinkedIn and <br> Twitter accounts</h2>\n<p class="signup-step__subtitle">\n  This will improve your match results within the Persice community.\n  <br>\n  <svg role="img" class="icon">\n    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-lock"></use>\n  </svg> Persice will never share your information or post on your behalf.\n</p>\n<ul class="connect-media">\n  <li>\n    <div (click)="openUrl(\'twitter\')" class="connect-media__url" [ngClass]="{\'connect-media__url--activated\': connectStatus.twitter.connected}">\n      <svg role="img" class="icon icon--large icon--twitter">\n        <use xlink:href="/static/assets/icons/icons.svg#icon-twitter-share"></use>\n      </svg> <span class="connect-media__title connect-media__title--twitter">twitter</span>\n    </div>\n    <p class="connect-media__username" [ngClass]="{\'connect-media__username--activated\': connectStatus.twitter.connected}">{{connectStatus.twitter.username}}</p>\n    <a id="linkedinLink" (click)="toggle(\'twitter\')" [ngClass]="{\'is-active\': connectStatus.twitter.connected}" class="btn btn-1 btn-1--connect btn-1--connect--twitter btn--full btn--connect js-accept">\n      <div class="btn--connect__label">Connect</div>\n      <svg role="img" class="icon">\n        <use xlink:href="/static/assets/icons/icons.svg#icon-success-2"></use>\n      </svg>\n    </a>\n  </li>\n  <li>\n    <div (click)="openUrl(\'linkedin\')" class="connect-media__url" [ngClass]="{\'connect-media__url--activated\': connectStatus.linkedin.connected}">\n      <svg role="img" class="icon icon--large icon--linkedin">\n        <use xlink:href="/static/assets/icons/icons.svg#icon-linkedin-share"></use>\n      </svg> <span class="connect-media__title connect-media__title--linkedin">linkedin</span>\n    </div>\n    <p class="connect-media__username" [ngClass]="{\'connect-media__username--activated\': connectStatus.linkedin.connected}">{{connectStatus.linkedin.username}}</p>\n    <a id="linkedinLink" (click)="toggle(\'linkedin\')" [ngClass]="{\'is-active\': connectStatus.linkedin.connected}" class="btn btn-1 btn-1--connect btn-1--connect--linkedin btn--full btn--connect js-accept">\n      <div class="btn--connect__label">Connect</div>\n      <svg role="img" class="icon">\n        <use xlink:href="/static/assets/icons/icons.svg#icon-success-2"></use>\n      </svg>\n    </a>\n  </li>\n</ul>\n<a class="mr" href="#"></a>\n<a href="#"></a>\n'},959:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(__webpack_require__(960))},960:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),manage_goals_offers_1=__webpack_require__(93),services_1=__webpack_require__(7),services_2=__webpack_require__(46),directives_1=__webpack_require__(31),loading_1=__webpack_require__(14),SignupGoalsComponent=function(_super){function SignupGoalsComponent(goalsService,signupStateService){_super.call(this,goalsService),this.goalsService=goalsService,this.signupStateService=signupStateService}return __extends(SignupGoalsComponent,_super),SignupGoalsComponent.prototype.ngOnInit=function(){this.getList()},SignupGoalsComponent.prototype.afterCounterChanged=function(){this.signupStateService.counterEmitter.emit({type:"goals",count:this.total_count})},SignupGoalsComponent=__decorate([core_1.Component({selector:"prs-signup-goals",template:__webpack_require__(1053),directives:[loading_1.LoadingComponent,directives_1.AutocompleteDirective,directives_1.InfiniteScrollElementDirective]}),__metadata("design:paramtypes",[services_1.GoalsService,services_2.SignupStateService])],SignupGoalsComponent)}(manage_goals_offers_1.ManageGoalsOffersComponent);exports.SignupGoalsComponent=SignupGoalsComponent},1053:function(module,exports){module.exports='<h2 class="signup-step__title">My goal is to...</h2>\n<div class="search-signup-wrapper">\n  <div class="search search--signup typeahead-search">\n    <div class="search__top">\n      <svg role="img" class="icon">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-search"></use>\n      </svg>\n      <input [(ngModel)]="newItemText" (keyup)="inputChanged($event)" type="text" class="search__input typeahead" placeholder="Enter a few goals here" id="typeaheadInput" persice-autocomplete [apiUrl]="AUTOCOMPLETE_API_ENDPOINT" [apiAttr]="AUTOCOMPLETE_API_ATTRIBUTE" [minLength]="MINIMUM_ITEM_LENGTH" (onSelected)="itemSelectedFromAutocomplete($event)">\n      <div class="search__notification search__notification--error" [ngClass]="{\'is-visible\': status === \'failure\'}">\n        <svg role="img" class="icon ">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-failure"></use>\n        </svg>\n      </div>\n      <div class="search__notification search__notification--succes" [ngClass]="{\'is-visible\': status === \'success\'}">\n        <svg role="img" class="icon ">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-success-2"></use>\n        </svg>\n      </div>\n      <button class="btn">\n        <svg role="img" class="icon" (click)="add($event)">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-plus-big"></use>\n        </svg>\n      </button>\n    </div>\n  </div>\n  <div class="search__tags-wrapper text-left" [ngClass]="{\'has-signup-empty-state\': isListEmpty}" prs-infinite-scroll-element (scrolled)="loadMoreItems($event)" [scrollEnabled]="1" [bottomOffset]="60">\n    <span class="search-tag-secondary" *ngFor="let item of items">\n      <a (click)="remove(item)">\n        <svg role="img" class="icon icon--tiny">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-delete"></use>\n        </svg>\n      </a>\n      {{item.subject}}\n    </span>\n    <div class="signup-empty-state is-visible" *ngIf="isListEmpty">\n      <svg role="img" class="icon signup-empty-state__icon">\n        <use xlink:href="/static/assets/icons/icons.svg#no-goals"></use>\n      </svg>\n      <h3 class="signup-empty-state__title">"Goals" are things you want to achieve.</h3>\n      <p class="signup-empty-state__par signup-empty-state__par--prom">For example:</p>\n      <p class="signup-empty-state__par">"Learn how to salsa dance" or\n        <br>"Discover new hiking trails"</p>\n    </div>\n    <prs-loading [status]="loading"></prs-loading>\n  </div>\n</div>\n'},961:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(__webpack_require__(962))},962:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),router_deprecated_1=__webpack_require__(9),SignupHeaderComponent=function(){function SignupHeaderComponent(){this.next=new core_1.EventEmitter,this.skip=new core_1.EventEmitter}return __decorate([core_1.Input(),__metadata("design:type",Object)],SignupHeaderComponent.prototype,"counterInterests",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],SignupHeaderComponent.prototype,"counterGoals",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],SignupHeaderComponent.prototype,"counterOffers",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],SignupHeaderComponent.prototype,"page",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],SignupHeaderComponent.prototype,"nextTitle",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],SignupHeaderComponent.prototype,"showSkip",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],SignupHeaderComponent.prototype,"next",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],SignupHeaderComponent.prototype,"skip",void 0),SignupHeaderComponent=__decorate([core_1.Component({selector:"prs-signup-header",template:__webpack_require__(1054),directives:[router_deprecated_1.ROUTER_DIRECTIVES]}),__metadata("design:paramtypes",[])],SignupHeaderComponent)}();exports.SignupHeaderComponent=SignupHeaderComponent},1054:function(module,exports){module.exports='<header class="header-signup">\n  <div class="layout layout--middle">\n    <div class="layout__item 2/3">\n      <div class="layout layout--auto">\n        <div class="layout__item">\n          <div class="header-signup__logo-place">\n            <a class="site-logo" href="/signup">\n              <img alt="#" src="/static/assets/images/logo.svg" class="site-logo__mark">\n              <h1 class="site-logo__type">Persice</h1>\n            </a>\n          </div>\n        </div>\n        <div class="layout__item">\n          <ul class="header-signup__steps">\n            <li *ngIf="page >= 1"><a [routerLink]="[\'./SignupInterests\']"><b>{{counterInterests}}</b> interests</a></li>\n            <li *ngIf="page >= 2"><a [routerLink]="[\'./SignupGoals\']"><b>{{counterGoals}}</b> goals</a></li>\n            <li *ngIf="page >= 3"><a [routerLink]="[\'./SignupOffers\']"><b>{{counterOffers}}</b> offers</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <div class="layout__item 1/3 text-right pr">\n      <a *ngIf="showSkip" (click)="skip.next($event)" class="link--darkgrey mr">Skip</a>\n      <a (click)="next.next($event)" class="btn btn-1 btn-1--green btn-1--medium ">{{nextTitle}}</a>\n    </div>\n  </div>\n</header>\n'},963:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(__webpack_require__(968));var core_1=__webpack_require__(4);exports.APP_PROVIDERS=[core_1.HttpClient]},964:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(__webpack_require__(965))},965:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),manage_interests_1=__webpack_require__(158),services_1=__webpack_require__(7),services_2=__webpack_require__(46),directives_1=__webpack_require__(31),loading_1=__webpack_require__(14),SignupInterestsComponent=function(_super){function SignupInterestsComponent(interestsService,keywordsService,signupStateService,warningService){_super.call(this,interestsService,keywordsService),this.interestsService=interestsService,this.keywordsService=keywordsService,this.signupStateService=signupStateService,this.warningService=warningService,this.showWarning=!1}return __extends(SignupInterestsComponent,_super),SignupInterestsComponent.prototype.ngOnInit=function(){var _this=this;this.getList(),this.warningServiceInstance=this.warningService.observer().subscribe(function(event){return _this.showWarning=event})},SignupInterestsComponent.prototype.ngOnDestroy=function(){this.warningServiceInstance.unsubscribe()},SignupInterestsComponent.prototype.afterCounterChanged=function(){this.signupStateService.counterEmitter.emit({type:"interests",count:this.counter})},SignupInterestsComponent=__decorate([core_1.Component({selector:"prs-signup-interests",template:__webpack_require__(1055),directives:[loading_1.LoadingComponent,directives_1.AutocompleteDirective,directives_1.InfiniteScrollElementDirective]}),__metadata("design:paramtypes",[services_1.InterestsService,services_1.KeywordsService,services_2.SignupStateService,services_1.WarningService])],SignupInterestsComponent)}(manage_interests_1.ManageInterestsComponent);exports.SignupInterestsComponent=SignupInterestsComponent},1055:function(module,exports){module.exports='<h2 class="signup-step__title">What interests you?</h2>\n<p class="signup-step__subtitle signup-step__subtitle__warning" *ngIf="showWarning">Please select at least three.</p>\n<div class="search-signup-wrapper">\n  <div class="search search--signup typeahead-search">\n    <div class="search__top" id="interestsSearch">\n      <svg role="img" class="icon ">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-search"></use>\n      </svg>\n      <input [(ngModel)]="newItemText" (keyup)="inputChanged($event)" type="text"\n      class="search__input typeahead" placeholder="Enter your interests or search existing"\n      id="typeaheadInput"\n      persice-autocomplete\n      [apiUrl]="AUTOCOMPLETE_API_ENDPOINT"\n      [apiAttr]="AUTOCOMPLETE_API_ATTRIBUTE"\n      [minLength]="MINIMUM_ITEM_LENGTH"\n      (onSelected)="itemSelectedFromAutocomplete($event)"\n      >\n      <div class="search__notification search__notification--error" [ngClass]="{\'is-visible\': status === \'failure\'}">\n        <svg role="img" class="icon ">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-failure"></use>\n        </svg>\n      </div>\n      <div class="search__notification search__notification--succes" [ngClass]="{\'is-visible\': status === \'success\'}">\n        <svg role="img" class="icon ">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-success-2"></use>\n        </svg>\n      </div>\n      <button class="btn" (click)="add($event)">\n        <svg role="img" class="icon ">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-plus-big"></use>\n        </svg>\n      </button>\n    </div>\n  </div>\n  <div class="search__tags-wrapper"\n    prs-infinite-scroll-element\n    (scrolled)="loadMoreItems($event)"\n    [scrollEnabled]="1"\n    [bottomOffset]="60">\n    <span (click)="onInterestClick(item)" [ngClass]="{\'is-current\': item.active}" class="search-tag" *ngFor="let item of items">{{item.description}}</span>\n    <prs-loading [status]="loading"></prs-loading>\n  </div>\n</div>\n'},966:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}__export(__webpack_require__(967))},967:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),manage_goals_offers_1=__webpack_require__(93),services_1=__webpack_require__(7),services_2=__webpack_require__(46),directives_1=__webpack_require__(31),loading_1=__webpack_require__(14),SignupOffersComponent=function(_super){function SignupOffersComponent(offersService,signupStateService){_super.call(this,offersService),this.offersService=offersService,this.signupStateService=signupStateService}return __extends(SignupOffersComponent,_super),SignupOffersComponent.prototype.ngOnInit=function(){this.getList()},SignupOffersComponent.prototype.afterCounterChanged=function(){this.signupStateService.counterEmitter.emit({type:"offers",count:this.total_count})},SignupOffersComponent=__decorate([core_1.Component({selector:"prs-signup-offers",template:__webpack_require__(1056),directives:[loading_1.LoadingComponent,directives_1.AutocompleteDirective,directives_1.InfiniteScrollElementDirective]}),__metadata("design:paramtypes",[services_1.OffersService,services_2.SignupStateService])],SignupOffersComponent)}(manage_goals_offers_1.ManageGoalsOffersComponent);exports.SignupOffersComponent=SignupOffersComponent},1056:function(module,exports){module.exports='<h2 class="signup-step__title">I can help people...</h2>\n<div class="search-signup-wrapper">\n  <div class="search search--signup typeahead-search">\n    <div class="search__top">\n      <svg role="img" class="icon">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-search"></use>\n      </svg>\n      <input [(ngModel)]="newItemText" (keyup)="inputChanged($event)" type="text" class="search__input typeahead" placeholder="Enter a few goals here" id="typeaheadInput" persice-autocomplete [apiUrl]="AUTOCOMPLETE_API_ENDPOINT" [apiAttr]="AUTOCOMPLETE_API_ATTRIBUTE" [minLength]="MINIMUM_ITEM_LENGTH" (onSelected)="itemSelectedFromAutocomplete($event)">\n      <div class="search__notification search__notification--error" [ngClass]="{\'is-visible\': status === \'failure\'}">\n        <svg role="img" class="icon ">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-failure"></use>\n        </svg>\n      </div>\n      <div class="search__notification search__notification--succes" [ngClass]="{\'is-visible\': status === \'success\'}">\n        <svg role="img" class="icon ">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-success-2"></use>\n        </svg>\n      </div>\n      <button class="btn">\n        <svg role="img" class="icon" (click)="add($event)">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-plus-big"></use>\n        </svg>\n      </button>\n    </div>\n  </div>\n  <div class="search__tags-wrapper text-left" [ngClass]="{\'has-signup-empty-state\': isListEmpty}" prs-infinite-scroll-element (scrolled)="loadMoreItems($event)" [scrollEnabled]="1" [bottomOffset]="60">\n    <span class="search-tag-secondary" *ngFor="let item of items">\n      <a (click)="remove(item)">\n        <svg role="img" class="icon icon--tiny">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/assets/icons/icons.svg#icon-delete"></use>\n        </svg>\n      </a>\n      {{item.subject}}\n    </span>\n    <div class="signup-empty-state is-visible" *ngIf="isListEmpty">\n      <svg role="img" class="icon signup-empty-state__icon">\n        <use xlink:href="/static/assets/icons/icons.svg#no-offers"></use>\n      </svg>\n      <h3 class="signup-empty-state__title">"Offers" are things you can help other people achieve.</h3>\n      <p class="signup-empty-state__par signup-empty-state__par--prom">For example:</p>\n      <p class="signup-empty-state__par">"Practice speaking Spanish"\n        <br>or "Find a tennis partner"</p>\n    </div>\n    <prs-loading [status]="loading"></prs-loading>\n  </div>\n</div>\n'},968:function(module,exports,__webpack_require__){"use strict";var core_1=__webpack_require__(1),router_deprecated_1=__webpack_require__(9),common_1=__webpack_require__(35),interests_1=__webpack_require__(964),goals_1=__webpack_require__(959),offers_1=__webpack_require__(966),connect_social_accounts_1=__webpack_require__(957),header_1=__webpack_require__(961),services_1=__webpack_require__(7),services_2=__webpack_require__(46),SignupComponent=function(){function SignupComponent(router,location,goalsService,offersService,interestsService,userAuthService,onboardingService,warningService,signupStateService){var _this=this;this.goalsService=goalsService,this.offersService=offersService,this.interestsService=interestsService,this.userAuthService=userAuthService,this.onboardingService=onboardingService,this.warningService=warningService,this.signupStateService=signupStateService,this.page=1,this.cGoa=0,this.cOff=0,this.cInt=0,this.showSkip=!1,this.nextStep="SignupGoals",this.nextTitle="Next",this.is_complete=null,this.notificationMain={body:"",title:"",active:!1,type:""},this.router=router,this.location=location,this.signupStateService.counterEmitter.subscribe(function(state){_this.onCounterChanged(state)}),this.router.subscribe(function(path){_this.onRouteChanged(path)})}return SignupComponent.prototype.ngOnInit=function(){var _this=this;this.userAuthService.findOneByUri("me").subscribe(function(data){var res=data;_this.cGoa=res.goals.length,_this.cOff=res.offers.length,_this.cInt=res.interests.length,_this.is_complete=res.onboardingflow})},SignupComponent.prototype.onRouteChanged=function(path){switch(path){case"interests":this.page=1,this.showSkip=!1,this.nextStep="SignupGoals",this.nextTitle="Next";break;case"goals":this.page=2,this.showSkip=!0,this.nextStep="SignupOffers",this.nextTitle="Next";break;case"offers":this.page=3,this.showSkip=!0,this.nextStep="SignupConnect",this.nextTitle="Next";break;case"connect":this.page=4,this.showSkip=!0,this.nextStep=null,this.nextTitle="Go!";break;default:this.page=1,this.showSkip=!1,this.nextStep="SignupGoals",this.nextTitle="Next"}},SignupComponent.prototype.next=function(event){if(this.nextStep){switch(this.nextStep){case"SignupGoals":if(this.cInt<3)return void this.warningService.push(!0);this.completeOnboarding(),this.warningService.push(!1)}this.router.navigate([this.nextStep])}else window.location.href="/crowd/"},SignupComponent.prototype.skip=function(event){this.nextStep?this.router.navigate([this.nextStep]):window.location.href="/crowd/"},SignupComponent.prototype.completeOnboarding=function(){null===this.is_complete&&this.onboardingService.complete().subscribe(function(data){},function(err){},function(){})},SignupComponent.prototype.onCounterChanged=function(event){switch(event.type){case"interests":this.cInt=event.count;break;case"goals":this.cGoa=event.count;break;case"offers":this.cOff=event.count}},SignupComponent=__decorate([core_1.Component({template:__webpack_require__(1057),selector:"persice-signup",encapsulation:core_1.ViewEncapsulation.None,directives:[header_1.SignupHeaderComponent,router_deprecated_1.ROUTER_DIRECTIVES],providers:[services_1.InterestsService,services_1.GoalsService,services_1.OffersService,services_1.KeywordsService,services_1.UserAuthService,services_1.OnboardingService,services_1.WarningService,services_2.SignupStateService]}),router_deprecated_1.RouteConfig([{path:"/",redirectTo:["SignupInterests"]},{path:"/interests",component:interests_1.SignupInterestsComponent,name:"SignupInterests",data:{page:1}},{path:"/goals",component:goals_1.SignupGoalsComponent,name:"SignupGoals",data:{page:2}},{path:"/offers",component:offers_1.SignupOffersComponent,name:"SignupOffers",data:{page:3}},{path:"/connect",component:connect_social_accounts_1.SignupConnectComponent,name:"SignupConnect",data:{page:4}}]),__metadata("design:paramtypes",[router_deprecated_1.Router,common_1.Location,services_1.GoalsService,services_1.OffersService,services_1.InterestsService,services_1.UserAuthService,services_1.OnboardingService,services_1.WarningService,services_2.SignupStateService])],SignupComponent)}();exports.SignupComponent=SignupComponent},1057:function(module,exports){module.exports='<div class="signup">\n  <prs-signup-header [nextTitle]="nextTitle" [showSkip]="showSkip" (skip)="skip($event)" (next)="next($event)" [page]="page" [counterInterests]="cInt" [counterOffers]="cOff" [counterGoals]="cGoa"></prs-signup-header>\n  <div class="signup__content">\n    <ul class="signup-pager">\n      <li [ngClass]="{\'signup-pager__curent\': page === 1, \'signup-pager__completed\': page >= 2}">1</li>\n      <li [ngClass]="{\'signup-pager__curent\': page === 2,\'signup-pager__completed\': page >= 3}">2</li>\n      <li [ngClass]="{\'signup-pager__curent\': page === 3, \'signup-pager__completed\': page === 4}">3</li>\n      <li [ngClass]="{\'signup-pager__curent\': page === 4}">4</li>\n    </ul>\n    <router-outlet></router-outlet>\n  </div>\n</div>\n'}});
//# sourceMappingURL=signup.e517a2b115cabbdd7b7b.bundle.map