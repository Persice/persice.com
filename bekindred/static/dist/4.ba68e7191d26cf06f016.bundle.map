{"version":3,"sources":["webpack:///4.ba68e7191d26cf06f016.chunk.js","webpack:///./src/app/components/profile/profile_friend.component.ts","webpack:///./src/app/containers/connections/connections.container.ts","webpack:///./src/app/containers/connections/connections.html"],"names":["webpackJsonp",426,"module","exports","__webpack_require__","__decorate","this","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","core_1","router_1","http_1","profile_avatar_component_1","profile_about_component_1","profile_likes_component_1","profile_friends_component_1","profile_networks_component_1","profile_items_component_1","loading_component_1","profile_gallery_component_1","dropdown_directive_1","remodal_directive_1","mutualfriends_service_1","photos_service_1","religiousviews_service_1","politicalviews_service_1","connections_counter_service_1","util_1","view","ProfileFriendComponent","mutualfriendsService","photosService","religiousviewsService","politicalviewsService","counterService","http","closeprofileEvent","EventEmitter","nextEvent","previousEvent","friendsTitle","profileType","profileAge","profileGender","profileLocation","profileScore","profileName","profileJob","profileReligiousViews","profilePoliticalViews","profileActiveAgo","profileDistance","profileAbout","profileAvatar","profilePhotos","profilePhotosCount","profileKeywords","profileKeywordsCount","profileInterests","profileGoals","profileOffers","profileInterestsCount","profileGoalsCount","profileOffersCount","profileLikes","profileLikesCount","profileFriends","mutual_bk_friends","mutual_bk_friends_count","mutual_fb_friends","mutual_fb_friends_count","mutual_linkedin_connections","mutual_linkedin_connections_count","mutual_twitter_followers","mutual_twitter_followers_count","mutual_twitter_friends","mutual_twitter_friends_count","profileFriendsCount","profileNetworks","facebook","twitter","linkedin","loading","loadingLikes","loadingConnections","loadingPhotos","galleryActive","galleryOptions","JSON","stringify","hashTracking","closeOnOutsideClick","prototype","ngOnDestroy","jQuery","document","off","ngOnInit","_this","on","e","setTimeout","focus","window","scrollTo","ngOnChanges","values","user","currentValue","assignUser","url","id","get","map","res","json","subscribe","data","refreshCounter","profileId","first_name","age","gender","distance","lives_in","likes","position","job","company","image","about","score","facebook_id","linkedin_provider","twitter_provider","twitter_username","ObjectUtil","transformSorted","offers","interests","goals","count","keywords","getMutualFriends","getPhotos","getReligiousViews","getPoliticalViews","assignMutualFriends","getByUser","assignReligiousViews","assignPoliticalViews","err","console","log","assignPhotos","meta","total_count","objects","reverse","items","parseInt","closeProfile","event","next","openMessages","eventHandler","openGallery","remodal","open","Input","Output","Component","selector","template","directives","ProfileAvatarComponent","ProfileAboutComponent","ProfileLikesComponent","ProfileFriendsComponent","ProfileNetworksComponent","ProfileItemsComponent","DropdownDirective","LoadingComponent","ProfileGalleryComponent","RemodalDirective","ROUTER_DIRECTIVES","providers","PhotosService","ReligiousViewsService","MutualFriendsService","PoliticalViewsService","ConnectionsCounterService","Http",439,"userslist_component_1","filter_component_1","profile_friend_component_1","connections_service_1","filter_service_1","lodash_1","ConnectionsContainer","service","filterService","_router","loadingInitial","isListEmpty","limit","filter","offset","profileViewActive","selectedUser","currentIndex","onRefreshList","debounce","refreshList","leading","trailing","routerInstance","parent","setLocation","loc","history","pushState","ngAfterViewInit","getList","addObserver","observer","unsubscribe","removeObserver","serviceInstance","assignList","body","scrollTop","documentElement","more","push","bind","handleScrollEvent","unbind","viewFriendProfile","findIndex","updated_at","username","previousProfile","newIndex","nextProfile","scrollOffset","threshold","height","FilterComponent","UsersListComponent","ConnectionsService","FilterService","Router",873],"mappings":"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","file":"4.ba68e7191d26cf06f016.chunk.js","sourcesContent":["webpackJsonp([4,6],{\n\n/***/ 426:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n\t};\r\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\r\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n\t};\r\n\tvar core_1 = __webpack_require__(2);\r\n\tvar router_1 = __webpack_require__(19);\r\n\tvar http_1 = __webpack_require__(58);\r\n\t/** Components */\r\n\tvar profile_avatar_component_1 = __webpack_require__(200);\r\n\tvar profile_about_component_1 = __webpack_require__(199);\r\n\tvar profile_likes_component_1 = __webpack_require__(203);\r\n\tvar profile_friends_component_1 = __webpack_require__(201);\r\n\tvar profile_networks_component_1 = __webpack_require__(204);\r\n\tvar profile_items_component_1 = __webpack_require__(202);\r\n\tvar loading_component_1 = __webpack_require__(24);\r\n\tvar profile_gallery_component_1 = __webpack_require__(427);\r\n\t/** Directives */\r\n\tvar dropdown_directive_1 = __webpack_require__(424);\r\n\tvar remodal_directive_1 = __webpack_require__(197);\r\n\t/** Services */\r\n\tvar mutualfriends_service_1 = __webpack_require__(124);\r\n\tvar photos_service_1 = __webpack_require__(83);\r\n\tvar religiousviews_service_1 = __webpack_require__(60);\r\n\tvar politicalviews_service_1 = __webpack_require__(59);\r\n\tvar connections_counter_service_1 = __webpack_require__(82);\r\n\t/** Utils */\r\n\tvar util_1 = __webpack_require__(10);\r\n\t/** View */\r\n\tvar view = __webpack_require__(428);\r\n\tvar ProfileFriendComponent = (function () {\r\n\t    function ProfileFriendComponent(mutualfriendsService, photosService, religiousviewsService, politicalviewsService, counterService, http) {\r\n\t        this.mutualfriendsService = mutualfriendsService;\r\n\t        this.photosService = photosService;\r\n\t        this.religiousviewsService = religiousviewsService;\r\n\t        this.politicalviewsService = politicalviewsService;\r\n\t        this.counterService = counterService;\r\n\t        this.http = http;\r\n\t        this.closeprofileEvent = new core_1.EventEmitter;\r\n\t        this.nextEvent = new core_1.EventEmitter;\r\n\t        this.previousEvent = new core_1.EventEmitter;\r\n\t        this.friendsTitle = 'Mutual Connections';\r\n\t        this.profileType = 'friend';\r\n\t        this.profileAge = '';\r\n\t        this.profileGender = '';\r\n\t        this.profileLocation = '';\r\n\t        this.profileScore = '';\r\n\t        this.profileName = '';\r\n\t        this.profileJob = '';\r\n\t        this.profileReligiousViews = [];\r\n\t        this.profilePoliticalViews = [];\r\n\t        this.profileActiveAgo = '2h ago';\r\n\t        this.profileDistance = '';\r\n\t        this.profileAbout = '';\r\n\t        this.profileAvatar = '';\r\n\t        this.profilePhotos = [];\r\n\t        this.profilePhotosCount = 0;\r\n\t        this.profileKeywords = [];\r\n\t        this.profileKeywordsCount = 0;\r\n\t        this.profileInterests = [];\r\n\t        this.profileGoals = [];\r\n\t        this.profileOffers = [];\r\n\t        this.profileInterestsCount = 0;\r\n\t        this.profileGoalsCount = 0;\r\n\t        this.profileOffersCount = 0;\r\n\t        this.profileLikes = [];\r\n\t        this.profileLikesCount = 0;\r\n\t        this.profileFriends = {\r\n\t            mutual_bk_friends: [],\r\n\t            mutual_bk_friends_count: 0,\r\n\t            mutual_fb_friends: [],\r\n\t            mutual_fb_friends_count: 0,\r\n\t            mutual_linkedin_connections: [],\r\n\t            mutual_linkedin_connections_count: 0,\r\n\t            mutual_twitter_followers: [],\r\n\t            mutual_twitter_followers_count: 0,\r\n\t            mutual_twitter_friends: [],\r\n\t            mutual_twitter_friends_count: 0\r\n\t        };\r\n\t        this.profileFriendsCount = 0;\r\n\t        this.profileNetworks = {\r\n\t            facebook: '',\r\n\t            twitter: '',\r\n\t            linkedin: ''\r\n\t        };\r\n\t        this.loading = false;\r\n\t        this.loadingLikes = false;\r\n\t        this.loadingConnections = false;\r\n\t        this.loadingPhotos = false;\r\n\t        this.galleryActive = false;\r\n\t        this.galleryOptions = JSON.stringify({\r\n\t            hashTracking: false,\r\n\t            closeOnOutsideClick: true\r\n\t        });\r\n\t    }\r\n\t    ProfileFriendComponent.prototype.ngOnDestroy = function () {\r\n\t        jQuery(document).off('closed', '.remodal');\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.ngOnInit = function () {\r\n\t        var _this = this;\r\n\t        //listen for event when gallery modal is closed\r\n\t        jQuery(document).on('closed', '.remodal', function (e) {\r\n\t            _this.galleryActive = false;\r\n\t        });\r\n\t        setTimeout(function () {\r\n\t            jQuery('#userprofile').focus();\r\n\t            window.scrollTo(0, 0);\r\n\t        });\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.ngOnChanges = function (values) {\r\n\t        if (values.user && values.user.currentValue) {\r\n\t            this.assignUser();\r\n\t        }\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.assignUser = function () {\r\n\t        var _this = this;\r\n\t        this.galleryActive = false;\r\n\t        this.loadingConnections = true;\r\n\t        this.loadingPhotos = true;\r\n\t        this.loadingLikes = true;\r\n\t        // if (this.user.updated_at === 'seen') {\r\n\t        var url = \"/api/v1/new_connections/updated_at/?format=json&friend_id=\" + this.user.id;\r\n\t        this.http.get(url).map(function (res) { return res.json(); }).subscribe(function (data) {\r\n\t            _this.counterService.refreshCounter();\r\n\t        });\r\n\t        // }\r\n\t        this.profileId = this.user.id;\r\n\t        this.profileName = this.user.first_name;\r\n\t        this.profileAge = this.user.age;\r\n\t        this.profileGender = this.user.gender === 'm' ? 'Male' : 'Female';\r\n\t        this.profileDistance = this.user.distance[0] + \" \" + this.user.distance[1];\r\n\t        this.profileLocation = this.user.lives_in ? this.user.lives_in : '';\r\n\t        setTimeout(function () {\r\n\t            _this.profileLikesCount = 0;\r\n\t            _this.profileLikes = [];\r\n\t            var likes = _this.user.likes;\r\n\t            _this.profileLikes = likes;\r\n\t            _this.profileLikesCount = _this.profileLikes.length;\r\n\t            _this.loadingLikes = false;\r\n\t        });\r\n\t        this.profileJob = this.user.position && this.user.position.job !== null && this.user.position.company !== null ? this.user.position.job + \" at \" + this.user.position.company : '';\r\n\t        this.profileAvatar = this.user.image;\r\n\t        this.profileAbout = this.user.about;\r\n\t        this.profileScore = this.user.score;\r\n\t        this.profileNetworks.facebook = \"https://www.facebook.com/app_scoped_user_id/\" + this.user.facebook_id;\r\n\t        this.profileNetworks.linkedin = this.user.linkedin_provider && this.user.linkedin_provider !== null ? this.user.linkedin_provider : '';\r\n\t        this.profileNetworks.twitter = this.user.twitter_provider && this.user.twitter_provider !== null ? \"https://twitter.com/\" + this.user.twitter_username : '';\r\n\t        this.profileOffers = util_1.ObjectUtil.transformSorted(this.user.offers[0]);\r\n\t        this.profileInterests = util_1.ObjectUtil.transformSorted(this.user.interests[0]);\r\n\t        this.profileGoals = util_1.ObjectUtil.transformSorted(this.user.goals[0]);\r\n\t        this.profileInterestsCount = util_1.ObjectUtil.count(this.user.interests[0]);\r\n\t        this.profileOffersCount = util_1.ObjectUtil.count(this.user.offers[0]);\r\n\t        this.profileGoalsCount = util_1.ObjectUtil.count(this.user.goals[0]);\r\n\t        this.profileKeywords = this.user.keywords ? this.user.keywords : [];\r\n\t        this.profileKeywordsCount = this.user.keywords ? this.user.keywords.length : 0;\r\n\t        this.getMutualFriends(this.user.id);\r\n\t        this.getPhotos(this.user.id);\r\n\t        this.getReligiousViews(this.user.id);\r\n\t        this.getPoliticalViews(this.user.id);\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.getMutualFriends = function (id) {\r\n\t        var _this = this;\r\n\t        this.mutualfriendsService.get('', 100, id)\r\n\t            .subscribe(function (data) { return _this.assignMutualFriends(data); });\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.getReligiousViews = function (id) {\r\n\t        var _this = this;\r\n\t        this.religiousviewsService.getByUser('', 100, id)\r\n\t            .subscribe(function (data) { return _this.assignReligiousViews(data); });\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.getPoliticalViews = function (id) {\r\n\t        var _this = this;\r\n\t        this.politicalviewsService.getByUser('', 100, id)\r\n\t            .subscribe(function (data) { return _this.assignPoliticalViews(data); }, function (err) { return console.log('Error fetching political views'); }, function () { });\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.getPhotos = function (id) {\r\n\t        var _this = this;\r\n\t        this.photosService.get('', 6, id)\r\n\t            .subscribe(function (data) { return _this.assignPhotos(data); });\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.assignPhotos = function (data) {\r\n\t        var _this = this;\r\n\t        this.profilePhotosCount = 0;\r\n\t        this.profilePhotos = [];\r\n\t        setTimeout(function () {\r\n\t            if (data.meta.total_count > 0) {\r\n\t                _this.profilePhotos = data.objects.reverse();\r\n\t                _this.profilePhotosCount = _this.profilePhotos.length;\r\n\t            }\r\n\t            _this.loadingPhotos = false;\r\n\t        });\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.assignMutualFriends = function (data) {\r\n\t        var _this = this;\r\n\t        this.profileFriendsCount = 0;\r\n\t        this.profileFriends.mutual_bk_friends = [];\r\n\t        this.profileFriends.mutual_fb_friends = [];\r\n\t        this.profileFriends.mutual_linkedin_connections = [];\r\n\t        this.profileFriends.mutual_twitter_friends = [];\r\n\t        this.profileFriends.mutual_twitter_followers = [];\r\n\t        setTimeout(function () {\r\n\t            if (data.meta.total_count > 0) {\r\n\t                var items = data.objects[0];\r\n\t                _this.profileFriendsCount += parseInt(items.mutual_bk_friends_count, 10);\r\n\t                _this.profileFriendsCount += parseInt(items.mutual_fb_friends_count, 10);\r\n\t                _this.profileFriendsCount += parseInt(items.mutual_linkedin_connections_count, 10);\r\n\t                _this.profileFriendsCount += parseInt(items.mutual_twitter_followers_count, 10);\r\n\t                _this.profileFriendsCount += parseInt(items.mutual_twitter_friends_count, 10);\r\n\t                _this.profileFriends.mutual_bk_friends = items.mutual_bk_friends;\r\n\t                _this.profileFriends.mutual_fb_friends = items.mutual_fb_friends;\r\n\t                _this.profileFriends.mutual_linkedin_connections = items.mutual_linkedin_connections;\r\n\t                _this.profileFriends.mutual_twitter_friends = items.mutual_twitter_friends;\r\n\t                _this.profileFriends.mutual_twitter_followers = items.mutual_twitter_followers;\r\n\t                _this.loadingConnections = false;\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.assignReligiousViews = function (data) {\r\n\t        if (data.meta.total_count > 0) {\r\n\t            var items = data.objects;\r\n\t            this.profileReligiousViews = items;\r\n\t        }\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.assignPoliticalViews = function (data) {\r\n\t        if (data.meta.total_count > 0) {\r\n\t            var items = data.objects;\r\n\t            this.profilePoliticalViews = items;\r\n\t        }\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.closeProfile = function (event) {\r\n\t        this.closeprofileEvent.next(event);\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.openMessages = function (event) {\r\n\t        console.log('open messages');\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.eventHandler = function (key) {\r\n\t        switch (key) {\r\n\t            case 27:\r\n\t                this.closeProfile(true);\r\n\t                break;\r\n\t            case 37:\r\n\t                this.previousEvent.next(true);\r\n\t                break;\r\n\t            case 39:\r\n\t                this.nextEvent.next(true);\r\n\t            default:\r\n\t                break;\r\n\t        }\r\n\t    };\r\n\t    ProfileFriendComponent.prototype.openGallery = function (event) {\r\n\t        var remodal = jQuery('[data-remodal-id=modal-gallery]').remodal();\r\n\t        remodal.open();\r\n\t        this.galleryActive = true;\r\n\t    };\r\n\t    __decorate([\r\n\t        core_1.Input(), \r\n\t        __metadata('design:type', Object)\r\n\t    ], ProfileFriendComponent.prototype, \"user\", void 0);\r\n\t    __decorate([\r\n\t        core_1.Input(), \r\n\t        __metadata('design:type', Object)\r\n\t    ], ProfileFriendComponent.prototype, \"count\", void 0);\r\n\t    __decorate([\r\n\t        core_1.Input(), \r\n\t        __metadata('design:type', Object)\r\n\t    ], ProfileFriendComponent.prototype, \"currentIndex\", void 0);\r\n\t    __decorate([\r\n\t        core_1.Output(), \r\n\t        __metadata('design:type', core_1.EventEmitter)\r\n\t    ], ProfileFriendComponent.prototype, \"closeprofileEvent\", void 0);\r\n\t    __decorate([\r\n\t        core_1.Output(), \r\n\t        __metadata('design:type', core_1.EventEmitter)\r\n\t    ], ProfileFriendComponent.prototype, \"nextEvent\", void 0);\r\n\t    __decorate([\r\n\t        core_1.Output(), \r\n\t        __metadata('design:type', core_1.EventEmitter)\r\n\t    ], ProfileFriendComponent.prototype, \"previousEvent\", void 0);\r\n\t    ProfileFriendComponent = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'profile-friend',\r\n\t            template: view,\r\n\t            directives: [\r\n\t                profile_avatar_component_1.ProfileAvatarComponent,\r\n\t                profile_about_component_1.ProfileAboutComponent,\r\n\t                profile_likes_component_1.ProfileLikesComponent,\r\n\t                profile_friends_component_1.ProfileFriendsComponent,\r\n\t                profile_networks_component_1.ProfileNetworksComponent,\r\n\t                profile_items_component_1.ProfileItemsComponent,\r\n\t                dropdown_directive_1.DropdownDirective,\r\n\t                loading_component_1.LoadingComponent,\r\n\t                profile_gallery_component_1.ProfileGalleryComponent,\r\n\t                remodal_directive_1.RemodalDirective,\r\n\t                router_1.ROUTER_DIRECTIVES\r\n\t            ],\r\n\t            providers: [\r\n\t                photos_service_1.PhotosService,\r\n\t                religiousviews_service_1.ReligiousViewsService\r\n\t            ]\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [mutualfriends_service_1.MutualFriendsService, photos_service_1.PhotosService, religiousviews_service_1.ReligiousViewsService, politicalviews_service_1.PoliticalViewsService, connections_counter_service_1.ConnectionsCounterService, http_1.Http])\r\n\t    ], ProfileFriendComponent);\r\n\t    return ProfileFriendComponent;\r\n\t}());\r\n\texports.ProfileFriendComponent = ProfileFriendComponent;\r\n\n\n/***/ },\n\n/***/ 439:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n\t};\r\n\tvar __metadata = (this && this.__metadata) || function (k, v) {\r\n\t    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n\t};\r\n\tvar core_1 = __webpack_require__(2);\r\n\tvar router_1 = __webpack_require__(19);\r\n\tvar userslist_component_1 = __webpack_require__(438);\r\n\tvar loading_component_1 = __webpack_require__(24);\r\n\tvar filter_component_1 = __webpack_require__(429);\r\n\tvar profile_friend_component_1 = __webpack_require__(426);\r\n\tvar connections_service_1 = __webpack_require__(127);\r\n\tvar filter_service_1 = __webpack_require__(43);\r\n\tvar lodash_1 = __webpack_require__(21);\r\n\tvar view = __webpack_require__(873);\r\n\tvar ConnectionsContainer = (function () {\r\n\t    function ConnectionsContainer(service, filterService, _router) {\r\n\t        var _this = this;\r\n\t        this.service = service;\r\n\t        this.filterService = filterService;\r\n\t        this._router = _router;\r\n\t        this.items = [];\r\n\t        this.loading = false;\r\n\t        this.loadingInitial = false;\r\n\t        this.isListEmpty = false;\r\n\t        this.limit = 12;\r\n\t        this.filter = true;\r\n\t        this.next = '';\r\n\t        this.total_count = 0;\r\n\t        this.offset = 0;\r\n\t        this.profileViewActive = false;\r\n\t        this.selectedUser = null;\r\n\t        this.currentIndex = 0;\r\n\t        this.onRefreshList = lodash_1.debounce(this.refreshList, 300, { 'leading': false, 'trailing': true });\r\n\t        this.routerInstance = this._router.parent.subscribe(function (next) {\r\n\t            _this.closeProfile(true);\r\n\t        });\r\n\t    }\r\n\t    ConnectionsContainer.prototype.setLocation = function (loc) {\r\n\t        window.history.pushState('', '', '/' + loc);\r\n\t    };\r\n\t    ConnectionsContainer.prototype.ngAfterViewInit = function () {\r\n\t        setTimeout(function () {\r\n\t            window.scrollTo(0, 0);\r\n\t        });\r\n\t    };\r\n\t    ConnectionsContainer.prototype.ngOnInit = function () {\r\n\t        var _this = this;\r\n\t        this.total_count = 0;\r\n\t        this.getList();\r\n\t        //create new observer and subscribe\r\n\t        this.filterService.addObserver('connections');\r\n\t        this.filterService.observer('connections')\r\n\t            .subscribe(function (data) { return _this.onRefreshList(); }, function (err) { return console.log(err); });\r\n\t    };\r\n\t    ConnectionsContainer.prototype.ngOnDestroy = function () {\r\n\t        this.filterService.observer('connections').unsubscribe();\r\n\t        this.filterService.removeObserver('connections');\r\n\t        if (this.serviceInstance) {\r\n\t            this.serviceInstance.unsubscribe();\r\n\t        }\r\n\t        this.routerInstance.unsubscribe();\r\n\t    };\r\n\t    ConnectionsContainer.prototype.getList = function () {\r\n\t        var _this = this;\r\n\t        if (this.loading) {\r\n\t            return;\r\n\t        }\r\n\t        this.isListEmpty = false;\r\n\t        if (this.next === null)\r\n\t            return;\r\n\t        this.loading = true;\r\n\t        if (this.next === '') {\r\n\t            this.loadingInitial = true;\r\n\t        }\r\n\t        this.serviceInstance = this.service.get(this.next, this.limit, this.filter)\r\n\t            .subscribe(function (data) {\r\n\t            _this.serviceInstance.unsubscribe();\r\n\t            _this.assignList(data);\r\n\t        }, function (err) {\r\n\t            console.log(err);\r\n\t            _this.loading = false;\r\n\t            _this.loadingInitial = false;\r\n\t            _this.serviceInstance.unsubscribe();\r\n\t        }, function () {\r\n\t        });\r\n\t    };\r\n\t    ConnectionsContainer.prototype.refreshList = function () {\r\n\t        if (this.serviceInstance) {\r\n\t            this.serviceInstance.unsubscribe();\r\n\t        }\r\n\t        document.body.scrollTop = document.documentElement.scrollTop = 0;\r\n\t        this.items = [];\r\n\t        this.total_count = 0;\r\n\t        this.currentIndex = 0;\r\n\t        this.isListEmpty = false;\r\n\t        this.next = '';\r\n\t        this.getList();\r\n\t    };\r\n\t    ConnectionsContainer.prototype.assignList = function (data) {\r\n\t        this.loading = false;\r\n\t        this.loadingInitial = false;\r\n\t        if (data.meta.total_count === 0) {\r\n\t            this.isListEmpty = true;\r\n\t            return;\r\n\t        }\r\n\t        else {\r\n\t            this.isListEmpty = false;\r\n\t        }\r\n\t        if (this.items.length > 0) {\r\n\t            var more = data.objects;\r\n\t            for (var i = 0; i <= more.length - 1; i++) {\r\n\t                this.items.push(more[i]);\r\n\t            }\r\n\t            this.total_count += more.length;\r\n\t        }\r\n\t        else {\r\n\t            this.items = data.objects;\r\n\t            this.total_count = data.objects.length;\r\n\t        }\r\n\t        this.next = data.meta.next;\r\n\t        this.offset = data.meta.offset;\r\n\t        //bind to scroll event to load more data on bottom scroll\r\n\t        if (this.next !== null) {\r\n\t            jQuery(window).bind('scroll', this.handleScrollEvent.bind(this));\r\n\t        }\r\n\t        else {\r\n\t            jQuery(window).unbind('scroll');\r\n\t        }\r\n\t    };\r\n\t    ConnectionsContainer.prototype.viewFriendProfile = function (id) {\r\n\t        for (var i = this.items.length - 1; i >= 0; i--) {\r\n\t            if (this.items[i].id === id) {\r\n\t                this.selectedUser = this.items[i];\r\n\t                this.currentIndex = lodash_1.findIndex(this.items, { id: this.selectedUser.id });\r\n\t                this.profileViewActive = true;\r\n\t                if (this.items[i].updated_at === null) {\r\n\t                    this.items[i].updated_at = 'seen';\r\n\t                }\r\n\t                document.body.scrollTop = document.documentElement.scrollTop = 0;\r\n\t                this.setLocation(this.selectedUser.username);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    ConnectionsContainer.prototype.closeProfile = function (event) {\r\n\t        this.profileViewActive = false;\r\n\t        this.selectedUser = null;\r\n\t        this.setLocation('connections');\r\n\t    };\r\n\t    ConnectionsContainer.prototype.previousProfile = function (event) {\r\n\t        var currentIndex = lodash_1.findIndex(this.items, { id: this.selectedUser.id });\r\n\t        var newIndex = currentIndex - 1;\r\n\t        if (newIndex < 0) {\r\n\t            return;\r\n\t        }\r\n\t        if (this.items.length > 0) {\r\n\t            this.selectedUser = this.items[newIndex];\r\n\t            this.setLocation(this.selectedUser.username);\r\n\t        }\r\n\t        else {\r\n\t            this.closeProfile(true);\r\n\t            this.isListEmpty = true;\r\n\t        }\r\n\t        this.currentIndex = newIndex;\r\n\t    };\r\n\t    ConnectionsContainer.prototype.nextProfile = function (event) {\r\n\t        var currentIndex = lodash_1.findIndex(this.items, { id: this.selectedUser.id });\r\n\t        var newIndex = currentIndex + 1;\r\n\t        if (!this.loading && newIndex > this.items.length - 13 && this.next) {\r\n\t            this.getList();\r\n\t        }\r\n\t        if (newIndex > this.items.length - 1) {\r\n\t            return;\r\n\t        }\r\n\t        if (this.items.length > 0) {\r\n\t            this.selectedUser = this.items[newIndex];\r\n\t            this.setLocation(this.selectedUser.username);\r\n\t        }\r\n\t        else {\r\n\t            this.closeProfile(true);\r\n\t            this.isListEmpty = true;\r\n\t        }\r\n\t        this.currentIndex = newIndex;\r\n\t    };\r\n\t    ConnectionsContainer.prototype.handleScrollEvent = function (event) {\r\n\t        var scrollOffset = jQuery(window).scrollTop();\r\n\t        var threshold = jQuery(document).height() - jQuery(window).height() - 60;\r\n\t        if (this.next && scrollOffset > threshold) {\r\n\t            if (!this.loading) {\r\n\t                this.getList();\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    ConnectionsContainer = __decorate([\r\n\t        core_1.Component({\r\n\t            selector: 'connections-page',\r\n\t            template: view,\r\n\t            directives: [\r\n\t                filter_component_1.FilterComponent,\r\n\t                userslist_component_1.UsersListComponent,\r\n\t                loading_component_1.LoadingComponent,\r\n\t                profile_friend_component_1.ProfileFriendComponent\r\n\t            ]\r\n\t        }), \r\n\t        __metadata('design:paramtypes', [connections_service_1.ConnectionsService, filter_service_1.FilterService, router_1.Router])\r\n\t    ], ConnectionsContainer);\r\n\t    return ConnectionsContainer;\r\n\t}());\r\n\texports.ConnectionsContainer = ConnectionsContainer;\r\n\n\n/***/ },\n\n/***/ 873:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"layout layout--flush content\\\" [ngClass]=\\\"{'is-hidden': profileViewActive}\\\">\\n  <div class=\\\"layout__item 3/4 extralarge-and-up-4/5\\\">\\n    <h3 *ngIf=\\\"!loading && emptyList\\\">No results...</h3>\\n    <users-list [showButtons]=\\\"0\\\" [users]=\\\"items\\\" (onClicked)=\\\"viewFriendProfile($event)\\\"></users-list>\\n    <loading [status]=\\\"loading\\\"></loading>\\n    <div class=\\\"no-results\\\" *ngIf=\\\"isListEmpty\\\" [ngClass]=\\\"{'is-visible': isListEmpty}\\\">\\n      <h2 class=\\\"no-results__title\\\">Whoops!</h2>\\n      <p class=\\\"no-results__par\\\">No results found.\\n        <br>Please broaden your search criteria</p>\\n      <img src=\\\"/static/assets/images/polar-bear.png\\\" alt=\\\"Polar Bear\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"layout__item 1/4 extralarge-and-up-1/5 filter-place\\\">\\n    <filters [type]=\\\"'connections'\\\"></filters>\\n  </div>\\n</div>\\n<profile-friend [currentIndex]=\\\"currentIndex\\\" [count]=\\\"total_count\\\" (previousEvent)=\\\"previousProfile($event)\\\" (nextEvent)=\\\"nextProfile($event)\\\" *ngIf=\\\"profileViewActive\\\" [user]=\\\"selectedUser\\\" (closeprofileEvent)=\\\"closeProfile($event)\\\">\\n</profile-friend>\\n\"\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 4.ba68e7191d26cf06f016.chunk.js\n **/","import {Component, Input, Output, EventEmitter, ChangeDetectionStrategy} from 'angular2/core';\nimport {ROUTER_DIRECTIVES} from 'angular2/router';\nimport {Http} from 'angular2/http';\n\n/** Components */\nimport {ProfileAvatarComponent} from '../profile_avatar/profile_avatar.component';\nimport {ProfileAboutComponent} from '../profile_about/profile_about.component';\nimport {ProfileLikesComponent} from '../profile_likes/profile_likes.component';\nimport {ProfileFriendsComponent} from '../profile_friends/profile_friends.component';\nimport {ProfileNetworksComponent} from '../profile_networks/profile_networks.component';\nimport {ProfileItemsComponent} from '../profile_items/profile_items.component';\nimport {LoadingComponent} from '../loading/loading.component';\nimport {ProfileGalleryComponent} from '../profile_gallery/profile_gallery.component';\n\n/** Directives */\nimport {DropdownDirective} from '../../directives/dropdown.directive';\nimport {RemodalDirective} from '../../directives/remodal.directive';\n\n/** Services */\nimport {MutualFriendsService} from '../../services/mutualfriends.service';\nimport {PhotosService} from '../../services/photos.service';\nimport {ReligiousViewsService} from '../../services/religiousviews.service';\nimport {PoliticalViewsService} from '../../services/politicalviews.service';\nimport {ConnectionsCounterService} from '../../services/connections_counter.service';\n/** Utils */\nimport {ObjectUtil} from '../../core/util';\n\n/** View */\nlet view = require('./profile.html');\n\n@Component({\n  selector: 'profile-friend',\n  template: view,\n  directives: [\n    ProfileAvatarComponent,\n    ProfileAboutComponent,\n    ProfileLikesComponent,\n    ProfileFriendsComponent,\n    ProfileNetworksComponent,\n    ProfileItemsComponent,\n    DropdownDirective,\n    LoadingComponent,\n    ProfileGalleryComponent,\n    RemodalDirective,\n    ROUTER_DIRECTIVES\n  ],\n  providers: [\n    PhotosService,\n    ReligiousViewsService\n  ]\n})\nexport class ProfileFriendComponent {\n  @Input() user;\n  @Input() count;\n  @Input() currentIndex;\n  @Output() closeprofileEvent: EventEmitter<any> = new EventEmitter;\n  @Output() nextEvent: EventEmitter<any> = new EventEmitter;\n  @Output() previousEvent: EventEmitter<any> = new EventEmitter;\n  friendsTitle: string = 'Mutual Connections';\n\n  profileId;\n  profileType: string = 'friend';\n  profileAge = '';\n  profileGender = '';\n  profileLocation = '';\n  profileScore = '';\n  profileName = '';\n  profileJob = '';\n  profileReligiousViews = [];\n  profilePoliticalViews = [];\n  profileActiveAgo = '2h ago';\n  profileDistance = '';\n  profileAbout: string = '';\n  profileAvatar: string = '';\n  profilePhotos: any[] = [];\n  profilePhotosCount: number = 0;\n  profileKeywords: any[] = [];\n  profileKeywordsCount: number = 0;\n  profileInterests: any[] = [];\n  profileGoals: any[] = [];\n  profileOffers: any[] = [];\n  profileInterestsCount: number = 0;\n  profileGoalsCount: number = 0;\n  profileOffersCount: number = 0;\n  profileLikes: any[] = [];\n  profileLikesCount: number = 0;\n  profileFriends = {\n    mutual_bk_friends: [],\n    mutual_bk_friends_count: 0,\n    mutual_fb_friends: [],\n    mutual_fb_friends_count: 0,\n    mutual_linkedin_connections: [],\n    mutual_linkedin_connections_count: 0,\n    mutual_twitter_followers: [],\n    mutual_twitter_followers_count: 0,\n    mutual_twitter_friends: [],\n    mutual_twitter_friends_count: 0\n  };\n  profileFriendsCount: number = 0;\n  profileNetworks = {\n    facebook: '',\n    twitter: '',\n    linkedin: ''\n  };\n  loading: boolean = false;\n  loadingLikes: boolean = false;\n  loadingConnections: boolean = false;\n  loadingPhotos: boolean = false;\n  galleryActive = false;\n  galleryOptions = JSON.stringify({\n    hashTracking: false,\n    closeOnOutsideClick: true\n  });\n\n  constructor(\n    private mutualfriendsService: MutualFriendsService,\n    private photosService: PhotosService,\n    private religiousviewsService: ReligiousViewsService,\n    private politicalviewsService: PoliticalViewsService,\n    private counterService: ConnectionsCounterService,\n    private http: Http\n  ) {\n\n  }\n\n  ngOnDestroy() {\n    jQuery(document).off('closed', '.remodal');\n  }\n\n  ngOnInit() {\n\n    //listen for event when gallery modal is closed\n    jQuery(document).on('closed', '.remodal', (e) => {\n      this.galleryActive = false;\n    });\n\n\n\n    setTimeout(() => {\n      jQuery('#userprofile').focus();\n      window.scrollTo(0, 0);\n    });\n  }\n\n  ngOnChanges(values) {\n    if (values.user && values.user.currentValue) {\n      this.assignUser();\n    }\n  }\n\n  assignUser() {\n    this.galleryActive = false;\n    this.loadingConnections = true;\n    this.loadingPhotos = true;\n    this.loadingLikes = true;\n\n    // if (this.user.updated_at === 'seen') {\n    let url = `/api/v1/new_connections/updated_at/?format=json&friend_id=${this.user.id}`;\n    this.http.get(url).map(res => res.json()).subscribe(data => {\n      this.counterService.refreshCounter();\n    });\n    // }\n\n\n    this.profileId = this.user.id;\n    this.profileName = this.user.first_name;\n    this.profileAge = this.user.age;\n    this.profileGender = this.user.gender === 'm' ? 'Male' : 'Female';\n    this.profileDistance = `${this.user.distance[0]} ${this.user.distance[1]}`;\n    this.profileLocation = this.user.lives_in ? this.user.lives_in : '';\n\n\n    setTimeout(() => {\n      this.profileLikesCount = 0;\n      this.profileLikes = [];\n      let likes = this.user.likes;\n      this.profileLikes = likes;\n      this.profileLikesCount = this.profileLikes.length;\n      this.loadingLikes = false;\n\n    });\n\n    this.profileJob = this.user.position && this.user.position.job !== null && this.user.position.company !== null ? `${this.user.position.job} at ${this.user.position.company}` : '';\n\n    this.profileAvatar = this.user.image;\n    this.profileAbout = this.user.about;\n    this.profileScore = this.user.score;\n\n    this.profileNetworks.facebook = `https://www.facebook.com/app_scoped_user_id/${this.user.facebook_id}`;\n    this.profileNetworks.linkedin = this.user.linkedin_provider && this.user.linkedin_provider !== null ? this.user.linkedin_provider : '';\n    this.profileNetworks.twitter = this.user.twitter_provider && this.user.twitter_provider !== null ? `https://twitter.com/${this.user.twitter_username}` : '';\n\n    this.profileOffers = ObjectUtil.transformSorted(this.user.offers[0]);\n    this.profileInterests = ObjectUtil.transformSorted(this.user.interests[0]);\n    this.profileGoals = ObjectUtil.transformSorted(this.user.goals[0]);\n    this.profileInterestsCount = ObjectUtil.count(this.user.interests[0]);\n    this.profileOffersCount = ObjectUtil.count(this.user.offers[0]);\n    this.profileGoalsCount = ObjectUtil.count(this.user.goals[0]);\n\n    this.profileKeywords = this.user.keywords ? this.user.keywords : [];\n    this.profileKeywordsCount = this.user.keywords ? this.user.keywords.length : 0;\n\n    this.getMutualFriends(this.user.id);\n    this.getPhotos(this.user.id);\n    this.getReligiousViews(this.user.id);\n    this.getPoliticalViews(this.user.id);\n  }\n\n  getMutualFriends(id) {\n    this.mutualfriendsService.get('', 100, id)\n      .subscribe(data => this.assignMutualFriends(data));\n  }\n\n  getReligiousViews(id) {\n    this.religiousviewsService.getByUser('', 100, id)\n      .subscribe(data => this.assignReligiousViews(data));\n  }\n\n  getPoliticalViews(id) {\n    this.politicalviewsService.getByUser('', 100, id)\n      .subscribe(\n      data => this.assignPoliticalViews(data),\n      (err) => console.log('Error fetching political views'),\n      () => { }\n      );\n  }\n\n  getPhotos(id) {\n    this.photosService.get('', 6, id)\n      .subscribe(data => this.assignPhotos(data));\n  }\n\n  assignPhotos(data) {\n    this.profilePhotosCount = 0;\n    this.profilePhotos = [];\n    setTimeout(() => {\n      if (data.meta.total_count > 0) {\n        this.profilePhotos = data.objects.reverse();\n        this.profilePhotosCount = this.profilePhotos.length;\n      }\n      this.loadingPhotos = false;\n    });\n\n  }\n\n  assignMutualFriends(data) {\n    this.profileFriendsCount = 0;\n    this.profileFriends.mutual_bk_friends = [];\n    this.profileFriends.mutual_fb_friends = [];\n    this.profileFriends.mutual_linkedin_connections = [];\n    this.profileFriends.mutual_twitter_friends = [];\n    this.profileFriends.mutual_twitter_followers = [];\n    setTimeout(() => {\n      if (data.meta.total_count > 0) {\n        let items = data.objects[0];\n        this.profileFriendsCount += parseInt(items.mutual_bk_friends_count, 10);\n        this.profileFriendsCount += parseInt(items.mutual_fb_friends_count, 10);\n        this.profileFriendsCount += parseInt(items.mutual_linkedin_connections_count, 10);\n        this.profileFriendsCount += parseInt(items.mutual_twitter_followers_count, 10);\n        this.profileFriendsCount += parseInt(items.mutual_twitter_friends_count, 10);\n\n        this.profileFriends.mutual_bk_friends = items.mutual_bk_friends;\n        this.profileFriends.mutual_fb_friends = items.mutual_fb_friends;\n        this.profileFriends.mutual_linkedin_connections = items.mutual_linkedin_connections;\n        this.profileFriends.mutual_twitter_friends = items.mutual_twitter_friends;\n        this.profileFriends.mutual_twitter_followers = items.mutual_twitter_followers;\n        this.loadingConnections = false;\n      }\n    });\n  }\n\n  assignReligiousViews(data) {\n    if (data.meta.total_count > 0) {\n      let items = data.objects;\n      this.profileReligiousViews = items;\n    }\n  }\n\n  assignPoliticalViews(data) {\n    if (data.meta.total_count > 0) {\n      let items = data.objects;\n      this.profilePoliticalViews = items;\n    }\n  }\n\n\n  closeProfile(event) {\n    this.closeprofileEvent.next(event);\n  }\n\n  openMessages(event) {\n    console.log('open messages');\n  }\n\n  eventHandler(key) {\n    switch (key) {\n      case 27: //escape\n        this.closeProfile(true);\n        break;\n      case 37: //left\n        this.previousEvent.next(true);\n        break;\n      case 39: //right\n        this.nextEvent.next(true);\n      default:\n        break;\n    }\n  }\n\n  openGallery(event) {\n    let remodal = jQuery('[data-remodal-id=modal-gallery]').remodal();\n    remodal.open();\n    this.galleryActive = true;\n  }\n\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/app/components/profile/profile_friend.component.ts\n **/","import {Component} from 'angular2/core';\nimport {Router} from 'angular2/router';\n\nimport {UsersListComponent} from '../../components/userslist/userslist.component';\nimport {LoadingComponent} from '../../components/loading/loading.component';\nimport {FilterComponent} from '../../components/filter/filter.component';\nimport {ProfileFriendComponent} from '../../components/profile/profile_friend.component';\n\nimport {ConnectionsService} from '../../services/connections.service';\nimport {FilterService} from '../../services/filter.service';\n\n\nimport {findIndex, debounce} from 'lodash';\n\nlet view = require('./connections.html');\n\ndeclare var jQuery: any;\n\n@Component({\n  selector: 'connections-page',\n  template: view,\n  directives: [\n    FilterComponent,\n    UsersListComponent,\n    LoadingComponent,\n    ProfileFriendComponent\n  ]\n})\nexport class ConnectionsContainer {\n  items: Array<any> = [];\n  loading: boolean = false;\n  loadingInitial: boolean = false;\n  isListEmpty: boolean = false;\n  limit: number = 12;\n  filter: boolean = true;\n  next: string = '';\n  total_count: number = 0;\n  offset: number = 0;\n  profileViewActive = false;\n  selectedUser = null;\n  currentIndex = 0;\n  serviceInstance;\n  routerInstance;\n  onRefreshList: Function;\n\n  constructor(\n    private service: ConnectionsService,\n    private filterService: FilterService,\n    private _router: Router\n    ) {\n    this.onRefreshList = debounce(this.refreshList, 300, { 'leading': false, 'trailing': true });\n    this.routerInstance = this._router.parent.subscribe(next => {\n      this.closeProfile(true);\n    });\n  }\n\n  setLocation(loc) {\n    window.history.pushState('', '', '/' + loc);\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => {\n      window.scrollTo(0, 0);\n    });\n  }\n\n  ngOnInit() {\n    this.total_count = 0;\n    this.getList();\n\n    //create new observer and subscribe\n    this.filterService.addObserver('connections');\n    this.filterService.observer('connections')\n      .subscribe(\n      (data) => this.onRefreshList(),\n      (err) => console.log(err)\n      );\n  }\n\n\n  ngOnDestroy() {\n    this.filterService.observer('connections').unsubscribe();\n    this.filterService.removeObserver('connections');\n    if (this.serviceInstance) {\n      this.serviceInstance.unsubscribe();\n    }\n    this.routerInstance.unsubscribe();\n  }\n\n  getList() {\n    if (this.loading) {\n      return;\n    }\n\n    this.isListEmpty = false;\n    if (this.next === null) return;\n    this.loading = true;\n    if (this.next === '') {\n      this.loadingInitial = true;\n    }\n    this.serviceInstance = this.service.get(this.next, this.limit, this.filter)\n      .subscribe(\n      data => {\n        this.serviceInstance.unsubscribe();\n        this.assignList(data);\n      },\n      (err) => {\n        console.log(err);\n        this.loading = false;\n        this.loadingInitial = false;\n        this.serviceInstance.unsubscribe();\n      },\n      () => {\n\n      });\n  }\n\n\n  refreshList() {\n    if (this.serviceInstance) {\n      this.serviceInstance.unsubscribe();\n    }\n    document.body.scrollTop = document.documentElement.scrollTop = 0;\n    this.items = [];\n    this.total_count = 0;\n    this.currentIndex = 0;\n    this.isListEmpty = false;\n    this.next = '';\n    this.getList();\n  }\n\n  assignList(data) {\n\n    this.loading = false;\n    this.loadingInitial = false;\n\n\n    if (data.meta.total_count === 0) {\n      this.isListEmpty = true;\n      return;\n    } else {\n      this.isListEmpty = false;\n    }\n\n\n    if (this.items.length > 0) {\n      let more = data.objects;\n      for (var i = 0; i <= more.length - 1; i++) {\n        this.items.push(more[i]);\n      }\n      this.total_count += more.length;\n    } else {\n      this.items = data.objects;\n      this.total_count = data.objects.length;\n    }\n\n    this.next = data.meta.next;\n    this.offset = data.meta.offset;\n\n\n    //bind to scroll event to load more data on bottom scroll\n    if (this.next !== null) {\n      jQuery(window).bind('scroll', this.handleScrollEvent.bind(this));\n    } else {\n      jQuery(window).unbind('scroll');\n    }\n\n\n  }\n\n  viewFriendProfile(id) {\n\n    for (var i = this.items.length - 1; i >= 0; i--) {\n      if (this.items[i].id === id) {\n        this.selectedUser = this.items[i];\n        this.currentIndex = findIndex(this.items, { id: this.selectedUser.id });\n        this.profileViewActive = true;\n        if (this.items[i].updated_at === null) {\n          this.items[i].updated_at = 'seen';\n        }\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n        this.setLocation(this.selectedUser.username);\n      }\n    }\n  }\n\n  closeProfile(event) {\n    this.profileViewActive = false;\n    this.selectedUser = null;\n    this.setLocation('connections');\n  }\n\n  previousProfile(event) {\n    let currentIndex = findIndex(this.items, { id: this.selectedUser.id });\n    let newIndex = currentIndex - 1;\n\n    if (newIndex < 0) {\n      return;\n    }\n    if (this.items.length > 0) {\n      this.selectedUser = this.items[newIndex];\n      this.setLocation(this.selectedUser.username);\n    }\n    else {\n      this.closeProfile(true);\n      this.isListEmpty = true;\n    }\n    this.currentIndex = newIndex;\n  }\n\n  nextProfile(event) {\n    let currentIndex = findIndex(this.items, { id: this.selectedUser.id });\n    let newIndex = currentIndex + 1;\n\n    if (!this.loading && newIndex > this.items.length - 13 && this.next) {\n      this.getList();\n    }\n\n    if (newIndex > this.items.length - 1) {\n      return;\n    }\n    if (this.items.length > 0) {\n      this.selectedUser = this.items[newIndex];\n      this.setLocation(this.selectedUser.username);\n    }\n    else {\n      this.closeProfile(true);\n      this.isListEmpty = true;\n    }\n    this.currentIndex = newIndex;\n  }\n\n\n  handleScrollEvent(event) {\n    let scrollOffset = jQuery(window).scrollTop();\n    let threshold = jQuery(document).height() - jQuery(window).height() - 60;\n\n    if (this.next && scrollOffset > threshold) {\n      if (!this.loading) {\n        this.getList();\n      }\n    }\n\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/tslint-loader!./src/app/containers/connections/connections.container.ts\n **/","module.exports = \"<div class=\\\"layout layout--flush content\\\" [ngClass]=\\\"{'is-hidden': profileViewActive}\\\">\\n  <div class=\\\"layout__item 3/4 extralarge-and-up-4/5\\\">\\n    <h3 *ngIf=\\\"!loading && emptyList\\\">No results...</h3>\\n    <users-list [showButtons]=\\\"0\\\" [users]=\\\"items\\\" (onClicked)=\\\"viewFriendProfile($event)\\\"></users-list>\\n    <loading [status]=\\\"loading\\\"></loading>\\n    <div class=\\\"no-results\\\" *ngIf=\\\"isListEmpty\\\" [ngClass]=\\\"{'is-visible': isListEmpty}\\\">\\n      <h2 class=\\\"no-results__title\\\">Whoops!</h2>\\n      <p class=\\\"no-results__par\\\">No results found.\\n        <br>Please broaden your search criteria</p>\\n      <img src=\\\"/static/assets/images/polar-bear.png\\\" alt=\\\"Polar Bear\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"layout__item 1/4 extralarge-and-up-1/5 filter-place\\\">\\n    <filters [type]=\\\"'connections'\\\"></filters>\\n  </div>\\n</div>\\n<profile-friend [currentIndex]=\\\"currentIndex\\\" [count]=\\\"total_count\\\" (previousEvent)=\\\"previousProfile($event)\\\" (nextEvent)=\\\"nextProfile($event)\\\" *ngIf=\\\"profileViewActive\\\" [user]=\\\"selectedUser\\\" (closeprofileEvent)=\\\"closeProfile($event)\\\">\\n</profile-friend>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/containers/connections/connections.html\n ** module id = 873\n ** module chunks = 4\n **/"],"sourceRoot":""}