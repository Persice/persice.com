"use strict";angular.module("icebrak",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","angular-spinkit","frontend.semantic.dimmer","frontend.semantic.modal.event.create","frontend.semantic.modal.event.view","truncate","ngDraggable","angucomplete-alt","cgNotify","ngImgCrop","angularMoment","btford.socket-io","ngLodash","hj.gsapifyRouter","angular-flexslider","ngGeolocation","ezfb","frontend.ui.tooltips","google.places","ngMask","rzModule"]).config(["$compileProvider","$stateProvider","$urlRouterProvider","APP_ID","$httpProvider","$resourceProvider","gsapifyRouterProvider","ezfbProvider",function(e,t,i,s,n,o,a,r){r.setInitParams({appId:s,version:"v2.3",status:!0,xfbml:!0}),n.defaults.headers.patch={"Content-Type":"application/json;charset=utf-8"},o.defaults.stripTrailingSlashes=!1,n.defaults.xsrfCookieName="csrftoken",n.defaults.xsrfHeaderName="X-CSRFToken",n.defaults.headers.post={"Content-Type":"application/json;charset=utf-8"},a.defaults={enter:"fadeIn",leave:"fadeOut"},a.transition("slideAbove",{duration:1,ease:"Quart.easeInOut",css:{y:"-100%"}}),a.transition("slideBelow",{duration:1,ease:"Quart.easeInOut",css:{y:"100%"}}),a.transition("slideLeft",{duration:1,ease:"Quint.easeInOut",css:{x:"-100%"}}),a.transition("slideRight",{duration:1,ease:"Quint.easeInOut",delay:.5,css:{x:"100%"}}),a.transition("fadeIn",{duration:.5,delay:.2,css:{opacity:0}}),a.transition("fadeOut",{duration:.2,css:{opacity:0}}),a.transition("scaleDown",{duration:.5,css:{scale:0,opacity:0}}),a.initialTransitionEnabled=!0,t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl",data:{displayName:"icebr&#257;k"},resolve:{}}).state("settings",{url:"/settings",templateUrl:"app/settings/settings.html",controller:"SettingsController",controllerAs:"settings",data:{displayName:"Settings"},resolve:{}}).state("conversations",{url:"/conversation/:userId",data:{displayName:"Conversations"},resolve:{userId:["$stateParams",function(e){return e.userId}],UsersFactory:"UsersFactory",FRIEND:["UsersFactory","$stateParams",function(e,t){var i=t.userId;return e.get({userId:i,format:"json"}).$promise}],ConnectionsFactory:"ConnectionsFactory",Connection:["ConnectionsFactory","$stateParams",function(e,t){var i=t.userId;return e.query({friend:i,format:"json"}).$promise}]},templateUrl:"app/conversations/conversations.html",controller:"ConversationsCtrl"}).state("goalcreate",{url:"/create-goal",data:{displayName:"Create a goal"},templateUrl:"app/goalcreate/goalcreate.html",controller:"GoalCreateCtrl"}).state("finalstep",{url:"/final-step",data:{displayName:"Final Step"},resolve:{UsersFactory:"UsersFactory",User:["UsersFactory","USER_ID",function(e,t){var i=t;return e.get({userId:i,format:"json"}).$promise}]},templateUrl:"app/finalstep/finalstep.html",controller:"FinalStepController",controllerAs:"finalstep"}).state("selectinterests",{url:"/select-interests",data:{displayName:"What interests you?"},templateUrl:"app/interests/interests.html",controller:"InterestsController",controllerAs:"interest"}).state("offercreate",{url:"/create-offer",data:{displayName:"Post an offer"},templateUrl:"app/offercreate/offercreate.html",controller:"OfferCreateCtrl"}).state("matchfeed",{url:"/match-feed",data:{displayName:"Match Feed"},templateUrl:"app/matchfeed/matchfeed.html",controller:"MatchFeedController",controllerAs:"matchfeed"}).state("bigmatchfeed",{url:"/big-match-feed",data:{displayName:"Match Feed"},templateUrl:"app/bigmatchfeed/bigmatchfeed.html",controller:"BigMatchFeedCtrl"}).state("myconnections",{url:"/my-connections",data:{displayName:"Connections"},templateUrl:"app/myconnections/myconnections.html",controller:"MyConnectionsController",controllerAs:"myconnections"}).state("friendprofile",{url:"/friend-profile/:userId",data:{displayName:"Connection"},resolve:{userId:["$stateParams",function(e){return e.userId}],ConnectionsFactory:"ConnectionsFactory",UsersFactory:"UsersFactory",UserProfile:["UsersFactory","$stateParams",function(e,t){return e.query({userId:t.userId,format:"json"}).$promise}],Connection:["ConnectionsFactory","$stateParams",function(e,t){var i=t.userId;return e.query({friend:i,format:"json"}).$promise}]},templateUrl:"app/friendprofile/friendprofile.html",controller:"FriendProfileController",controllerAs:"friendprofile"}).state("myprofile",{url:"/my-profile",data:{displayName:"Profile"},templateUrl:"app/myprofile/myprofile.html",controller:"MyProfileController",controllerAs:"myprofile"}).state("editmyprofile",{url:"/my-profile/edit",data:{displayName:"Edit profile"},templateUrl:"app/editmyprofile/editmyprofile.html",controller:"EditMyProfileCtrl"}).state("inbox",{url:"/messages",data:{displayName:"Messages"},templateUrl:"app/inbox/inbox.html",controller:"InboxController",controllerAs:"inbox"}).state("events",{"abstract":!0,url:"/events",templateUrl:"app/events/events_page.html",controller:"EventsPageController",controllerAs:"eventspage",resolve:{},data:{displayName:""}}).state("events.mynetwork",{url:"/my-network",templateUrl:"app/events/events_mynetwork.html",data:{}}).state("events.myevents",{url:"/my-events",templateUrl:"app/events/events_myevents.html",data:{}}).state("events.allevents",{url:"/all-events",templateUrl:"app/events/events_allevents.html",data:{}}).state("events.map",{url:"/map",templateUrl:"app/events/events_map.html",data:{}}).state("event",{url:"/event","abstract":!0,templateUrl:"app/events/event.html",controller:"EventPageController",controllerAs:"eventpage",resolve:{},data:{displayName:"Event Details"}}).state("event.create",{url:"/create",templateUrl:"app/events/event_create.html",controller:"EventCreateController",controllerAs:"singleevent",data:{}}).state("event.edit",{url:"/edit/:eventId",templateUrl:"app/events/event_edit.html",controller:"EventEditController",controllerAs:"viewevent",resolve:{eventId:["$stateParams",function(e){return e.eventId}]},data:{}}).state("event.details",{url:"/details/:eventId",templateUrl:"app/events/event_view.html",controller:"EventViewController",controllerAs:"viewevent",resolve:{eventId:["$stateParams",function(e){return e.eventId}]},data:{displayName:"Event Details"}}),i.otherwise("/")}]).run(["$rootScope","$state","$stateParams","$timeout","ezfb",function(e,t,i){e.$state=t,e.isState=function(e){return t.includes(e)},e.$stateParams=i,e.$on("$stateChangeStart",function(){$(".sidebar").sidebar("is visible")&&$(".sidebar").sidebar("hide")}),e.$on("$stateChangeSuccess",function(t,i,s,n,o){document.body.scrollTop=document.documentElement.scrollTop=0,e.previousState={name:n.name,params:o},"events.myevents"!==n.name&&"events.allevents"!==n.name&&"events.mynetwork"!==n.name||"event.details"!==i.name&&"event.create"!==i.name||(e.previousEventFeed=n.name)}),e.$on("$stateChangeError",function(){})}]).value("noUiSliderConfig",{step:1}).directive("ngEnter",function(){return function(e,t,i){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(i.ngEnter)}),t.preventDefault())})}}).directive("updateTitle",["$rootScope","$timeout",function(e,t){return{link:function(i,s){var n=function(e,i){var n="icebr&#257;k";i.data&&i.data.displayName&&(n=i.data.displayName),t(function(){s.html(n)})};e.$on("$stateChangeSuccess",n)}}}]).directive("endRepeat",["$timeout",function(e){return{restrict:"A",link:function(t){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}]).directive("endRepeatPhotos",["$timeout",function(e){return{restrict:"A",link:function(t){t.$last===!0&&e(function(){t.$emit("ngRepeatFinishedPhotos")})}}}]).filter("getByProperty",function(){return function(e,t,i){for(var s=0,n=i.length;n>s;s++)if(i[s][e]===t)return i[s];return null}}).filter("lastMessage",function(){return function(e){return null===e?"No messages.":e}}).filter("getIndexByProperty",function(){return function(e,t,i){for(var s=0,n=i.length;n>s;s++)if(i[s][e]===t)return s;return null}}).filter("getByPropertyExcept",function(){return function(e,t,i,s,n){for(var o=0,a=n.length;a>o;o++)if(n[o][e]===t&&n[o][i]!==s)return n[o];return null}}).directive("modal",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{model:"=ngModel"},template:'<div class="ui dimmer modals page transition" style="position: absolute;" ng-class="{ \'active visible\': model }"><div class="ui long test modal transition scrolling" style="top: 150px;" ng-class="{ \'active visible\': model }" ng-transclude></div></div>',link:function(){}}}).directive("ngChangeOnBlur",function(){return{restrict:"A",require:"ngModel",link:function(e,t,i){if("radio"!==i.type&&"checkbox"!==i.type){var s=i.ngChangeOnBlur,n=null;t.bind("focus",function(){e.$apply(function(){n=t.val()})}),t.bind("blur",function(){e.$apply(function(){var i=t.val();i!==n&&e.$eval(s)})})}}}}).factory("myIoSocket",["socketFactory",function(e){var t=io.connect("//"+window.location.hostname+":3000");return t=e({ioSocket:t}),t.forward("message"),t.forward("error"),t}]).directive("whenScrollEnds",function(){return{restrict:"A",link:function(e,t,i){var s=t.height(),n=100;t.scroll(function(){var o=t.prop("scrollHeight"),a=o-s;a-t.scrollTop()<=n&&e.$apply(i.whenScrollEnds)})}}}).directive("whenScrolled",["$timeout",function(e){return function(t,i,s){var n=i[0];i.bind("scroll",function(){if(n.scrollTop<=100){var i=n.scrollHeight;t.$apply(s.whenScrolled).then(function(){e(function(){n.scrollTop=n.scrollHeight-i})})}})}}]).directive("scrollBottomOn",["$timeout",function(e){return function(t,i,s){t.$watch(s.scrollBottomOn,function(t){t&&e(function(){i[0].scrollTop=i[0].scrollHeight})})}}]).directive("uicheckbox",function(){return{restrict:"E",replace:!0,transclude:!0,require:"ngModel",scope:{type:"@",value:"@",size:"@",checked:"@",change:"&",model:"=ngModel"},template:'<div class="{{checkbox_class}}"><input type="checkbox"><label ng-click="click_on_checkbox()" ng-transclude></label></div>',link:function(e,t){"standard"===e.type||void 0===e.type?(e.type="standard",e.checkbox_class="ui checkbox"):"slider"===e.type?(e.type="slider",e.checkbox_class="ui slider checkbox"):"toggle"===e.type?(e.type="toggle",e.checkbox_class="ui toggle checkbox"):(e.type="standard",e.checkbox_class="ui checkbox"),"large"===e.size?e.checkbox_class=e.checkbox_class+" large":"huge"===e.size&&(e.checkbox_class=e.checkbox_class+" huge"),"false"===e.checked||void 0===e.checked?e.checked=!1:(e.checked=!0,t.children()[0].setAttribute("checked","")),t.bind("click",function(){e.$apply(function(){e.checked===!0?(e.checked=!0,e.model=!1,t.children()[0].removeAttribute("checked")):(e.checked=!0,e.model=!0,t.children()[0].setAttribute("checked","true"))})}),e.$watch("model",function(i){void 0!==i&&(i===!0?(e.checked=!0,t.children()[0].setAttribute("checked","true"),e.change({value:e.value,checked:e.checked})):(e.checked=!1,t.children()[0].removeAttribute("checked"),e.change({value:e.value,checked:e.checked})))})}}}).directive("autoFocus",["$timeout",function(e){return{restrict:"AC",link:function(t,i){e(function(){i[0].focus()},0)}}}]),function(){function e(){function e(){}var i={controller:t,controllerAs:"userprofile",bindToController:!0,scope:{id:"@id","class":"@class",header:"@header",body:"@body",person:"=person",type:"@type"},link:e,templateUrl:"components/userprofile/userprofile.template.html",restrict:"E"};return i}function t(e,t,i,s,n,o,a,r,l,d,c){function u(){$("#photoSlider").flexslider("next")}function v(){t.get({format:"json"},{userId:p.userId}).$promise.then(function(e){p.user.first_name=e.first_name,p.user.last_name=e.last_name,p.user.about_me=e.about_me,p.user.age=e.age,p.user.facebookId=e.facebook_id,null!==e.twitter_provider&&(p.social.twitter=e.twitter_provider),null!==e.linkedin_provider&&(p.social.linkedin=e.linkedin_provider),null!==e.facebook_profile_url&&(p.social.facebook=e.facebook_profile_url),p.loadingUser=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);p.loadingUser=!1,c.error(i)})}function m(){("loggedInUser"===p.type||"friend"===p.type)&&p.getUserInfo(),"loggedInUser"===p.type&&(a.query({user_id:p.userId,format:"json"}).$promise.then(function(e){e.meta.total_count>0&&(p.user.goals=e.objects),p.loadingGoals=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);c.error(i)}),r.query({user_id:p.userId,format:"json"}).$promise.then(function(e){e.meta.total_count>0&&(p.user.offers=e.objects),p.loadingOffers=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);c.error(i)}),l.query({format:"json"}).$promise.then(function(e){e.meta.total_count>0&&(p.user.likes=e.objects),p.loadingLikes=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);c.error(i)}),i.query({user_id:p.userId,format:"json"}).$promise.then(function(e){e.meta.total_count>0&&(p.user.interests=e.objects),p.loadingInterests=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);c.error(i)})),"friend"===p.type&&(s.get({user_id:p.userId,format:"json"}).$promise.then(function(e){var t=[],i=e.objects[0].goals[0];for(var s in i){var n={value:s,match:i[s]};t.push(n)}p.user.goals=t;var o=[],a=e.objects[0].offers[0];for(var s in a){var r={value:s,match:a[s]};o.push(r)}p.user.offers=o;var l=[],d=e.objects[0].interests[0];for(var s in d){var c={value:s,match:d[s]};l.push(c)}p.user.interests=l;var u=[],v=e.objects[0].likes[0];for(var s in v){var m={value:s,match:v[s]};u.push(m)}p.user.likes=u},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);c.error(i)}),o.query({format:"json",user_id:p.userId}).$promise.then(function(e){e.objects.length>0&&(p.user.friends=e.objects[0].mutual_bk_friends,p.user.facebookfriends=e.objects[0].mutual_fb_friends,p.user.linkedinconnections=e.objects[0].mutual_linkedin_connections,p.user.twitterfollowers=e.objects[0].mutual_twitter_followers,p.user.twitterfriends=e.objects[0].mutual_twitter_friends)},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);c.error(i)}))}function f(){d.query({format:"json",user_id:p.userId}).$promise.then(function(e){if(p.user.photos=e.objects,0===p.user.photos.length){var t={photo:p.userPhoto,cropped_photo:"",order:0,user:"/api/v1/auth/user/"+p.userId+"/"};d.save({},t,function(e){c.info(e),c.info("New photo saved."),p.user.photos.push({photo:p.userPhoto,cropped_photo:"",order:0}),p.photosSlider=p.user.photos},function(e){c.info(e)})}else p.photosSlider=p.user.photos},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);c.error(i)})}var p=this;p.userId=p.person.id,p.userPhoto=p.person.photo,p.getUser=m,p.getUserInfo=v,p.getPhotos=f,p.nextImage=u,p.showfullprofile=!0,p.social={twitter:"",linkedin:"",facebook:""},p.user={id:p.person.id,firstName:"",lastName:"",age:"",about_me:"",photos:[],goals:[],offers:[],likes:[],interests:[],friends:[],facebookfriends:[],twitterfriends:[],twitterfollowers:[],linkedinconnections:[],distance:[]},p.photosSlider=[],p.getUser(),p.getPhotos()}angular.module("icebrak").directive("userProfile",e),t.$inject=["$scope","UsersFactory","InterestsFactory","ProfileFactory","MatchFeedFactory","MutualFriendsFactory","GoalsFactory","OffersFactory","LikesFactory","PhotosFactory","$log","lodash"]}(),function(){function e(e,t,i,s,n){function o(){function i(e){0===e.objects.length?(c.createSettings(d),c.settingsState=d):(c.settingId=e.objects[0].id,c.settingsState=e.objects[0])}function s(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);t.error(s),c.settingsState=d}return t.info("fetching settings"),e.query({format:"json"}).$promise.then(i,s)}function a(){return c.settingsState}function r(i){function s(){c.settingsState=i}function n(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);t.error(s)}return t.info("saving settings"),null!==c.settingId?e.update({settingId:c.settingId},i,s,n):void 0}function l(i){function s(e){t.info("new settings created"),c.settingId=e.id}function n(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);t.error(s)}return t.info("creating settings"),e.save(i,s,n)}var d={distance_unit:"miles",user:"/api/v1/auth/user/"+n+"/"},c={settingsState:{distance_unit:"miles",user:"/api/v1/auth/user/"+n+"/"},settingId:null,getSettings:o,saveSettings:r,createSettings:l,getSettingState:a};return c}angular.module("icebrak").factory("SettingsRepository",e),e.$inject=["SettingsFactory","$log","$filter","$rootScope","USER_ID"]}(),angular.module("icebrak").factory("SettingsFactory",["$resource",function(e){return e("/api/v1/settings/:settingId/:param",{settingId:"@settingId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]),function(){function e(e,t,i,s,n){function o(){function t(e){var t=0;e.meta.total_count>0&&(t=e.objects[0].unread_counter),v.setTotalInbox(t)}function s(t){var i=(t.data,t.status),s=(t.header,t.config,"Error "+i);e.error(s)}return i.query({format:"json",limit:1,offset:0}).$promise.then(t,s)}function a(){function t(e){var t=0;e.meta.total_count>0&&(t=e.objects[0].new_connection_counter),v.setTotalConnections(t)}function i(t){var i=(t.data,t.status),s=(t.header,t.config,"Error "+i);e.error(s)}return s.query({format:"json",limit:1,offset:0}).$promise.then(t,i)}function r(e){v.totalInbox=e,v.total=v.totalInbox+v.totalConnections,n.$broadcast("refreshMessagesCounter"),n.$broadcast("refreshStateNotificationCircle")}function l(e){v.totalConnections=e,v.total=v.totalInbox+v.totalConnections,n.$broadcast("refreshConnectionsCounter"),n.$broadcast("refreshStateNotificationCircle")}function d(){return v.total}function c(){return v.totalInbox}function u(){return v.totalConnections}var v={total:0,totalInbox:0,totalConnections:0,getTotal:d,setTotalInbox:r,setTotalConnections:l,refreshTotalInbox:o,refreshTotalConnections:a,getTotalInbox:c,getTotalConnections:u};return v}angular.module("icebrak").factory("NotificationsRepository",e),e.$inject=["$log","$filter","InboxUnreadCounterFactory","NewConnectionsFactory","$rootScope","$q"]}(),function(){function e(){function e(){}var i={controller:t,controllerAs:"notificationcircle",bindToController:!0,scope:{color:"@color"},link:e,template:'<mark class="notification {{notificationcircle.color}}"  ng-class="{\'hidden-notification\': notificationcircle.hideClass}"></mark>',restrict:"E",replace:!0};return i}function t(e,t,i){var s=this;s.hideClass=!0,s.counter=i.getTotal(),t.$on("displayNotificationCircle",function(){s.hideClass=!1}),t.$on("hideNotificationCircle",function(){s.hideClass=!0}),t.$on("refreshStateNotificationCircle",function(){s.counter=i.getTotal(),s.hideClass=s.counter>0?!1:!0})}angular.module("icebrak").directive("notificationCircle",e),t.$inject=["$scope","$rootScope","NotificationsRepository"]}(),function(){function e(){function e(e,t,i,s){console.log("pero"),console.log(t),t.modal({onHide:function(){s.$setViewValue(!1)}}),e.$watch(function(){return s.$modelValue},function(e){t.modal("setting","transition","scale").modal("setting","closable",!1).modal(e?"show":"hide")})}var i={restrict:"E",replace:!0,transclude:!0,require:"ngModel",template:'<div class="ui modal" ng-transclude></div>',controller:t,controllerAs:"uimodal",bindToController:!0,link:e};return i}function t(){}angular.module("frontend.semantic.modal",[]).directive("uiModal",e),t.$inject=["$scope","$log"]}(),function(){function e(){function e(e,t){t.modal({onHide:function(){e.viewevent.show=!1,e.viewevent.editMode=!1,e.viewevent.eventNotFound=!1,e.viewevent.modalId="viewEventsModal"}}),t.modal({onShow:function(){e.viewevent.editMode=!1,e.viewevent.modalId="viewEventsModal"}}),e.$watch("viewevent.show",function(e){t.modal("setting","transition","scale").modal("setting","closable",!1).modal("setting","allowMultiple",!0).modal(e?"show":"hide")})}var i={restrict:"E",replace:!0,transclude:!1,scope:{show:"=show",eventid:"=eventid"},templateUrl:"components/modal/modalview.html",controller:t,controllerAs:"viewevent",bindToController:!0,link:e};return i}function t(e,t,i,s,n,o,a,r,l,d,c,u){function v(e){var i={event:"/api/v1/event/"+E.event.id+"/",rsvp:e,user:"/api/v1/auth/user/"+t+"/"};E.eventRsvp.status!==e&&(E.memberExists?(E.eventRsvp.status=e,c.update({memberId:E.memberId},i,function(){for(var i=E.event.members.length-1;i>=0;i--)E.event.members[i].user==="/api/v1/auth/user/"+t+"/"&&(E.event.members[i].rsvp=e)},function(){})):(E.eventRsvp.status=e,c.save({},i,function(e){o.info(e),E.memberExists=!0,E.event.members.push(e),E.memberId=e.id},function(e){o.info(e)})))}function m(){E.showError=!1,i.delete({eventId:E.eventEdit.id},function(){E.showError=!1,d({messageTemplate:'<div class="notify-info-header">Success</div><p>Event has been successfully deleted.</p>',classes:"notify-info",icon:"check circle",duration:4e3}),n.$broadcast("refreshEventFeed"),E.closeEventModal()},function(e){E.errorMessage=[],E.showError=!0,e.data.event&&(E.errorMessage=["Event could not be deleted."])})}function f(){E.pok=0,o.info("getting event: "+E.eventid),E.loadingEvent=!0,i.query({format:"json"},{eventId:E.eventid}).$promise.then(function(e){if(E.eventNotFound=!1,E.event=e,E.eventLocation="",E.mapurlTrue=!1,E.mapurl="","0,0"!==E.event.location?(E.eventLocation=""!==E.event.full_address&&null!==E.event.full_address?E.event.full_address:E.event.street+" "+E.event.city+" "+E.event.zipcode+" "+E.event.state,E.mapurl="https://www.google.com/maps/search/"+encodeURIComponent(E.eventLocation)+"/@"+E.event.location+",15z",E.mapurlTrue=!0):(E.mapurlTrue=!1,E.mapurl="",E.eventLocation=E.event.location_name),E.isHost=!1,E.eventRsvp={status:""},E.memberExists=!1,E.memberId=null,E.event.members.length>0)for(var i=E.event.members.length-1;i>=0;i--)E.event.members[i].is_organizer===!0?E.event.members[i].user==="/api/v1/auth/user/"+t+"/"&&(E.isHost=!0):E.event.members[i].user==="/api/v1/auth/user/"+t+"/"&&(E.memberId=E.event.members[i].id,null!==E.event.members[i].rsvp&&(E.eventRsvp.status=E.event.members[i].rsvp),E.memberExists=!0);E.starts_on_date=r.utc(E.event.starts_on,r.ISO_8601).local().format("dddd, MMMM D, YYYY"),E.ends_on_date=r.utc(E.event.ends_on,r.ISO_8601).local().format("dddd, MMMM D, YYYY"),E.starts_on_time=r.utc(E.event.starts_on,r.ISO_8601).local().format("H:mm A"),E.ends_on_time=r.utc(E.event.ends_on,r.ISO_8601).local().format("H:mm A ")+r.tz(l.timezone).format("z"),E.ends_on_date!==E.starts_on_date?(E.firstrow=E.starts_on_date+" "+E.starts_on_time,E.secondrow=E.ends_on_date+" "+E.ends_on_time):(E.firstrow=E.starts_on_date,E.secondrow=E.starts_on_time+" to "+E.ends_on_time),E.loadingEvent=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);E.loadingEvent=!1,E.eventNotFound=!0,o.info(t),o.error(i)})}function p(){E.show=!1}function g(){""!==E.mapurl&&a.open(E.mapurl)}function h(){return E.startsTimeError=!1,E.endsTimeError=!1,r(E.eventEdit.starts_on).unix()<r().unix()?(o.info("start date is not valid"),E.showError=!0,E.errorMessage=["Please select a Starts Date that is not set in past."],void(E.startsTimeError=!0)):(o.info("start date is OK"),E.showError=!1,E.errorMessage=[],E.startsTimeError=!1,r(E.eventEdit.ends_on).unix()<r().unix()?(o.info("end date is not valid"),E.showError=!0,E.errorMessage=["Please select an Ends Date that is not set in past."],void(E.endsTimeError=!0)):r(E.eventEdit.ends_on).unix()>r().unix()&&r(E.eventEdit.starts_on).unix()>r().unix()&&r(E.eventEdit.starts_on).unix()>r(E.eventEdit.ends_on).unix()?(o.info("end date is not ok"),E.showError=!0,E.errorMessage=["Ends Date must be greater or equal to Starts Date."],E.endsTimeError=!0,void(E.startsTimeError=!0)):(o.info("end date is OK"),E.showError=!1,E.errorMessage=[],E.startsTimeError=!1,E.endsTimeError=!1,void 0))}function b(e,t,i){for(var s=0;s<e.length;s++)for(var n=0;n<e[s].types.length;n++)if(e[s].types[n]===t)return e[s][i];return""}function y(){if(o.info("parsing location"),null!==E.eventLocation&&"object"==typeof E.eventLocation&&E.eventLocation.hasOwnProperty("address_components")&&E.eventLocation.hasOwnProperty("geometry")){o.info("changing location");var e=E.eventLocation.address_components;E.eventEdit.street=E.extractFromAddress(e,"route","long_name")+" "+E.extractFromAddress(e,"street_number","long_name"),E.eventEdit.zipcode=E.extractFromAddress(e,"postal_code","long_name"),""===E.eventEdit.zipcode&&(E.eventEdit.zipcode=null),E.eventEdit.location_name=E.eventLocation.name,E.eventEdit.full_address=E.eventLocation.formatted_address,E.eventEdit.state=E.extractFromAddress(e,"administrative_area_level_1","short_name"),E.eventEdit.country=E.extractFromAddress(e,"country","short_name"),E.eventEdit.state.length>3&&(E.eventEdit.state=E.eventEdit.country),E.eventEdit.city=E.extractFromAddress(e,"locality","long_name"),E.eventEdit.location=E.eventLocation.geometry.location.A+","+E.eventLocation.geometry.location.F,E.mapurl="https://www.google.com/maps/search/"+encodeURIComponent(E.eventLocation.formatted_address)+"/@"+E.eventEdit.location+",15z",E.mapurlTrue=!0,o.info(E.mapurl)}else E.pok>2?(E.eventEdit.address=E.eventLocation,E.eventEdit.full_address="",E.eventEdit.location_name=E.eventLocation,E.eventEdit.location="0,0"):E.pok++}function w(e){if(E[e+"_date"]&&E[e+"_time"]){{var t=E[e+"_date"].split("/"),i=[t[2],t[0],t[1]],s=E[e+"_time"].split(":");6e4*(new Date).getTimezoneOffset()}i&&s&&(i[1]-=1,E.eventEdit[e]=r(i.concat(s)).toISOString())}}function _(){E.showError=!1,E.showSuccess=!1,E.errorMessage=[],E.endsTimeError=!1,E.startsTimeError=!1,E.eventEdit=angular.copy(E.event),E.starts_on_date=r.utc(E.event.starts_on,r.ISO_8601).local().format("MM/DD/YYYY"),E.ends_on_date=r.utc(E.event.ends_on,r.ISO_8601).local().format("MM/DD/YYYY"),E.starts_on_time=r.utc(E.event.starts_on,r.ISO_8601).local().format("H:mm"),E.ends_on_time=r.utc(E.event.ends_on,r.ISO_8601).local().format("H:mm"),E.modalId="createEventsModal",E.editMode=!0}function k(){E.showError=!1,E.showSuccess=!1,$(".ui.form").form({name:{identifier:"name",rules:[{type:"empty",prompt:"Please enter Event name"}]},location:{identifier:"location",rules:[{type:"empty",prompt:"Please enter Location"}]},repeat:{identifier:"repeat",rules:[{type:"empty",prompt:"Please enter Repeat"}]},description:{identifier:"description",rules:[{type:"empty",prompt:"Please enter Description"}]},starts_on_date:{identifier:"starts_on_date",rules:[{type:"empty",prompt:"Please enter Starts Date"}]},starts_on_time:{identifier:"starts_on_time",rules:[{type:"empty",prompt:"Please enter Starts Time"}]},ends_on_date:{identifier:"ends_on_date",rules:[{type:"empty",prompt:"Please enter Ends Date"}]},ends_on_time:{identifier:"ends_on_time",rules:[{type:"empty",prompt:"Please enter Ends Time"}]}}),$(".ui.form").form("validate form"),""===E.eventEdit.description||""===E.eventEdit.ends_on||""===E.eventEdit.location||""===E.eventEdit.name||""===E.eventEdit.starts_on||""===E.eventEdit.repeat?((""===E.eventEdit.starts_on||null===E.eventEdit.starts_on)&&(E.startsTimeError=!0),(""===E.eventEdit.ends_on||null===E.eventEdit.ends_on)&&(E.endsTimeError=!0),E.showError=!0,E.errorMessage=["Please enter all required fields."]):(E.validateDates(),o.info("started saving event"),E.showSuccess=!1,E.showError||i.update({eventId:E.eventEdit.id},E.eventEdit,function(){E.showError=!1,E.modalId="viewEventsModal",E.editMode=!1,d({messageTemplate:'<div class="notify-info-header">Success</div><p>All changes have been saved.</p>',classes:"notify-info",icon:"check circle",duration:4e3}),n.$broadcast("refreshEventFeed"),E.getEvent()},function(e){E.errorMessage=[],E.showError=!0,e.data.event&&(E.errorMessage=e.data.event.error)}))}var E=this;E.showMobile=!1,E.closeEventModal=p,E.getEvent=f,E.openMap=g,E.deleteEvent=m,E.event={},E.showError=!1,E.showSuccess=!1,E.errorMessage=[],E.endsTimeError=!1,E.startsTimeError=!1,E.modalId="viewEventsModal",E.eventRsvp={status:""},E.changeRsvpStatus=v,E.extractFromAddress=b,E.parseLocation=y,E.combineDateTime=w,E.validateDates=h,E.saveEvent=k,E.editMode=!1,E.editEvent=_,E.isHost=!1,E.loadingEvent=!1,E.placeholder={name:"",starts:"Date",startsTime:"Time",ends:"Date",endsTime:"Time",repeat:"",repeatUntil:"Until date",description:"",location:"",costs:"",invitations:"",attachments:""},E.$geolocation=u,u.getCurrentPosition({enableHighAccuracy:!0,timeout:6e4,maximumAge:2}).then(function(e){E.autocompleteOptions={location:new google.maps.LatLng(e.coords.latitude,e.coords.longitude),radius:5e4}}),E.autocompleteOptions={location:"0,0",radius:5e4},E.memberExists=!1,e.$watch(angular.bind(this,function(){return E.show}),function(e){o.info(e),e&&E.getEvent()}),E.eventEdit={starts_on:"",ends_on:"",address:""},e.$watch(angular.bind(this,function(){return E.starts_on_date}),function(){E.combineDateTime("starts_on"),E.combineDateTime("ends_on")}),e.$watch(angular.bind(this,function(){return E.starts_on_time}),function(){E.combineDateTime("starts_on"),E.combineDateTime("ends_on")}),e.$watch(angular.bind(this,function(){return E.ends_on_date}),function(){E.combineDateTime("starts_on"),E.combineDateTime("ends_on")}),e.$watch(angular.bind(this,function(){return E.ends_on_time}),function(){E.combineDateTime("starts_on"),E.combineDateTime("ends_on")}),e.$watch(angular.bind(this,function(){return E.eventLocation}),function(){E.parseLocation()}),E.pok=0}angular.module("frontend.semantic.modal.event.view",[]).directive("uiEventViewModal",e),e.$inject=["$log"],t.$inject=["$scope","USER_ID","EventsFactory","$state","$rootScope","$log","$window","moment","angularMomentConfig","notify","MembersFactory","$geolocation"]}(),function(){function e(){function e(e,t){t.modal({onHide:function(){e.singleevent.show=!1,e.singleevent.resetForm()}}),e.$watch("singleevent.show",function(e){t.modal("setting","transition","scale").modal("setting","closable",!1).modal(e?"show":"hide")})}var i={restrict:"E",replace:!0,transclude:!1,scope:{show:"=show"},templateUrl:"components/modal/modalcreate.html",controller:t,controllerAs:"singleevent",bindToController:!0,link:e};return i}function t(e,t,i,s,n,o,a,r,l){function d(){h.show=!1}function c(){return h.startsTimeError=!1,h.endsTimeError=!1,r(h.event.starts_on).unix()<r().unix()?(o.info("start date is not valid"),h.showError=!0,h.errorMessage=["Please select a Starts Date that is not set in past."],void(h.startsTimeError=!0)):(o.info("start date is OK"),h.showError=!1,h.errorMessage=[],h.startsTimeError=!1,r(h.event.ends_on).unix()<r().unix()?(o.info("end date is not valid"),h.showError=!0,h.errorMessage=["Please select an Ends Date that is not set in past."],void(h.endsTimeError=!0)):r(h.event.ends_on).unix()>r().unix()&&r(h.event.starts_on).unix()>r().unix()&&r(h.event.starts_on).unix()>r(h.event.ends_on).unix()?(o.info("end date is not ok"),h.showError=!0,h.errorMessage=["Ends Date must be greater or equal to Starts Date."],h.endsTimeError=!0,void(h.startsTimeError=!0)):(o.info("end date is OK"),h.showError=!1,h.errorMessage=[],h.startsTimeError=!1,h.endsTimeError=!1,void 0))}function u(){h.showError=!1,h.showSuccess=!1,$(".ui.form").form({name:{identifier:"name",rules:[{type:"empty",prompt:"Please enter Event name"}]},location:{identifier:"location",rules:[{type:"empty",prompt:"Please enter Location"}]},repeat:{identifier:"repeat",rules:[{type:"empty",prompt:"Please enter Repeat"}]},description:{identifier:"description",rules:[{type:"empty",prompt:"Please enter Description"}]},starts_on_date:{identifier:"starts_on_date",rules:[{type:"empty",prompt:"Please enter Starts Date"}]},starts_on_time:{identifier:"starts_on_time",rules:[{type:"empty",prompt:"Please enter Starts Time"}]},ends_on_date:{identifier:"ends_on_date",rules:[{type:"empty",prompt:"Please enter Ends Date"}]},ends_on_time:{identifier:"ends_on_time",rules:[{type:"empty",prompt:"Please enter Ends Time"}]}}),$(".ui.form").form("validate form"),""===h.event.description||""===h.event.ends_on||""===h.event.location||""===h.event.name||""===h.event.starts_on||""===h.event.repeat?((""===h.event.starts_on||null===h.event.starts_on)&&(h.startsTimeError=!0),(""===h.event.ends_on||null===h.event.ends_on)&&(h.endsTimeError=!0),h.showError=!0,h.errorMessage=["Please enter all required fields."]):(h.validateDates(),o.info("started saving event"),h.showSuccess=!1,h.showError||i.save({},h.event,function(){h.showError=!1,n.$broadcast("closeModalCreateEvent"),h.resetForm()
},function(e){h.errorMessage=[],h.showError=!0,e.data.event&&(h.errorMessage=e.data.event.error)}))}function v(e,t,i){for(var s=0;s<e.length;s++)for(var n=0;n<e[s].types.length;n++)if(e[s].types[n]===t)return e[s][i];return""}function m(){if(h.mapurl="",h.mapurlTrue=!1,o.info("parsing location"),null!==h.eventLocation&&"object"==typeof h.eventLocation&&h.eventLocation.hasOwnProperty("address_components")&&h.eventLocation.hasOwnProperty("geometry")){var e=h.eventLocation.address_components;h.event.street=h.extractFromAddress(e,"route","long_name")+" "+h.extractFromAddress(e,"street_number","long_name"),h.event.zipcode=h.extractFromAddress(e,"postal_code","long_name"),""===h.event.zipcode&&(h.event.zipcode=null),h.event.location_name=h.eventLocation.name,h.event.full_address=h.eventLocation.formatted_address,h.event.state=h.extractFromAddress(e,"administrative_area_level_1","short_name"),h.event.country=h.extractFromAddress(e,"country","short_name"),h.event.state.length>3&&(h.event.state=h.event.country),h.event.city=h.extractFromAddress(e,"locality","long_name"),h.event.location=h.eventLocation.geometry.location.A+","+h.eventLocation.geometry.location.F,h.mapurl="https://www.google.com/maps/search/"+encodeURIComponent(h.eventLocation.formatted_address)+"/@"+h.event.location+",15z",h.mapurlTrue=!0,o.info(h.mapurl)}else h.event.address=h.eventLocation,h.event.full_address="",h.event.location_name=h.eventLocation,h.event.location="0,0"}function f(){""!==h.mapurl&&a.open(h.mapurl)}function p(){$(".ui.form").trigger("reset"),$(".ui.form .field.error").removeClass("error"),$(".ui.form.error").removeClass("error"),h.starts_on_date=null,h.starts_on_time=null,h.ends_on_date=null,h.ends_on_time=null,h.showError=!1,h.showSuccess=!1,h.errorMessage=[],h.mapurl="",h.mapurlTrue=!1,h.eventLocation="",h.event={user:"/api/v1/auth/user/"+t+"/",description:"",ends_on:"",location:"",name:"",repeat:"",starts_on:"",street:"",city:"",zipcode:null,state:"",full_address:"",location_name:"",country:""}}function g(e){if(h[e+"_date"]&&h[e+"_time"]){var t=h[e+"_date"].split("/"),i=[t[2],t[0],t[1]];o.info(i);{var s=h[e+"_time"].split(":");6e4*(new Date).getTimezoneOffset()}i&&s&&(i[1]-=1,h.event[e]=r(i.concat(s)).utc().format("YYYY-MM-DDTHH:mm:ss"))}}var h=this;h.mapurl="",h.mapurlTrue=!1,h.eventLocation="",h.showMobile=!1,h.endsTimeError=!1,h.startsTimeError=!1,h.placeholder={name:"",starts:"Date",startsTime:"Time",ends:"Date",endsTime:"Time",repeat:"",repeatUntil:"Until date",description:"",location:"",costs:"",invitations:"",attachments:""},h.$geolocation=l,l.getCurrentPosition({enableHighAccuracy:!0,timeout:6e4,maximumAge:2}).then(function(e){h.autocompleteOptions={location:new google.maps.LatLng(e.coords.latitude,e.coords.longitude),radius:5e4}}),h.autocompleteOptions={location:"0,0",radius:5e4},h.starts_on_date="",h.starts_on_time="",h.ends_on_date="",h.ends_on_time="",h.showError=!1,h.showSuccess=!1,h.errorMessage=[],h.event={user:"/api/v1/auth/user/"+t+"/",description:"",ends_on:"",location:"",name:"",repeat:"",starts_on:"",street:"",city:"",zipcode:null,state:"",full_address:"",location_name:"",country:""},h.saveEvent=u,h.openMap=f,h.resetForm=p,h.extractFromAddress=v,h.parseLocation=m,h.combineDateTime=g,h.closeEventModal=d,h.validateDates=c,n.$on("saveEvent",function(){o.info("saveEvent"),h.saveEvent()}),e.$watch(angular.bind(this,function(){return h.eventLocation}),function(){h.parseLocation()}),e.$watch(angular.bind(this,function(){return h.starts_on_date}),function(){h.combineDateTime("starts_on"),h.combineDateTime("ends_on")}),e.$watch(angular.bind(this,function(){return h.starts_on_time}),function(){h.combineDateTime("starts_on"),h.combineDateTime("ends_on")}),e.$watch(angular.bind(this,function(){return h.ends_on_date}),function(){h.combineDateTime("starts_on"),h.combineDateTime("ends_on")}),e.$watch(angular.bind(this,function(){return h.ends_on_time}),function(){h.combineDateTime("starts_on"),h.combineDateTime("ends_on")})}angular.module("frontend.semantic.modal.event.create",[]).directive("uiEventCreateModal",e),t.$inject=["$scope","USER_ID","EventsFactory","$state","$rootScope","$log","$window","moment","$geolocation"]}(),function(){function e(){function e(){}var i={controller:t,controllerAs:"messages",bindToController:!0,scope:{},link:e,template:'<div ng-class="{\'hiddencounter\': messages.hideClass}" class="ui label">{{messages.counter}}</div>',restrict:"E",replace:!0};return i}function t(e,t,i,s){function n(){o.counter=s.getTotalInbox(),o.hideClass=o.counter>0?!1:!0}var o=this;o.counter=0,o.hideClass=!0,o.refreshCounter=n,t.$on("refreshMessagesCounter",function(){o.refreshCounter()}),o.refreshCounter()}angular.module("icebrak").directive("messagesCounter",e),t.$inject=["$scope","$rootScope","$log","NotificationsRepository"]}(),function(){function e(){function e(){}var i={controller:t,controllerAs:"userprofile",bindToController:!0,scope:{id:"@id","class":"@class",header:"@header",body:"@body",person:"=person",type:"@type"},link:e,templateUrl:"components/matchfeedprofile/matchfeedprofile.template.html",restrict:"E"};return i}function t(e,t,i,s,n,o,a,r,l,d){function c(){w.totalfriendscount=0,w.totalmatchingcount=0,w.showDimmer=!0,w.showfullprofile=!1,s.hideTopMenu=!0,$("#filtersMenu").sidebar("hide"),w.user=[],w.total=0,w.social={twitter:"",linkedin:"",facebook:""},w.loadUser()}function u(){w.loadingFeed=!0,a.query({format:"json",filter:!0,offset:0,limit:1}).$promise.then(function(e){w.user=[],w.total=0;var t=e.objects;if(t.length>0){w.total=e.meta.total_count,w.user=e.objects[0],null!==w.user.twitter_provider&&(w.social.twitter=w.user.twitter_provider),null!==w.user.linkedin_provider&&(w.social.linkedin=w.user.linkedin_provider),null!==w.user.facebook_id&&(w.social.facebook="https://www.facebook.com/app_scoped_user_id/"+w.user.facebook_id);var i=[],n=w.user.goals[0];for(var o in n){var a={value:o,match:n[o]};i.push(a)}w.user.goals=i;var r=[],l=w.user.offers[0];for(var o in l){var d={value:o,match:l[o]};r.push(d)}w.user.offers=r;var c=[],u=w.user.interests[0];for(var o in u){var v={value:o,match:u[o]};c.push(v)}w.user.interests=c;var m=[],f=w.user.likes[0];for(var o in f){var p={value:o,match:f[o]};m.push(p)}w.user.likes=m,w.totalmatchingcount=w.user.score,w.getMutualFriends(),w.getPhotos()}else w.user=[],w.total=0;w.showDimmer=!1,s.hideTopMenu=!1,w.loadingFeed=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);d.error(i),w.user=[],w.showDimmer=!1,s.hideTopMenu=!1,w.loadingFeed=!1})}function v(){w.defaultUserPhoto="//graph.facebook.com/"+w.user.facebook_id+"/picture?type=large",l.query({format:"json",user_id:w.user.user_id}).$promise.then(function(e){if(w.user.photos=e.objects,w.user.photos.length>0)w.photosSlider=w.user.photos;else{var t={photo:w.defaultUserPhoto,order:0,user:"/api/v1/auth/user/"+w.user.user_id+"/"};l.save({},t,function(e){d.info(e),d.info("New photo saved."),w.user.photos.push(e),w.photosSlider=w.user.photos},function(e){d.info(e)})}w.photosSlider=i("orderBy")(w.photosSlider,"order",!1)})}function m(){r.query({format:"json",user_id:w.user.id}).$promise.then(function(e){e.objects.length>0&&(w.user.friends=e.objects[0].mutual_bk_friends,w.user.facebookfriends=e.objects[0].mutual_fb_friends,w.user.linkedinconnections=e.objects[0].mutual_linkedin_connections,w.user.twitterfollowers=e.objects[0].mutual_twitter_followers,w.user.twitterfriends=e.objects[0].mutual_twitter_friends,w.totalfriendscount+=e.objects[0].mutual_bk_friends_count,w.totalfriendscount+=e.objects[0].mutual_fb_friends_count,w.totalfriendscount+=e.objects[0].mutual_linkedin_connections_count,w.totalfriendscount+=e.objects[0].mutual_twitter_followers_count,w.totalfriendscount+=e.objects[0].mutual_twitter_friends_count)})}function f(){w.totalfriendscount=0,w.totalmatchingcount=0,w.showfullprofile=!1,s.hideTopMenu=!0,w.loadingFeed=!0,w.loadUser()}function p(){d.info("cancel match");var e={friend1:w.me,friend2:"/api/v1/auth/user/"+w.user.user_id+"/",status:-1};o.save(e,function(){w.getNextMatch()},function(){})}function g(){s.hideTopMenu=!1,w.showfullprofile=!1,w.cancelMatch()}function h(){s.hideTopMenu=!1,w.showfullprofile=!1,w.confirmMatch()}function b(){var e={friend1:w.me,friend2:"/api/v1/auth/user/"+w.user.user_id+"/",status:0};o.save(e,function(){w.getNextMatch()},function(){})}function y(){w.showfullprofile||(s.hideTopMenu=!0,w.showfullprofile=!0,$("#MatchMenu").sidebar("toggle"))}var w=this;w.social={twitter:"",linkedin:"",facebook:""},t(function(){s.filtersChanged=!1},1e3),w.user=[],w.total=0,w.offset=0,w.previous=null,w.next=null,w.me="/api/v1/auth/user/"+n+"/",w.friendshipStatus=null,w.friendshipId=null,w.showfullprofile=!1,s.$on("cancelMatchEvent",function(){w.cancelMatch()}),s.$on("confirmMatchEvent",function(){w.confirmMatch()}),s.$on("refreshMatchFeed",function(){w.initloadMatches()}),s.$emit("triggerRefreshFilters"),w.nextImage=function(){$("#photoSlider").flexslider("next")},w.photosSlider=[],w.loadingFeed=!1,w.totalfriendscount=0,w.totalmatchingcount=0,w.initloadMatches=c,w.loadUser=u,w.getNextMatch=f,w.cancelMatch=p,w.cancelMatchDesktop=g,w.confirmMatch=b,w.confirmMatchDesktop=h,w.changeTopMenu=y,w.getMutualFriends=m,w.getPhotos=v,w.initloadMatches(),s.$on("showFullProfile",function(){w.showfullprofile=!1})}angular.module("icebrak").directive("matchfeedProfile",e),t.$inject=["$scope","$timeout","$filter","$rootScope","USER_ID","FriendsFactory","MatchFeedFactory","MutualFriendsFactory","PhotosFactory","$log","lodash"]}(),angular.module("google.places",[]).factory("googlePlacesApi",["$window",function(e){if(!e.google)throw"Global `google` var missing. Did you forget to include the places API script?";return e.google}]).directive("googlePlacesAutocomplete",["$parse","$compile","$timeout","$document","googlePlacesApi",function(e,t,i,s,n){return{restrict:"A",require:"^ngModel",scope:{model:"=ngModel",options:"=?",forceSelection:"=?",attach:"=?",customPlaces:"=?",refreshLocation:"&refreshLocation"},controller:["$scope",function(){}],link:function(e,i,o,a){function r(){i.bind("keydown",c),i.bind("blur",u),i.bind("submit",u),e.$watch("selected",v)}function l(){{var i,n=angular.element('<div class="gplacesautocomplete" g-places-autocomplete-drawer></div>');angular.element(s[0].body)}n.attr({input:"input",query:"query",predictions:"predictions",active:"active",selected:"selected"}),i=t(n)(e),$("#"+e.attach).append(i)}function d(){a.$parsers.push(m),a.$formatters.push(f),a.$render=p}function c(t){0!==e.predictions.length&&-1!==_(I,t.which)&&(t.preventDefault(),t.which===x.down?(e.active=(e.active+1)%e.predictions.length,e.$digest()):t.which===x.up?(e.active=(e.active?e.active:e.predictions.length)-1,e.$digest()):13===t.which||9===t.which?(e.forceSelection&&(e.active=-1===e.active?0:e.active),e.$apply(function(){e.selected=e.active,-1===e.selected&&g()})):27===t.which&&(t.stopPropagation(),g(),e.$digest()))}function u(){if(0!==e.predictions.length)e.forceSelection&&(e.selected=-1===e.selected?0:e.selected),e.$digest(),e.$apply(function(){-1===e.selected&&g()});else if(e.forceSelection){var t=e.$root.$$phase,i=function(){e.model=""};"$apply"===t||"$digest"===t?i():e.$apply(i)}}function v(){var t;t=e.predictions[e.selected],t&&(t.is_custom?(e.model=t.place,e.$emit("g-places-autocomplete:select",t.place)):F.getDetails({placeId:t.place_id},function(t,i){i===n.maps.places.PlacesServiceStatus.OK&&e.$apply(function(){e.model=t,e.$emit("g-places-autocomplete:select",t),e.refreshLocation()})}),g())}function m(t){var i;return t&&y(t)?(e.query=t,i=angular.extend({input:t},e.options),M.getPlacePredictions(i,function(t,i){e.$apply(function(){var s;g(),e.customPlaces&&(s=h(e.query),e.predictions.push.apply(e.predictions,s)),i===n.maps.places.PlacesServiceStatus.OK&&e.predictions.push.apply(e.predictions,t),e.predictions.length>5&&(e.predictions.length=5)})}),t):t}function f(e){var t="";return y(e)?t=e:w(e)&&(t=e.formatted_address),t}function p(){return i.val(a.$viewValue)}function g(){e.active=-1,e.selected=-1,e.predictions=[]}function h(t){var i,s,n,o=[];for(n=0;n<e.customPlaces.length;n++)i=e.customPlaces[n],s=b(t,i),s.matched_substrings.length>0&&o.push({is_custom:!0,custom_prediction_label:i.custom_prediction_label||"(Custom Non-Google Result)",description:i.formatted_address,place:i,matched_substrings:s.matched_substrings,terms:s.terms});return o}function b(e,t){var i,s,n,o=e+"",a=[],r=[];for(s=t.formatted_address.split(","),n=0;n<s.length;n++)i=s[n].trim(),o.length>0&&(i.length>=o.length?(k(i,o)&&r.push({length:o.length,offset:n}),o=""):k(o,i)?(r.push({length:i.length,offset:n}),o=o.replace(i,"").trim()):o=""),a.push({value:i,offset:t.formatted_address.indexOf(i)});return{matched_substrings:r,terms:a}}function y(e){return"[object String]"===Object.prototype.toString.call(e)}function w(e){return"[object Object]"===Object.prototype.toString.call(e)}function _(e,t){var i,s;if(null===e)return-1;for(s=e.length,i=0;s>i;i++)if(e[i]===t)return i;return-1}function k(e,t){return 0===E(e).lastIndexOf(E(t),0)}function E(e){return null===e?"":e.toLowerCase()}var x={tab:9,enter:13,esc:27,up:38,down:40},I=[x.tab,x.enter,x.esc,x.up,x.down],M=new n.maps.places.AutocompleteService,F=new n.maps.places.PlacesService(i[0]);!function(){e.query="",e.predictions=[],e.input=i,e.options=e.options||{},l(),r(),d()}()}}}]).directive("gPlacesAutocompleteDrawer",["$window","$document",function(e,t){var i=['<div class="pac-container" ng-if="isOpen()" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">','  <div class="pac-item" g-places-autocomplete-prediction index="$index" prediction="prediction" query="query"','       ng-repeat="prediction in predictions track by $index" ng-class="{\'pac-item-selected\': isActive($index) }"','       ng-mouseenter="selectActive($index)" ng-click="selectPrediction($index)" role="option" id="{{prediction.id}}">',"  </div>","</div>"];return{restrict:"A",scope:{input:"=",query:"=",predictions:"=",active:"=",selected:"="},template:i.join(""),link:function(i,s){function n(i){var s=i[0],n=s.getBoundingClientRect(),o=t[0].documentElement,a=t[0].body,r=e.pageYOffset||o.scrollTop||a.scrollTop,l=e.pageXOffset||o.scrollLeft||a.scrollLeft;return{width:n.width,height:n.height,top:n.top+n.height+r,left:n.left+l}}s.bind("mousedown",function(e){e.preventDefault()}),i.isOpen=function(){return i.predictions.length>0},i.isActive=function(e){return i.active===e},i.selectActive=function(e){i.active=e},i.selectPrediction=function(e){i.selected=e},i.$watch("predictions",function(){i.position=n(i.input)},!0)}}}]).directive("gPlacesAutocompletePrediction",[function(){var e=['<span class="pac-icon pac-icon-marker"></span>','<span class="pac-item-query" ng-bind-html="prediction | highlightMatched"></span>','<span ng-repeat="term in prediction.terms | unmatchedTermsOnly:prediction">{{term.value | trailingComma:!$last}}&nbsp;</span>','<span class="custom-prediction-label" ng-if="prediction.is_custom">&nbsp;{{prediction.custom_prediction_label}}</span>'];return{restrict:"A",scope:{index:"=",prediction:"=",query:"="},template:e.join("")}}]).filter("highlightMatched",["$sce",function(e){return function(t){var i,s="",n="";return t.matched_substrings.length>0&&t.terms.length>0&&(i=t.matched_substrings[0],s=t.terms[0].value.substr(i.offset,i.length),n=t.terms[0].value.substr(i.offset+i.length)),e.trustAsHtml('<span class="pac-matched">'+s+"</span>"+n)}}]).filter("unmatchedTermsOnly",[function(){return function(e,t){var i,s,n=[];for(i=0;i<e.length;i++)s=e[i],t.matched_substrings.length>0&&s.offset>t.matched_substrings[0].length&&n.push(s);return n}}]).filter("trailingComma",[function(){return function(e,t){return t?e+",":e}}]),function(){function e(e,t,i,s,n){function o(){function i(e){0===e.objects.length?(c.createFilters(d),c.filterState=d):(c.filterId=e.objects[0].id,c.filterState=e.objects[0],s.$broadcast("refreshEventsFilters"))}function n(e){var i=(e.data,e.status),n=(e.header,e.config,"Error "+i);t.error(n),c.filterState=d,s.$broadcast("refreshEventsFilters")}return t.info("fetching events filters"),e.query({format:"json"}).$promise.then(i,n)}function a(){return c.filterState}function r(i){function n(){c.filterState=i,s.$broadcast("refreshEventsFilters")}function o(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);t.error(s)}return t.info("saving filters"),null!==c.filterId?e.update({filterId:c.filterId},i,n,o):void 0}function l(i){function s(e){t.info("new events filters created"),c.filterId=e.id}function n(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);t.error(s)}return t.info("creating filters"),e.save(i,s,n)}var d={distance:1e4,keyword:"",user:"/api/v1/auth/user/"+n+"/"},c={filterState:{distance:1e4,keyword:"",user:"/api/v1/auth/user/"+n+"/"},filterId:null,getFilters:o,saveFilters:r,createFilters:l,getFilterState:a};return c}angular.module("icebrak").factory("EventsFilterRepository",e),e.$inject=["EventsFiltersFactory","$log","$filter","$rootScope","USER_ID"]}(),angular.module("icebrak").factory("EventsFiltersFactory",["$resource",function(e){return e("/api/v1/events/filter/state/:filterId/:param",{filterId:"@filterId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]),function(){function e(){function e(){}var i={controller:t,controllerAs:"filter",bindToController:!0,scope:{id:"@id","class":"@class"},link:e,templateUrl:"components/filterEvents/filterEvents.template.html",restrict:"E"};return i}function t(e,t,i,s,n,o,a,r,l){function d(){i.$broadcast("refreshEventFeed"),i.$emit("eventsFiltersChanged")}function c(){f.currentFilters=a.getFilterState(),f.distanceValue=f.currentFilters.distance,f.distanceUnit=i.distance_unit,""!==f.currentFilters.keyword&&void 0!==f.currentFilters.keyword?f.myKeywords=f.currentFilters.keyword.split(","):f.myKeywords.splice(0,f.myKeywords.length),e.$broadcast("reCalcViewDimensions"),e.$broadcast("rzSliderForceRender"),i.eventsFiltersChanged=!0}function u(){f.newFilters={distance:f.distanceValue,keyword:0===f.myKeywords.length?"":f.myKeywords.join(),user:"/api/v1/auth/user/"+r+"/"},i.eventsFiltersChanged=!0,a.saveFilters(f.newFilters),e.$broadcast("reCalcViewDimensions"),e.$broadcast("rzSliderForceRender")}function v(e){f.myKeywords.splice(e,1),f.saveFilters()}function m(e){if(f.filtermessage="",""===e||void 0===e)f.filtermessage="Keyword must have at least 3 letters",f.showFilterMessage=!0;else if(f.myKeywords.length<5){f.existing=!1;for(var t=f.myKeywords.length-1;t>=0;t--)f.myKeywords[t]===e&&(f.existing=!0);f.existing===!1?(f.myKeywords.push(e),f.saveFilters(),f.newKeyword="",f.showFilterMessage=!1):(f.filtermessage="Keyword already exists",f.showFilterMessage=!0)}else f.filtermessage="You cannot add more than 5 keywords",f.showFilterMessage=!0}var f=this;i.eventsFiltersChanged=!1,t(function(){i.eventsFiltersChanged=!1,f.changed=!1},1e3),i.$watch("eventsFiltersChanged",function(e){f.changed=e}),f.saveFilters=u,f.saveFiltersDebounce=l.debounce(u,200),f.getFilters=c,f.removeKeyword=v,f.addKeyword=m,f.refreshEventsFeed=d,f.distanceValue=1e4,f.distanceUnit="miles",f.filtermessage="",f.currentFilters=null,f.showFilterMessage=!1,f.myKeywords=[],f.getFilters(),i.$on("refreshEventsFilters",function(){f.getFilters()}),e.$watch(angular.bind(this,function(){return f.distanceValue}),function(){f.saveFiltersDebounce()}),i.$on("eventsFiltersChanged",function(){i.eventsFiltersChanged=!1}),i.$on("distanceUnitChanged",function(e,t){f.distanceUnit=t})}angular.module("icebrak").directive("eventsFilter",e),e.$inject=["$rootScope"],t.$inject=["$scope","$timeout","$rootScope","$window","SettingsRepository","EventsFiltersFactory","EventsFilterRepository","USER_ID","lodash","$log"]}(),function(){function e(e,t,i,s,n){function o(e){s.distance_unit=e,v.filterState.distance_unit=e}function a(){return v.filterState.distance_unit}function r(){function i(e){0===e.objects.length?(v.createFilters(u),v.filterState=u):(v.filterId=e.objects[0].id,v.filterState=e.objects[0],t.info("from service"),t.info(e.objects[0].distance_unit),s.$broadcast("distanceUnitChanged",e.objects[0].distance_unit),s.distance_unit=v.filterState.distance_unit,s.$broadcast("refreshFilters"))}function n(e){var i=(e.data,e.status),n=(e.header,e.config,"Error "+i);t.error(n),v.filterState=u,s.$broadcast("refreshFilters")}return t.info("fetching filters"),e.query({format:"json"}).$promise.then(i,n)}function l(){return v.filterState}function d(i){function n(){v.filterState=i,s.$broadcast("refreshFilters")}function o(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);t.error(s)}return t.info("saving filters"),null!==v.filterId?e.update({filterId:v.filterId},i,n,o):void 0}function c(i){function s(e){t.info("new filters created"),v.filterId=e.id}function n(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);t.error(s)}return t.info("creating filters"),e.save(i,s,n)}var u={distance:1e4,gender:"m,f",min_age:25,max_age:60,keyword:"",distance_unit:"miles",order_criteria:"match_score",user:"/api/v1/auth/user/"+n+"/"},v={filterState:{distance:1e4,gender:"m,f",min_age:25,max_age:60,order_criteria:"match_score",keyword:"",distance_unit:"miles",user:"/api/v1/auth/user/"+n+"/"},filterId:null,getFilters:r,saveFilters:d,createFilters:c,getFilterState:l,setDistanceUnit:o,getDistanceUnit:a};return v}angular.module("icebrak").factory("FilterRepository",e),e.$inject=["FiltersFactory","$log","$filter","$rootScope","USER_ID"]}(),angular.module("icebrak").factory("FiltersFactory",["$resource",function(e){return e("/api/v1/filter/state/:filterId/:param",{filterId:"@filterId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]),function(){function e(){function e(){}var i={controller:t,controllerAs:"filter",bindToController:!0,scope:{id:"@id","class":"@class"},link:e,templateUrl:"components/filter/matchfeedFilter.directive.html",restrict:"E"};return i}function t(e,t,i,s,n,o,a,r,l){function d(){i.$emit("triggerRefreshMatchfeed"),i.$emit("filtersChanged")}function c(){p.currentFilters=a.getFilterState(),p.distanceValue=p.currentFilters.distance,p.distanceUnit=i.distance_unit,p.ageSlider.min=p.currentFilters.min_age,p.ageSlider.max=p.currentFilters.max_age,""!==p.currentFilters.keyword&&void 0!==p.currentFilters.keyword?p.myKeywords=p.currentFilters.keyword.split(","):p.myKeywords.splice(0,p.myKeywords.length),""===p.currentFilters.gender&&(p.male=!1,p.female=!1),"m,f"===p.currentFilters.gender&&(p.male=!0,p.female=!0),"m"===p.currentFilters.gender&&(p.male=!0,p.female=!1),"f"===p.currentFilters.gender&&(p.male=!1,p.female=!0),i.filtersChanged=!0,e.$broadcast("reCalcViewDimensions"),e.$broadcast("rzSliderForceRender")}function u(e,t){if(t===!0)p.gendersArr.push(e);else{var i=p.gendersArr.indexOf(e);p.gendersArr.splice(i,1)}p.gendersArr.sort().reverse(),p.genders=p.gendersArr.join(","),p.saveFiltersDebounce()}function v(){p.newFilters={distance:p.distanceValue,gender:p.genders,order_criteria:p.orderBy,min_age:p.ageSlider.min,max_age:p.ageSlider.max,keyword:0===p.myKeywords.length?"":p.myKeywords.join(),user:"/api/v1/auth/user/"+r+"/"},i.filtersChanged=!0,a.saveFilters(p.newFilters),e.$broadcast("reCalcViewDimensions"),e.$broadcast("rzSliderForceRender")}function m(e){p.myKeywords.splice(e,1),p.saveFilters()}function f(e){if(p.filtermessage="",""===e||void 0===e)p.filtermessage="Keyword must have at least 3 letters",p.showFilterMessage=!0;else if(p.myKeywords.length<5){p.existing=!1;for(var t=p.myKeywords.length-1;t>=0;t--)p.myKeywords[t]===e&&(p.existing=!0);p.existing===!1?(p.myKeywords.push(e),p.saveFilters(),p.newKeyword="",p.showFilterMessage=!1):(p.filtermessage="Keyword already exists",p.showFilterMessage=!0)}else p.filtermessage="You cannot add more than 5 keywords",p.showFilterMessage=!0}var p=this;i.filtersChanged=!1,t(function(){i.filtersChanged=!1,p.changed=!1},1e3),i.$watch("filtersChanged",function(e){p.changed=e}),p.toggleGender=u,p.saveFilters=v,p.saveFiltersDebounce=l.debounce(v,200),p.getFilters=c,p.removeKeyword=m,p.addKeyword=f,p.refreshMatchFeed=d,p.orderByValues=[{name:"Match score",value:"match_score"},{name:"Distance",value:"distance"},{name:"Mutual friends",value:"mutual_friends"}],p.orderBy="match_score",p.distanceValue=1e4,p.distanceUnit="miles",p.male=!1,p.female=!1,p.checkedmale=!1,p.checkedfemale=!1,p.genders="",p.filtermessage="",p.currentFilters=null,p.showFilterMessage=!1,p.ageValues=[25,60],p.ageSlider={min:25,max:60,ceil:115,floor:18},e.$watch(angular.bind(this,function(){return p.distanceValue}),function(){p.saveFiltersDebounce()}),e.$watch(angular.bind(this,function(){return p.ageSlider.min}),function(){p.saveFiltersDebounce()}),e.$watch(angular.bind(this,function(){return p.ageSlider.max}),function(){p.saveFiltersDebounce()}),p.myKeywords=[],p.gendersArr=[],p.getFilters(),i.$on("refreshFilters",function(){p.getFilters()}),i.$on("filtersChanged",function(){i.filtersChanged=!1}),i.$on("distanceUnitChanged",function(e,t){p.distanceUnit=t})}angular.module("icebrak").directive("matchfeedFilter",e),e.$inject=["$rootScope"],t.$inject=["$scope","$timeout","$rootScope","$window","SettingsRepository","FiltersFactory","FilterRepository","USER_ID","lodash","$log"]}(),function(){function e(){function e(){}var i={controller:t,controllerAs:"eventsfeed",bindToController:!0,scope:{id:"@id","class":"@class",header:"@header",body:"@body",type:"@type"},link:e,templateUrl:"components/eventsfeed/eventsfeed.directive.html",restrict:"E"};return i}function t(e,t,i,s,n,o,a,r,l,d,c,u,v,m,f){function p(){b.nextOffset=10,b.next=null,b.loading=!0,b.noEvents=!1,"mynetwork"===b.type&&(b.EventsFeed=a("/api/v1/feed/events/friends/:eventId/:param",{eventId:"@eventId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})),"allevents"===b.type&&(b.EventsFeed=a("/api/v1/feed/events/all/:eventId/:param",{eventId:"@eventId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})),"myevents"===b.type&&(b.EventsFeed=a("/api/v1/feed/events/my/:eventId/:param",{eventId:"@eventId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})),b.EventsFeed.query({format:"json",limit:10,offset:0}).$promise.then(function(e){var t=e.objects;b.events=[],u("orderBy")(t,"starts_on",!0),b.next=e.meta.next,0===e.objects.length&&(b.noEvents=!0);for(var i in t){var s=u("amDateFormat")(t[i].starts_on,"dddd, MMMM Do YYYY"),n=m().format("dddd, MMMM Do YYYY");r.info(n),s===n&&(s="Today");var o=u("amDateFormat")(t[i].starts_on,"L"),a=u("getIndexByProperty")("date",s,b.events);null===a&&(b.events.push({date:s,realDate:o,items:[]}),a=b.events.length-1),b.events[a].items.push({id:t[i].id,name:t[i].name,street:t[i].street,city:t[i].city,state:t[i].state,zipcode:t[i].zipcode,description:t[i].description,location:t[i].location,starts_on:t[i].starts_on,ends_on:t[i].ends_on,full_address:t[i].full_address,location_name:t[i].location_name,country:t[i].country,repeat:t[i].repeat,friend_attendees_count:t[i].friend_attendees_count,cumulative_match_score:t[i].cumulative_match_score,distance:t[i].distance}),b.events[a].items=u("orderBy")(b.events[a].items,"starts_on",!0)}b.events=u("orderBy")(b.events,"starts_on",!0),b.loading=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);r.error(i),b.noEvents=!0,b.loading=!1})}function g(){var e=d.defer();return null===b.next?(e.reject(),e.promise):(b.loadingMore?e.reject():(b.loadingMore=!0,b.EventsFeed.query({format:"json",limit:10,offset:b.nextOffset}).$promise.then(function(t){var i=t.objects;b.nextOffset+=10,u("orderBy")(i,"starts_on",!0),b.next=t.meta.next;for(var s in i){var n=u("amDateFormat")(i[s].starts_on,"dddd, MMMM Do YYYY"),o=m().format("dddd, MMMM Do YYYY");r.info(o),n===o&&(n="Today");var a=u("amDateFormat")(i[s].starts_on,"L"),l=u("getIndexByProperty")("date",n,b.events);null===l&&(b.events.push({date:n,realDate:a,items:[]}),l=b.events.length-1),b.events[l].items.push({id:i[s].id,name:i[s].name,street:i[s].street,city:i[s].city,state:i[s].state,zipcode:i[s].zipcode,description:i[s].description,location:i[s].location,full_address:i[s].full_address,location_name:i[s].location_name,country:i[s].country,starts_on:i[s].starts_on,ends_on:i[s].ends_on,repeat:i[s].repeat,friend_attendees_count:i[s].friend_attendees_count,cumulative_match_score:i[s].cumulative_match_score,distance:i[s].distance}),b.events[l].items=u("orderBy")(b.events[l].items,"starts_on",!0)}b.events=u("orderBy")(b.events,"starts_on",!0),b.loadingMore=!1,e.resolve()},function(t){e.reject();var i=(t.data,t.status),s=(t.header,t.config,"Error "+i);r.error(s),b.loadingMore=!1,e.reject()})),e.promise)}function h(e){var t=angular.element(f);t.width()>767?i.$broadcast("openViewEventModal",e):v.go("event.details",{eventId:e})}var b=this;b.noEvents=!1,b.pok=!1,b.noResults=!1,b.noEvents=!1,b.loading=!1,b.loadingMore=!1,b.nextOffset=10,b.next=null,b.getEvents=p,b.loadMoreEvents=g,b.gotoEvent=h,b.events=[],b.getEvents(),i.$on("refreshEventFeed",function(){$(".right.sidebar.eventsfeedfilter").sidebar("hide"),b.getEvents()})}angular.module("icebrak").directive("eventsFeed",e),t.$inject=["$scope","USER_ID","$rootScope","FeedEventsFriendsFactory","FeedEventsAllFactory","FeedEventsMyFactory","$resource","$log","$timeout","$q","$http","$filter","$state","moment","$window"]}(),angular.module("frontend.semantic.dropdown",[]).controller("DropDownController",["$scope",function(e){e.items=[],this.add_item=function(t){return e.items.push(t),e.items},this.remove_item=function(t){var i=e.items.indexOf(t);-1!==i&&e.items.splice(i,1)},this.update_title=function(t){for(var i in e.items)e.items[i].title=t}}]).directive("dropdown",function(){return{restrict:"E",replace:!0,transclude:!0,controller:"DropDownController",scope:{title:"@",open:"@",model:"=ngModel"},template:'<div class="{{ dropdown_class }}"><div class="default text">{{ title }}</div><i class="dropdown icon"></i><div class="{{ menu_class }}"  ng-transclude></div></div>',link:function(e,t,i,s){e.dropdown_class="ui selection dropdown",e.menu_class="menu transition hidden",e.original_title=e.title,"true"===e.open?(e.is_open=!0,e.dropdown_class=e.dropdown_class+" active visible",e.menu_class=e.menu_class+" visible"):e.is_open=!1,s.add_item(e),e.$watch("title",function(t,i){void 0!==t&&t!==i&&t!==e.original_title&&(e.model=t)}),e.$watch("model",function(t){e.model=t,s.update_title(t||e.original_title)}),t.bind("click",function(){e.is_open===!1?e.$apply(function(){e.dropdown_class="ui selection dropdown active visible",e.menu_class="menu transition visible"}):(e.title!==e.original_title&&(e.model=e.title),e.$apply(function(){e.dropdown_class="ui selection dropdown",e.menu_class="menu transition hidden"})),e.is_open=!e.is_open})}}}).directive("dropdownGroup",function(){return{restrict:"AE",replace:!0,transclude:!0,require:"^dropdown",scope:{title:"=title"},template:'<div class="item" ng-transclude >{{ item_title }}</div>',link:function(e,t,i,s){e.item_title=void 0===e.title?t.children()[0].innerHTML:e.title,t.bind("click",function(){s.update_title(e.item_title)})}}}),angular.module("frontend.semantic.dimmer",[]).directive("pageDimmer",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{show:"=?",model:"=ngModel"},template:'<div class="{{dimmer_class}}" ng-click="click_on_dimmer()"><div class="content"><div class="center" ng-transclude></div></div></div>',link:function(e){1==e.show?e.dimmer_class="ui page inverted active dimmer":(e.show=!1,e.dimmer_class="ui page inverted disable dimmer"),e.click_on_dimmer=function(){e.model=!0,e.show=!0,e.dimmer_class="ui page inverted active dimmer"},e.$watch("model",function(t){return 0==t||void 0==t?(e.show=!1,void(e.dimmer_class="ui page inverted disable dimmer")):void(e.dimmer_class="ui page inverted active dimmer")})}}}),function(){function e(){function e(){}var i={controller:t,controllerAs:"connections",bindToController:!0,scope:{},link:e,template:'<div ng-class="{\'hiddencounter\': connections.hideClass}" class="ui label">{{connections.counter}}</div>',restrict:"E",replace:!0};
return i}function t(e,t,i){function s(){n.counter=0,n.counter=i.getTotalConnections(),n.hideClass=n.counter>0?!1:!0}var n=this;n.counter=0,n.hideClass=!0,n.refreshCounter=s,t.$on("refreshConnectionsCounter",function(){n.refreshCounter()}),n.refreshCounter()}angular.module("icebrak").directive("connectionsCounter",e),t.$inject=["$scope","$rootScope","NotificationsRepository"]}(),function(e){e.module("frontend.ui.tooltips",[]).directive("tooltips",["$window","$compile","$timeout",function(t,i,s){var n=8,o=9,a=10,r="_720kb-tooltip-";return{restrict:"A",scope:{},link:function(l,d,c){var u,v,m,f,p,g,h,b,y=!1,w=e.element(d[0]),_=e.element(t.document.getElementsByTagName("body")[0]),k=c.tooltipTimeout||0,E=c.tooltipTitle||c.title||"",$=c.tooltipContent||"",x=c.tooltipShowTrigger||"mouseover",I=c.tooltipHideTrigger||"mouseleave",M=c.tooltipSide||"top",F=M,S=c.tooltipSize||"medium",T="undefined"!=typeof c.tooltipTry&&null!==c.tooltipTry?l.$eval(c.tooltipTry):!0,C=c.tooltipClass||"",P=(c.tooltipSpeed||"medium").toLowerCase(),A="undefined"!=typeof c.tooltipLazy&&null!==c.tooltipLazy?l.$eval(c.tooltipLazy):!0,D='<div class="_720kb-tooltip '+r+S+'"><div class="'+r+'title"> '+E+"</div>"+$+' <span class="'+r+'caret"></span></div>';l.parseSpeed=function(){switch(P){case"fast":P=100;break;case"medium":P=450;break;case"slow":P=800;break;default:P=Number(P)}},u=i(D)(l),u.addClass(C),_.append(u),l.isTooltipEmpty=function(){return E||$?void 0:!0},l.initTooltip=function(e){l.isTooltipEmpty()||(p=w[0].offsetHeight,g=w[0].offsetWidth,h=l.getRootOffsetTop(w[0],0),b=l.getRootOffsetLeft(w[0],0),v=u[0].offsetHeight,m=u[0].offsetWidth,l.parseSpeed(),l.tooltipPositioning(e))},l.getRootOffsetTop=function(e,t){return null===e.offsetParent?t+e.offsetTop:l.getRootOffsetTop(e.offsetParent,t+e.offsetTop)},l.getRootOffsetLeft=function(e,t){return null===e.offsetParent?t+e.offsetLeft:l.getRootOffsetLeft(e.offsetParent,t+e.offsetLeft)},w.bind(x,function(){A&&y||(y=!0,l.initTooltip(F)),T&&l.tooltipTryPosition(),l.showTooltip()}),w.bind(I,function(){l.hideTooltip()}),l.showTooltip=function(){u.addClass(r+"open"),u.css("transition","opacity "+P+"ms linear"),k>0&&s(function(){l.hideTooltip()},k)},l.hideTooltip=function(){u.css("transition","opacity "+P),u.removeClass(r+"open")},l.removePosition=function(){u.removeClass(r+"left").removeClass(r+"right").removeClass(r+"top").removeClass(r+"bottom ")},l.tooltipPositioning=function(e){l.removePosition();var t,i;"small"===S?f=n:"medium"===S?f=o:"large"===S&&(f=a),"left"===e&&(t=h+p/2-v/2,i=b-(m+f),u.css("top",t+"px"),u.css("left",i+"px"),u.addClass(r+"left")),"right"===e&&(t=h+p/2-v/2,i=b+g+f,u.css("top",t+"px"),u.css("left",i+"px"),u.addClass(r+"right")),"top"===e&&(t=h-f-v,i=b+g/2-m/2,u.css("top",t+"px"),u.css("left",i+"px"),u.addClass(r+"top")),"bottom"===e&&(t=h+p+f,i=b+g/2-m/2,u.css("top",t+"px"),u.css("left",i+"px"),u.addClass(r+"bottom"))},l.tooltipTryPosition=function(){var e=u[0].offsetHeight,i=u[0].offsetWidth,s=u[0].offsetTop,n=u[0].offsetLeft,o=t.outerWidth,a=t.outerHeight,r=o-(i+n),d=a-(e+s),c=w[0].offsetHeight,v=w[0].offsetWidth,m=w[0].offsetLeft,f=w[0].offsetTop,p=o-(m+v),g=a-(c+f),h={left:n,top:s,bottom:d,right:r},b={left:m,right:p,top:f,bottom:g},y=Object.keys(b).reduce(function(e,t){return b[e]>b[t]?e:t}),_=Object.keys(h).reduce(function(e,t){return h[e]<h[t]?e:t});h[_]<5&&(F=y,l.initTooltip(y))},e.element(t).bind("resize",function(){l.hideTooltip(),l.initTooltip(M)})}}}])}(angular),function(){function e(e,t,i,s,n,o,a,r,l){function d(e){v.distanceUnit=e}function c(){l({method:"POST",url:"/accounts/deactivate/",headers:{"Content-Type":"application/x-www-form-urlencoded"}}),r.location.href="/accounts/logout",r.location.assign()}function u(){function e(){i.setDistanceUnit(v.distanceUnit),v.loadingSave=!1,v.userSettingsChanged=!1}function n(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);o.error(i),v.loadingSave=!1,v.userSettingsChanged=!0}v.loadingSave=!0,t.update({filterId:v.filterId},{distance_unit:v.distanceUnit,user:"/api/v1/auth/user/"+s+"/"},e,n)}var v=this;v.userSettingsChanged=!1,a(function(){v.filterId=i.filterId,v.userSettingsChanged=!1},1e3),v.setUnit=d,v.saveSettings=u,v.deleteUser=c,v.loadingSave=!1;var m=!1;v.distanceUnit=e.distance_unit,e.$on("distanceUnitChanged",function(e,t){v.distanceUnit=t,o.info("from controller"),o.info(t),v.userSettingsChanged=!1}),n.$watch(angular.bind(v,function(){return v.distanceUnit}),function(e){o.info("from watch"),o.info(e),m===!1?m=!0:v.userSettingsChanged=!0})}angular.module("icebrak").controller("SettingsController",e),e.$inject=["$rootScope","FiltersFactory","FilterRepository","USER_ID","$scope","$log","$timeout","$window","$http"]}(),angular.module("icebrak").controller("OfferCreateCtrl",["$scope","$http","$rootScope","APP_ID","$state","$log","OffersFactory","SubjectsFactory","USER_ID","$filter",function(e,t,i,s,n,o,a,r,l){e.subject="",e.resourceUri=null,e.messageShow=!1,e.message="",e.userUri="/api/v1/auth/user/"+l+"/",e.inputChanged=function(t){e.subject=t},e.selectResult=function(t){void 0!==t?(e.subject=t.originalObject.description,e.resourceUri=t.originalObject.resource_uri):e.resourceUri=null},e.saveOffer=function(){var r={offer_subject:e.subject,user:e.userUri};a.save({},r,function(){var e="https://graph.facebook.com/v2.3/"+s+"/activities?access_token="+i.fbAuth.accessToken,a=Math.round(+new Date/1e3),r={event:"CUSTOM_APP_EVENTS",application_tracking_enabled:1,advertiser_tracking_enabled:0,custom_events:[{_eventName:"Onboarding flow user created offer",_appVersion:"0.0.1",_logTime:a,fb_content_type:"Onboarding flow"}]};t.post(e,r).success(function(){o.info("FB activity post success")}).error(function(){o.error("FB activity post failure")}),n.go("finalstep")},function(t){e.resourceUri=null,e.messageShow=!0,e.message=t.data.offer?t.data.offer.error[0]:"There was an error when trying to save your offer."})},e.createOffer=function(){return e.messageShow=!1,e.message="",""===e.subject?(e.message="Entering your offer is required to continue.",e.messageShow=!0,!1):e.subject.length>300?(e.message="Offer cannot have more than 300 characters.",e.messageShow=!0,!1):void e.saveOffer()}}]),function(){function e(e,t,i){var s=this;s.user={id:t,photo:i}}angular.module("icebrak").controller("MyProfileController",e),e.$inject=["$scope","USER_ID","USER_PHOTO","$log"]}(),function(){function e(e,t,i,s,n,o,a,r,l,d,c,u){function v(){g.q="",g.getFriends()}function m(){g.nextOffset=10,g.next=null,g.loading=!0,n.query({format:"json",first_name:g.q,limit:10,offset:0}).$promise.then(function(e){if(g.friends=e.objects,g.next=e.meta.next,0===g.friends.length)g.pok?g.noResults=!0:(g.noConnections=!0,g.pok=!0);else{g.pok=!0,g.noResults=!1,g.noConnections=!1;for(var t in g.friends)g.friends[t].totalFriends=0,g.friends[t].totalFriends+=g.friends[t].mutual_bk_friends_count,g.friends[t].totalFriends+=g.friends[t].mutual_fb_friends_count,g.friends[t].totalFriends+=g.friends[t].mutual_linkedin_connections_count,g.friends[t].totalFriends+=g.friends[t].mutual_twitter_friends_count,g.friends[t].totalFriends+=g.friends[t].mutual_twitter_followers_count}g.loading=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);o.error(i),g.noConnections=!0,g.loading=!1})}function f(){var e=r.defer();return null===g.next?(e.reject(),e.promise):(g.loadingMore?e.reject():(g.loadingMore=!0,n.query({format:"json",limit:10,first_name:g.q,offset:g.nextOffset}).$promise.then(function(t){var i=t.objects;g.next=t.meta.next,g.nextOffset+=10;for(var s in i)i[s].totalFriends=0,i[s].totalFriends+=i[s].mutual_bk_friends_count,i[s].totalFriends+=i[s].mutual_fb_friends_count,i[s].totalFriends+=i[s].mutual_linkedin_connections_count,i[s].totalFriends+=i[s].mutual_twitter_friends_count,i[s].totalFriends+=i[s].mutual_twitter_followers_count,g.friends.push(i[s]);g.loadingMore=!1,e.resolve()},function(t){e.reject();var i=(t.data,t.status),s=(t.header,t.config,"Error "+i);o.error(s),g.loadingMore=!1})),e.promise)}function p(e){null===g.friends[e].updated_at?l.get("/api/v1/new_connections/updated_at/?format=json&friend_id="+g.friends[e].friend_id).success(function(){u.refreshTotalConnections(),c.go("friendprofile",{userId:g.friends[e].friend_id})}).error(function(){c.go("friendprofile",{userId:g.friends[e].friend_id})}):c.go("friendprofile",{userId:g.friends[e].friend_id})}var g=this;g.friends=[],g.q="",g.noConnections=!1,g.pok=!1,g.noResults=!1,g.loading=!1,g.loadingMore=!1,g.nextOffset=10,g.next=null,g.getFriends=m,g.loadMoreFriends=f,g.gotoConnection=p,g.reset=v,g.getFriends()}angular.module("icebrak").controller("MyConnectionsController",e),e.$inject=["$scope","FriendsFactory","USER_ID","$resource","ConnectionsFactory","$log","$timeout","$q","$http","$filter","$state","NotificationsRepository"]}(),angular.module("icebrak").factory("MatchFeedFactory",["$resource",function(e){return e("/api/v1/matchfeed/:matchId/:param",{matchId:"@matchId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]),function(){function e(){}angular.module("icebrak").controller("MatchFeedController",e),e.$inject=["$scope","$log","$timeout"]}(),angular.module("icebrak").controller("MainCtrl",["$scope",function(e){e.greetingMessage="Welcome to"}]),function(){function e(e,t,i,s,n,o,a,r,l,d,c,u,v,m,f,p){function g(){if(_.counter>0){var e="https://graph.facebook.com/v2.3/"+s+"/activities?access_token="+t.fbAuth.accessToken,n=Math.round(+new Date/1e3),r={event:"CUSTOM_APP_EVENTS",application_tracking_enabled:1,advertiser_tracking_enabled:0,custom_events:[{_eventName:"Onboarding flow user created interests",_appVersion:"0.0.1",_logTime:n,fb_content_type:"Onboarding flow"}]};i.post(e,r).success(function(){o.info("FB activity post success")}).error(function(){o.error("FB activity post failure")}),u.go("goalcreate")}else a({messageTemplate:'<div class="notify-info-header">Warning</div><p>To continue please select at least one interest.</p>',scope:f,classes:"notify-info",icon:"warning circle",duration:4e3})}function h(){_.searchQuery="",_.getAllInterests(),_.noResults=!1}function b(){_.userInterests=[],k.width()>400&&(_.limit=400),_.nextOffset=100,_.next=null,_.noResults=!1,_.loadingInterests=!0,_.allInterests.splice(0,_.allInterests.length),e.query({user_id:r,format:"json",limit:200,offset:0}).$promise.then(function(e){_.counter=e.meta.total_count,e.objects.length>0&&(_.userInterests=e.objects),n.query({format:"json",limit:_.limit,description__icontains:_.searchQuery,offset:0}).$promise.then(function(e){_.next=e.meta.next;var t=e.objects;if(t.length>0)for(var i=t.length-1;i>=0;i--){t[i].active=!1,t[i].interest_resource=null;for(var s=_.userInterests.length-1;s>=0;s--)t[i].resource_uri===_.userInterests[s].interest&&(t[i].interest_resource=_.userInterests[s].resource_uri,t[i].active=!0);_.allInterests.push(t[i])}else _.allInterests.splice(0,_.allInterests.length),_.noResults=!0;_.loadingInterests=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);o.error(i),_.loadingInterests=!1})},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);o.error(i),_.loadingInterests=!1})}function y(){var t=v.defer();return _.loadingMore?t.reject():null!==_.next?(_.loadingMore=!0,d(function(){e.query({user_id:r,format:"json",limit:200,offset:0}).$promise.then(function(e){_.counter=e.meta.total_count,e.objects.length>0&&(_.userInterests=e.objects),n.query({format:"json",description__icontains:_.searchQuery,offset:_.nextOffset,limit:30}).$promise.then(function(e){var i=e.objects;_.next=e.meta.next,_.nextOffset+=30,e.objects.length>0&&(i=e.objects);for(var s=i.length-1;s>=0;s--){i[s].active=!1,i[s].interest_resource=null;for(var n=_.userInterests.length-1;n>=0;n--)i[s].resource_uri===_.userInterests[n].interest&&(i[s].interest_resource=_.userInterests[n].resource_id,i[s].active=!0);_.allInterests.push(i[s])}_.loadingMore=!1,t.resolve()},function(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);o.error(s),_.loadingMore=!1,t.reject()})},function(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);o.error(s),t.reject()})},400)):t.reject(),t.promise}function w(t){var i=_.allInterests[t];if(i)if(i.active){var s=c(i.interest_resource);i.loading=!0,s.delete().$promise.then(function(){i.active=!1,i.interest_resource=null,_.counter--,i.loading=!1},function(e){var t=(e.data,e.status),s=(e.header,e.config,"Error "+t);o.error(s),i.loading=!1,i.error=!0})}else if(_.counter>=10)a({messageTemplate:'<div class="notify-info-header">Warning</div><p>Please select up to 10 interests.</p>',scope:f,classes:"notify-info",icon:"warning circle"});else{var n={interest_subject:i.description,user:_.userUri};i.loading=!0,e.save({},n,function(e){i.loading=!1,i.error=!1,i.interest_resource=e.resource_uri,i.active=!0,_.counter++},function(e){i.errorMessage=e.data.interest.error[0],a({messageTemplate:'<div class="notify-info-header">Error</div><p>'+i.errorMessage+"</p>",scope:f,classes:"notify-info",icon:"warning circle"}),i.loading=!1,i.error=!0})}}var _=this;_.useInterest=w,_.getAllInterests=b,_.nextStep=g,_.searchQuery="",_.userUri="/api/v1/auth/user/"+r+"/",_.next=null,_.nextOffset=100,_.loadingMore=!1,_.noResults=!1,_.reset=h,_.loadMoreInterests=y,_.allInterests=[],_.counter=0,_.loadingInterests=!1,_.userInterests=[];var k=angular.element(p);_.limit=100,_.getAllInterests()}angular.module("icebrak").controller("InterestsController",e),e.$inject=["InterestsFactory","$rootScope","$http","APP_ID","InterestSubjectFactory","$log","notify","USER_ID","$filter","$timeout","$resource","$state","$q","lodash","$scope","$window"]}(),function(){function e(e,t,i,s,n,o){function a(){function t(e){v.inboxMessages.splice(0,v.inboxMessages.length),v.next=e.meta.next,v.total=e.meta.total,v.nextOffset=10;var t=e.objects,i=0;for(var n in t)null===t[n].read_at&&null!==t[n].last_message_body&&i++,v.inboxMessages.push({firstName:t[n].first_name,friendId:t[n].friend_id,facebookId:t[n].facebook_id,sentAt:s("amDateFormat")(t[n].sent_at,"h:mm a"),readAt:t[n].read_at,id:t[n].id,body:t[n].last_message_body});v.unreadMessagesCounter=i}function n(e){v.inboxMessages.splice(0,v.inboxMessages.length);var t=(e.data,e.status),s=(e.header,e.config,"Error "+t);i.error(s)}return i.info("fetching inbox"),e.query({format:"json",limit:v.limit,offset:0}).$promise.then(t,n)}function r(){return v.unreadMessagesCounter}function l(){return v.inboxMessages}function d(e){v.next=e.meta.next,v.nextOffset+=v.pageSize;var t=e.objects,i=0;for(var n in t)null===t[n].read_at&&null!==t[n].last_message_body&&i++,v.inboxMessages.push({firstName:t[n].first_name,friendId:t[n].friend_id,facebookId:t[n].facebook_id,sentAt:s("amDateFormat")(t[n].sent_at,"h:mm a"),readAt:t[n].read_at,id:t[n].id,body:t[n].last_message_body});v.unreadMessagesCounter+=i,v.loadingMore=!1,deferred.resolve()}function c(e){var t=(e.data,e.status),s=(e.header,e.config,"Error "+t);i.error(s),v.loadingMore=!1,deferred.reject()}function u(){console.log("loading more messages in inbox");var t=o.defer();return null===v.next?(t.reject(),t.promise):(v.loadingMore?t.reject():(v.loadingMore=!0,e.query({format:"json",limit:10,offset:v.nextOffset}).$promise.then(d,c)),t.promise)}var v={getInboxMessages:a,getUnreadMessagesCounter:r,getAllMessages:l,loadMore:u,unreadMessagesCounter:0,inboxMessages:[],limit:10,offset:0,nextOffset:10,next:null,total:0,pageSize:10,loadingMore:!1};return v}angular.module("icebrak").factory("InboxRepository",e),e.$inject=["InboxFactory","NotificationsRepository","$log","$filter","$rootScope","$q"]}(),function(){function e(e,t,i,s){function n(){function e(){r.loadingMessages=!1,r.loadInbox()}function t(){r.loadingMessages=!1}r.loadingMessages=!0,s.getInboxMessages().then(e,t)}function o(){r.allMessages=s.getAllMessages()}function a(){function e(){r.loadingMore=!1}function t(){r.loadingMore=!1}r.loadingMore=!0,s.loadMore().then(e,t)}var r=this;r.allMessages=[],r.loadInbox=o,r.loadMore=a,r.refresh=n,r.loadingMessages=!1,r.loadingMore=!1,r.q="",r.refresh()}angular.module("icebrak").controller("InboxController",e),e.$inject=["$scope","$rootScope","$log","InboxRepository","$q"]}(),angular.module("icebrak").controller("GoalCreateCtrl",["$scope","$http","$rootScope","APP_ID","$state","$log","GoalsFactory","SubjectsFactory","USER_ID",function(e,t,i,s,n,o,a,r,l){e.subject="",e.resourceUri=null,e.messageShow=!1,e.message="",e.userUri="/api/v1/auth/user/"+l+"/",e.inputChanged=function(t){e.subject=t},e.selectResult=function(t){void 0!==t?(e.subject=t.originalObject.description,e.resourceUri=t.originalObject.resource_uri):e.resourceUri=null},e.saveGoal=function(){var r={goal_subject:e.subject,user:e.userUri};a.save({},r,function(){var e="https://graph.facebook.com/v2.3/"+s+"/activities?access_token="+i.fbAuth.accessToken,a=Math.round(+new Date/1e3),r={event:"CUSTOM_APP_EVENTS",application_tracking_enabled:1,advertiser_tracking_enabled:0,custom_events:[{_eventName:"Onboarding flow user created goal",_appVersion:"0.0.1",_logTime:a,fb_content_type:"Onboarding flow"}]};t.post(e,r).success(function(){o.info("FB activity post success")}).error(function(){o.error("FB activity post failure")}),n.go("offercreate")},function(t){e.resourceUri=null,e.messageShow=!0,e.message=t.data.goal?t.data.goal.error[0]:"There was an error when trying to save your goal."})},e.createGoal=function(){return e.messageShow=!1,e.message="",""===e.subject?(e.message="Entering your goal is required to continue.",e.messageShow=!0,!1):e.subject.length>300?(e.message="Goal cannot have more than 300 characters.",e.messageShow=!0,!1):void e.saveGoal()}}]),function(){function e(e,t,i,s,n,o,a){function r(){a.update({friendId:l.friendshipId},{status:-1},function(){InboxRepository.getInboxMessages(),o.go("myconnections")},function(){})}var l=this;l.userInfo={id:t,photo:"//graph.facebook.com/"+s.facebook_id+"/picture?type=large"},l.middleActive=!0,l.friendshipId=i.objects[0].id,l.unFriend=r}angular.module("icebrak").controller("FriendProfileController",e),e.$inject=["$scope","userId","Connection","UserProfile","$log","$state","FriendsFactory"]}(),function(){function e(e,t,i,s){function n(e){var t=400,i=300,s=void 0!==window.screenLeft?window.screenLeft:screen.left,n=void 0!==window.screenTop?window.screenTop:screen.top,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,r=o/2-t/2+s,l=a/2-i/2+n,d="height="+i+",width="+t+",left="+r+",top="+l+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=yes,directories=no,status=yes",c="/social/associate/"+e+"/?next=/goals/close_login_popup",u=window.open(c,"Connecting...",d);window.focus&&u.focus()}function o(){a.loading=!0,i.get({format:"json"},{userId:t}).$promise.then(function(e){null!==e.linkedin_provider&&(a.linkedin=e.linkedin_provider),null!==e.twitter_provider&&(a.twitter=e.twitter_provider),a.firstName=e.first_name,a.loading=!1})}var a=this;a.loading=!1,a.link=n,a.refreshUser=o,a.twitter="",a.linkedin="",a.firstName=s.first_name,null!==s.linkedin_provider&&(a.linkedin=s.linkedin_provider),null!==s.twitter_provider&&(a.twitter=s.twitter_provider)}e.$inject=["$log","USER_ID","UsersFactory","User"],angular.module("icebrak").controller("FinalStepController",e)}(),function(){function e(e,t,i,s,n,o,a,r,l,d){function c(e){var i={event:"/api/v1/event/"+m.event.id+"/",rsvp:e,user:"/api/v1/auth/user/"+t+"/"};m.eventRsvp.status!==e&&(m.memberExists?(m.eventRsvp.status=e,d.update({memberId:m.memberId},i,function(){for(var i=m.event.members.length-1;i>=0;i--)m.event.members[i].user==="/api/v1/auth/user/"+t+"/"&&(m.event.members[i].rsvp=e)},function(){})):(m.eventRsvp.status=e,d.save({},i,function(e){a.info(e),m.memberExists=!0,m.event.members.push(e),m.memberId=e.id},function(e){a.info(e)})))}function u(){a.info("getting event: "+n),m.loadingEvent=!0,i.query({format:"json"},{eventId:n}).$promise.then(function(i){if(m.eventNotFound=!1,m.event=i,m.eventLocation="",m.mapurlTrue=!1,m.mapurl="","0,0"!==m.event.location?(m.eventLocation=""!==m.event.full_address&&null!==m.event.full_address?m.event.full_address:m.event.street+" "+m.event.city+" "+m.event.zipcode+" "+m.event.state,m.mapurl="https://www.google.com/maps/search/"+encodeURIComponent(m.eventLocation)+"/@"+m.event.location+",15z",m.mapurlTrue=!0):(m.mapurlTrue=!1,m.mapurl="",m.eventLocation=m.event.location_name),m.starts_on_date=moment.utc(m.event.starts_on,moment.ISO_8601).local().format("dddd, MMMM D, YYYY"),m.ends_on_date=moment.utc(m.event.ends_on,moment.ISO_8601).local().format("dddd, MMMM D, YYYY"),m.starts_on_time=moment.utc(m.event.starts_on,moment.ISO_8601).local().format("H:mm A"),m.ends_on_time=moment.utc(m.event.ends_on,moment.ISO_8601).local().format("H:mm A ")+moment.tz(l.timezone).format("z"),m.ends_on_date!==m.starts_on_date?(m.firstrow=m.starts_on_date+" "+m.starts_on_time,m.secondrow=m.ends_on_date+" "+m.ends_on_time):(m.firstrow=m.starts_on_date,m.secondrow=m.starts_on_time+" to "+m.ends_on_time),m.isHost=!1,e.eventpage.isHost.option=!1,e.eventpage.eventId=m.event.id,m.eventRsvp={status:""},m.memberExists=!1,m.memberId=null,m.event.members.length>0)for(var s=m.event.members.length-1;s>=0;s--)m.event.members[s].is_organizer===!0?m.event.members[s].user==="/api/v1/auth/user/"+t+"/"&&(m.isHost=!0,e.eventpage.isHost.option=!0):m.event.members[s].user==="/api/v1/auth/user/"+t+"/"&&(m.memberId=m.event.members[s].id,null!==m.event.members[s].rsvp&&(m.eventRsvp.status=m.event.members[s].rsvp),m.memberExists=!0);m.loadingEvent=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);m.loadingEvent=!1,a.error(i),m.eventNotFound=!0})}function v(){""!==m.mapurl&&r.open(m.mapurl)}var m=this;m.showMobile=!0,m.mapurl="",m.mapurlTrue=!1,m.event={},m.eventNotFound=!1,m.eventLocation="",m.placeholder={name:"Event Name",starts:"Starts",ends:"Ends",repeat:"Repeat",location:"Location",description:"Description",costs:"Costs",invitations:"Invitations",attachments:"Attachments"},m.eventRsvp={status:""},m.changeRsvpStatus=c,m.openMap=v,m.getEvent=u,e.$on("goBackEvents",function(){a.info(o.previousEventFeed),s.go(void 0!==o.previousEventFeed?o.previousEventFeed:"events.myevents")}),m.isHost=null,m.getEvent()}angular.module("icebrak").controller("EventViewController",e),e.$inject=["$scope","USER_ID","EventsFactory","$state","eventId","$rootScope","$log","$window","angularMomentConfig","MembersFactory"]}(),function(){function e(e,t,i,s){function n(){l.showModal=!0}function o(){l.showModal=!1}function a(){l.showViewModal=!0}function r(){l.showViewModal=!1}var l=this;$(".ui.dimmer.modals").remove(),l.viewEvent=null,l.showModal=!1,l.showViewModal=!1,l.showEventModal=n,l.closeEventModal=o,l.showEventViewModal=a,l.closeEventViewModal=r,t.$on("closeModalCreateEvent",function(){l.closeEventModal(),s.is("events.myevents")?t.$broadcast("refreshEventFeed"):s.go("events.myevents")}),t.$on("openViewEventModal",function(e,t){l.viewEvent=t,l.showEventViewModal()})}angular.module("icebrak").controller("EventsPageController",e),e.$inject=["$scope","$rootScope","$log","$state","$timeout"]}(),function(){function e(e,t,i,s){function n(){"event.edit"===s.current.name&&(i.info("Saving modified event"),e.$broadcast("saveChangedEvent")),"event.create"===s.current.name&&(i.info("Saving new event"),e.$broadcast("saveEvent")),"event.details"===s.current.name&&s.go("event.edit",{eventId:a.eventId})}function o(){e.$broadcast("goBackEvents")}var a=this;a.eventId=null,a.isHost={option:!1},$(".ui.dimmer.modals").remove(),a.makeactionEvent=n,a.gotoPreviousState=o}angular.module("icebrak").controller("EventPageController",e),e.$inject=["$scope","$rootScope","$log","$state"]}(),function(){function e(e,t,i,s,n,o,a,r,l,d,c,u){function v(){_.showError=!1,i.delete({eventId:_.eventEdit.id},function(){_.showError=!1,c({messageTemplate:'<div class="notify-info-header">Success</div><p>Event has been successfully deleted.</p>',classes:"notify-info",icon:"check circle",duration:4e3}),s.go(void 0!==o.previousEventFeed?o.previousEventFeed:"events.myevents")},function(e){_.errorMessage=[],_.showError=!0,e.data.event&&(_.errorMessage=["Event could not be deleted."])})}function m(){a.info("getting event: "+n),_.pok=0,_.loadingEvent=!0,i.query({format:"json"},{eventId:n}).$promise.then(function(i){if(_.eventEdit=i,_.eventLocation="",_.mapurlTrue=!1,_.mapurl="","0,0"!==_.eventEdit.location?(_.eventLocation=""!==_.eventEdit.full_address&&null!==_.eventEdit.full_address?_.eventEdit.full_address:_.eventEdit.street+" "+_.eventEdit.city+" "+_.eventEdit.zipcode+" "+_.eventEdit.state,_.mapurl="https://www.google.com/maps/search/"+encodeURIComponent(_.eventLocation)+"/@"+_.eventEdit.location+",15z",_.mapurlTrue=!0):(_.mapurlTrue=!1,_.mapurl="",_.eventLocation=_.eventEdit.location_name),_.eventEdit.starts_on=l.utc(_.eventEdit.starts_on,l.ISO_8601).local().toDate(),_.eventEdit.ends_on=l.utc(_.eventEdit.ends_on,l.ISO_8601).local().toDate(),_.isHost=!1,e.eventpage.isHost.option=!1,_.eventEdit.members.length>0)for(var s=_.eventEdit.members.length-1;s>=0;s--)_.eventEdit.members[s].is_organizer===!0&&_.eventEdit.members[s].user==="/api/v1/auth/user/"+t+"/"&&(_.isHost=!0,e.eventpage.isHost.option=!0);_.loadingEvent=!1},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);_.loadingEvent=!1,a.error(i)})}function f(){return""===_.eventEdit.ends_on||null===_.eventEdit.ends_on?void(_.eventEdit.ends_on=l(_.eventEdit.starts_on).add(1,"hour").toDate()):void(l(_.eventEdit.ends_on)>=l(_.eventEdit.starts_on)&&(_.eventEdit.ends_on=l(_.eventEdit.starts_on).add(1,"hour").toDate()))}function p(){return""===_.eventEdit.starts_on||null===_.eventEdit.starts_on?void(_.eventEdit.starts_on=l(_.eventEdit.ends_on).subtract(1,"hour").toDate()):void 0}function g(){return _.startsTimeError=!1,_.endsTimeError=!1,l(_.eventEdit.starts_on).unix()<l().unix()?(a.info("start date is not valid"),_.showError=!0,_.errorMessage=["Please select a Starts Date that is not set in past."],void(_.startsTimeError=!0)):(a.info("start date is OK"),_.showError=!1,_.errorMessage=[],_.startsTimeError=!1,l(_.eventEdit.ends_on).unix()<l().unix()?(a.info("end date is not valid"),_.showError=!0,_.errorMessage=["Please select an Ends Date that is not set in past."],void(_.endsTimeError=!0)):l(_.eventEdit.ends_on).unix()>l().unix()&&l(_.eventEdit.starts_on).unix()>l().unix()&&l(_.eventEdit.starts_on).unix()>l(_.eventEdit.ends_on).unix()?(a.info("end date is not ok"),_.showError=!0,_.errorMessage=["Ends Date must be greater or equal to Starts Date."],_.endsTimeError=!0,void(_.startsTimeError=!0)):(a.info("end date is OK"),_.showError=!1,_.errorMessage=[],_.startsTimeError=!1,_.endsTimeError=!1,void 0))}function h(){_.showError=!1,_.showSuccess=!1,$(".ui.form").form({name:{identifier:"name",rules:[{type:"empty",prompt:"Please enter Event name"}]},location:{identifier:"location",rules:[{type:"empty",prompt:"Please enter Location"}]},repeat:{identifier:"repeat",rules:[{type:"empty",prompt:"Please enter Repeat"}]},description:{identifier:"description",rules:[{type:"empty",prompt:"Please enter Description"}]}}),$(".ui.form").form("validate form"),""===_.eventEdit.description||""===_.eventEdit.ends_on||null===_.eventEdit.ends_on||null===_.eventEdit.starts_on||""===_.eventEdit.location||""===_.eventEdit.name||""===_.eventEdit.starts_on||""===_.eventEdit.repeat?(_.showError=!0,(""===_.eventEdit.starts_on||null===_.eventEdit.starts_on)&&(_.startsTimeError=!0),(""===_.eventEdit.ends_on||null===_.eventEdit.ends_on)&&(_.endsTimeError=!0),_.errorMessage=["Please enter all required fields."]):(_.showError=!1,_.validateDates(),a.info("started saving event"),_.showSuccess=!1,_.showError||i.update({eventId:_.eventEdit.id},_.eventEdit,function(){_.showError=!1,c({messageTemplate:'<div class="notify-info-header">Success</div><p>All changes have been saved.</p>',classes:"notify-info",icon:"check circle",duration:4e3}),s.go("event.details",{eventId:_.eventEdit.id})},function(e){_.errorMessage=[],_.showError=!0,e.data.event&&(_.errorMessage=e.data.event.error)}))}function b(e,t,i){for(var s=0;s<e.length;s++)for(var n=0;n<e[s].types.length;n++)if(e[s].types[n]===t)return e[s][i];return""}function y(){if(a.info("parsing location"),null!==_.eventLocation&&"object"==typeof _.eventLocation&&_.eventLocation.hasOwnProperty("address_components")&&_.eventLocation.hasOwnProperty("geometry")){var e=_.eventLocation.address_components;_.eventEdit.street=_.extractFromAddress(e,"route","long_name")+" "+_.extractFromAddress(e,"street_number","long_name"),_.eventEdit.zipcode=_.extractFromAddress(e,"postal_code","long_name"),""===_.eventEdit.zipcode&&(_.eventEdit.zipcode=null),_.eventEdit.location_name=_.eventLocation.name,_.eventEdit.full_address=_.eventLocation.formatted_address,_.eventEdit.state=_.extractFromAddress(e,"administrative_area_level_1","short_name"),_.eventEdit.country=_.extractFromAddress(e,"country","short_name"),_.eventEdit.city=_.extractFromAddress(e,"locality","long_name"),_.eventEdit.state.length>3&&(_.eventEdit.state=_.eventEdit.country),_.eventEdit.location=_.eventLocation.geometry.location.A+","+_.eventLocation.geometry.location.F,_.mapurl="https://www.google.com/maps/search/"+encodeURIComponent(_.eventLocation.formatted_address)+"/@"+_.eventEdit.location+",15z",_.mapurlTrue=!0,a.info(_.mapurl)}else{if(!(_.pok>2))return void _.pok++;_.eventEdit.full_address="",_.eventEdit.location_name=_.eventLocation,_.eventEdit.location="0,0",_.eventEdit.address=_.eventLocation}}function w(){""!==_.mapurl&&r.open(_.mapurl)}var _=this;_.showError=!1,_.showMobile=!0,_.showSuccess=!1,_.errorMessage=[],_.mapurl="",_.mapurlTrue=!1,_.endsTimeError=!1,_.startsTimeError=!1,_.eventEdit={user:"/api/v1/auth/user/"+t+"/",description:"",ends_on:"",location:"",name:"",repeat:"",starts_on:"",street:"",city:"",zipcode:null,state:"",full_address:"",location_name:"",country:""},_.eventLocation="",_.placeholder={name:"Event Name",starts:"Starts",ends:"Ends",repeat:"Repeat",location:"Location",description:"Description",costs:"Costs",invitations:"Invitations",attachments:"Attachments"},_.$geolocation=u,u.getCurrentPosition({enableHighAccuracy:!0,timeout:6e4,maximumAge:2}).then(function(e){_.autocompleteOptions={location:new google.maps.LatLng(e.coords.latitude,e.coords.longitude),radius:5e4}}),_.autocompleteOptions={location:"0,0",radius:5e4},_.saveEvent=h,_.deleteEvent=v,_.openMap=w,_.extractFromAddress=b,_.parseLocation=y,_.validateDates=g,_.getEvent=m,_.getEvent(),e.$on("saveChangedEvent",function(){a.info("saveChangedEvent"),_.saveEvent()}),e.$on("goBackEvents",function(){s.go("event.details",{eventId:_.eventEdit.id})}),_.checkDatesStarts=f,_.checkDatesEnds=p,e.$watch(angular.bind(this,function(){return _.eventLocation}),function(){_.parseLocation()}),_.pok=0}angular.module("icebrak").controller("EventEditController",e),e.$inject=["$scope","USER_ID","EventsFactory","$state","eventId","$rootScope","$log","$window","moment","angularMomentConfig","notify","$geolocation"]}(),function(){function e(e,t,i,s,n,o,a,r,l){function d(){return""===h.event.ends_on||null===h.event.ends_on?void(h.event.ends_on=r(h.event.starts_on).add(1,"hour").toDate()):void(r(h.event.ends_on)>=r(h.event.starts_on)&&(h.event.ends_on=r(h.event.starts_on).add(1,"hour").toDate()))}function c(){return""===h.event.starts_on||null===h.event.starts_on?void(h.event.starts_on=r(h.event.ends_on).subtract(1,"hour").toDate()):void 0}function u(){return h.startsTimeError=!1,h.endsTimeError=!1,r(h.event.starts_on).unix()<r().unix()?(o.info("start date is not valid"),h.showError=!0,h.errorMessage=["Please select a Starts Date that is not set in past."],void(h.startsTimeError=!0)):(o.info("start date is OK"),h.showError=!1,h.errorMessage=[],h.startsTimeError=!1,r(h.event.ends_on).unix()<r().unix()?(o.info("end date is not valid"),h.showError=!0,h.errorMessage=["Please select an Ends Date that is not set in past."],void(h.endsTimeError=!0)):r(h.event.ends_on).unix()>r().unix()&&r(h.event.starts_on).unix()>r().unix()&&r(h.event.starts_on).unix()>r(h.event.ends_on).unix()?(o.info("end date is not ok"),h.showError=!0,h.errorMessage=["Ends Date must be greater or equal to Starts Date."],h.endsTimeError=!0,void(h.startsTimeError=!0)):(o.info("end date is OK"),h.showError=!1,h.errorMessage=[],h.startsTimeError=!1,h.endsTimeError=!1,void 0))
}function v(){h.showError=!1,h.showSuccess=!1,$(".ui.form").form({name:{identifier:"name",rules:[{type:"empty",prompt:"Please enter Event name"}]},location:{identifier:"location",rules:[{type:"empty",prompt:"Please enter Location"}]},repeat:{identifier:"repeat",rules:[{type:"empty",prompt:"Please enter Repeat"}]},description:{identifier:"description",rules:[{type:"empty",prompt:"Please enter Description"}]},starts_on_date:{identifier:"starts_on_date",rules:[{type:"empty",prompt:"Please enter Starts Date"}]},starts_on_time:{identifier:"starts_on_time",rules:[{type:"empty",prompt:"Please enter Starts Time"}]},ends_on_date:{identifier:"ends_on_date",rules:[{type:"empty",prompt:"Please enter Ends Date"}]},ends_on_time:{identifier:"ends_on_time",rules:[{type:"empty",prompt:"Please enter Ends Time"}]}}),$(".ui.form").form("validate form"),""===h.event.description||""===h.event.ends_on||null===h.event.ends_on||null===h.event.starts_on||""===h.event.location||""===h.event.name||""===h.event.starts_on||""===h.event.repeat?(h.showError=!0,(""===h.event.starts_on||null===h.event.starts_on)&&(h.startsTimeError=!0),(""===h.event.ends_on||null===h.event.ends_on)&&(h.endsTimeError=!0),h.errorMessage=["Please enter all required fields."]):(h.showError=!1,h.validateDates(),o.info("started saving event"),h.showSuccess=!1,h.showError||i.save({},h.event,function(){h.showError=!1,s.go("events.myevents")},function(e){h.errorMessage=[],h.showError=!0,e.data.event&&(h.errorMessage=e.data.event.error)}))}function m(e,t,i){for(var s=0;s<e.length;s++)for(var n=0;n<e[s].types.length;n++)if(e[s].types[n]===t)return e[s][i];return""}function f(){if(h.mapurl="",h.mapurlTrue=!1,o.info("parsing location"),null!==h.eventLocation&&"object"==typeof h.eventLocation&&h.eventLocation.hasOwnProperty("address_components")&&h.eventLocation.hasOwnProperty("geometry")){var e=h.eventLocation.address_components;h.event.street=h.extractFromAddress(e,"route","long_name")+" "+h.extractFromAddress(e,"street_number","long_name"),h.event.zipcode=h.extractFromAddress(e,"postal_code","long_name"),""===h.event.zipcode&&(h.event.zipcode=null),h.event.location_name=h.eventLocation.name,h.event.full_address=h.eventLocation.formatted_address,h.event.state=h.extractFromAddress(e,"administrative_area_level_1","short_name"),h.event.country=h.extractFromAddress(e,"country","short_name"),h.event.city=h.extractFromAddress(e,"locality","long_name"),h.event.state.length>3&&(h.event.state=h.event.country),h.event.location=h.eventLocation.geometry.location.A+","+h.eventLocation.geometry.location.F,h.mapurl="https://www.google.com/maps/search/"+encodeURIComponent(h.eventLocation.formatted_address)+"/@"+h.event.location+",15z",h.mapurlTrue=!0,o.info(h.mapurl)}else h.event.address=h.eventLocation,h.event.full_address="",h.event.location_name=h.eventLocation,h.event.location="0,0"}function p(){""!==h.mapurl&&a.open(h.mapurl)}function g(){h.showError=!1,h.showSuccess=!1,h.errorMessage=[],h.mapurl="",h.mapurlTrue=!1,h.eventLocation="",h.event={user:"/api/v1/auth/user/"+t+"/",description:"",ends_on:"",location:"",name:"",repeat:"",starts_on:"",street:"",city:"",zipcode:null,state:"",full_address:"",location_name:"",country:""}}var h=this;h.showError=!1,h.showMobile=!0,h.showSuccess=!1,h.errorMessage=[],h.mapurl="",h.mapurlTrue=!1,h.endsTimeError=!1,h.startsTimeError=!1,h.$geolocation=l,l.getCurrentPosition({enableHighAccuracy:!0,timeout:6e4,maximumAge:2}).then(function(e){h.autocompleteOptions={location:new google.maps.LatLng(e.coords.latitude,e.coords.longitude),radius:5e4}}),h.autocompleteOptions={location:"0,0",radius:5e4},h.event={user:"/api/v1/auth/user/"+t+"/",description:"",ends_on:"",location:"",name:"",repeat:"",starts_on:"",street:"",city:"",zipcode:null,state:"",full_address:"",location_name:"",country:""},h.eventLocation="",h.placeholder={name:"Event Name",starts:"Starts",ends:"Ends",repeat:"Repeat",location:"Location",description:"Description",costs:"Costs",invitations:"Invitations",attachments:"Attachments"},h.saveEvent=v,h.openMap=p,h.resetForm=g,h.extractFromAddress=m,h.parseLocation=f,h.validateDates=u,e.$on("saveEvent",function(){o.info("saveEvent"),h.saveEvent()}),e.$on("goBackEvents",function(){o.info(n.previousEventFeed),s.go(void 0!==n.previousEventFeed?n.previousEventFeed:"events.myevents")}),h.checkDatesStarts=d,h.checkDatesEnds=c,e.$watch(angular.bind(this,function(){return h.eventLocation}),function(){h.parseLocation()})}angular.module("icebrak").controller("EventCreateController",e),e.$inject=["$scope","USER_ID","EventsFactory","$state","$rootScope","$log","$window","moment","$geolocation"]}(),angular.module("icebrak").controller("EditMyProfileCtrl",["$scope","$timeout","USER_ID","$q","$state","UsersFactory","GoalsFactory","LikesFactory","SubjectsFactory","OffersFactory","InterestsFactory","PhotosFactory","$log","$filter","$cookies","$http","FB_TOKEN","$location","$anchorScroll","$window","$resource","notify",function(e,t,i,s,n,o,a,r,l,d,c,u,v,m,f,p,g,h,b,y,w,_){e.social={twitter:"",linkedin:""},e.userUri="/api/v1/auth/user/"+i+"/",e.user={id:i,firstName:"",lastName:"",age:"",about_me:"",photos:[{id:0,order:0,photo:"",cropped_photo:""},{id:0,order:1,photo:"",cropped_photo:""},{id:0,order:2,photo:"",cropped_photo:""},{id:0,order:3,photo:"",cropped_photo:""},{id:0,order:4,photo:"",cropped_photo:""},{id:0,order:5,photo:"",cropped_photo:""}],goals:[],offers:[],likes:[],interests:[],mutual:{friends:[],facebookfriends:[],twitterfriends:[],twitterfollowers:[],linkedinconnections:[]}},e.loadingUser=!1,e.loadingGoals=!1,e.loadingOffers=!1,e.loadingLikes=!1,e.loadingInterests=!1,e.getUser=function(){e.loadingUser=!0,e.loadingGoals=!0,e.loadingOffers=!0,e.loadingLikes=!0,e.loadingInterests=!0,a.query({user_id:i,format:"json"}).$promise.then(function(t){t.meta.total_count>0&&(e.user.goals=t.objects),e.loadingGoals=!1}),d.query({user_id:i,format:"json"}).$promise.then(function(t){t.meta.total_count>0&&(e.user.offers=t.objects),e.loadingOffers=!1}),r.query({user_id:i,format:"json"}).$promise.then(function(t){t.meta.total_count>0&&(e.user.likes=t.objects),e.loadingLikes=!1}),c.query({user_id:i,format:"json"}).$promise.then(function(t){t.meta.total_count>0&&(e.user.interests=t.objects),e.loadingInterests=!1}),o.get({format:"json"},{userId:i}).$promise.then(function(t){e.user.firstName=t.first_name,e.user.lastName=t.last_name,e.user.about_me=t.about_me,e.user.age=t.age,e.user.facebookId=t.facebook_id,e.user.facebookProfile=t.facebook_profile_url,null!==t.twitter_provider&&(e.social.twitter=t.twitter_provider),null!==t.linkedin_provider&&(e.social.linkedin=t.linkedin_provider),e.loadingUser=!1})},e.getUser(),e.link=function(e){var t=350,i=250,s=void 0!==window.screenLeft?window.screenLeft:screen.left,n=void 0!==window.screenTop?window.screenTop:screen.top,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,r=o/2-t/2+s,l=a/2-i/2+n,d="height="+i+",width="+t+",left="+r+",top="+l+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=yes,directories=no,status=yes",c="/social/associate/"+e+"/?next=/goals/close_login_popup",u=window.open(c,"Connecting...",d);window.focus&&u.focus()},e.unlink=function(e){var t=350,i=250,s=void 0!==window.screenLeft?window.screenLeft:screen.left,n=void 0!==window.screenTop?window.screenTop:screen.top,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,r=o/2-t/2+s,l=a/2-i/2+n,d="height="+i+",width="+t+",left="+r+",top="+l+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=yes,directories=no,status=yes",c="/social/disconnect/"+e+"/",u=window.open(c,"Disconnecting...",d);window.focus&&u.focus()},e.refreshUser=function(){o.get({format:"json"},{userId:i}).$promise.then(function(t){e.twitter=t.twitter_provider,e.linkedin=t.linkedin_provider})},e.loadingAbout=!1,e.saveAbout=function(){e.loadingAbout=!0,o.update({userId:i},{about_me:e.user.about_me},function(){e.loadingAbout=!1},function(e){v.info(e)})},e.apiPhotos=[],e.facebookPhotos=[],e.onDropComplete=function(t,i){var s=e.user.photos[t],n=e.user.photos.indexOf(i);e.user.photos[t]=i,e.user.photos[t].order=t,e.user.photos[n]=s,e.user.photos[n].order=n,0!==e.user.photos[t].id&&u.update({photoId:e.user.photos[t].id},{order:e.user.photos[t].order},function(){},function(e){v.info(e)}),0!==e.user.photos[n].id&&u.update({photoId:e.user.photos[n].id},{order:e.user.photos[n].order},function(){},function(e){v.info(e)})},e.getPhotos=function(){u.query({format:"json"}).$promise.then(function(t){e.apiPhotos=t.objects;for(var i in e.apiPhotos)for(var s in e.user.photos)e.user.photos[s].order===e.apiPhotos[i].order&&(e.user.photos[s].id=e.apiPhotos[i].id,e.user.photos[s].photo=e.apiPhotos[i].photo,e.user.photos[s].cropped_photo=e.apiPhotos[i].cropped_photo)})},e.getPhotos(),e.currentAlbum="",e.getFBPhotos=function(t,i){e.showPhotos=!0,e.myImage=null,e.photoIndex=null,e.hideAlbums=!0,e.currentAlbum=i,e.photosLoading=!0,p.get("https://graph.facebook.com/"+t+"?fields=photos{id,height,width,source}&access_token="+g).success(function(t){e.photosLoading=!1,e.facebookPhotos=t.photos.data}).error(function(){e.photosLoading=!1})},e.backToAlbums=function(){e.showPhotos=!0,e.myImage=null,e.photoIndex=null,e.currentAlbum="",e.hideAlbums=!e.hideAlbums,e.getFBAlbums()},e.facebookAlbums=[],e.hideAlbums=!1,e.getFBAlbums=function(){e.showModal=!0,e.albumsLoading=!0,p.get("https://graph.facebook.com/me/albums?fields=picture,name&access_token="+g).success(function(t){e.facebookAlbums=t.data,e.albumsLoading=!1}).error(function(){e.albumsLoading=!1})},e.deletePhoto=function(){var t=e.userPhotoDeleteIndex;u.delete({photoId:e.user.photos[t].id},function(){e.user.photos[t].photo="",e.user.photos[t].cropped_photo="",e.user.photos[t].id=0},function(e){v.info(e)})},e.closeModal=function(){e.showModal=!1,e.showPhotos=!0,e.myImage=null,e.photoIndex=null,t(function(){h.hash("my-profile-header-edit"),b()},600)},e.showModal=!1,e.albumsLoading=!1,e.photosLoading=!1,e.showPhotos=!0,e.myImage=null,e.photoIndex=null,e.myCroppedImage=null,e.showCrop=function(t){e.photoIndex=t,e.myImage=e.facebookPhotos[t].source,e.showPhotos=!1},e.myCroppedImage="",e.createPhoto=function(t){var s=e.photoIndex,n=e.facebookPhotos[s],o={cropped_photo:t,photo:n.source,order:e.newPhotoIndex,user:"/api/v1/auth/user/"+i+"/"};u.save({},o,function(t){var i=e.newPhotoIndex;e.user.photos[i].photo=t.photo,e.user.photos[i].cropped_photo=t.cropped_photo,e.user.photos[i].id=t.id,e.closeModal()},function(){})},e.$on("ngRepeatFinishedPhotos",function(){$("#deletePhotoModal").modal("attach events",".delete_photo","show")}),e.$on("ngRepeatFinished",function(){$(".ui.search.goals").search({apiSettings:{url:"api/v1/subject/?format=json&description__icontains={query}"},minCharacters:3,searchDelay:400,type:"standard",cache:!1,onSelect:function(t){var i=$(this).attr("rel");void 0!==t&&(e.user.goals[i].subject=t.description)}}),$(".ui.search.offers").search({apiSettings:{url:"api/v1/subject/?format=json&description__icontains={query}"},minCharacters:3,searchDelay:400,type:"standard",cache:!1,onSelect:function(t){var i=$(this).attr("rel");void 0!==t&&(e.user.offers[i].subject=t.description)}}),$(".ui.search.interests").search({apiSettings:{url:"api/v1/interest_subject/?format=json&description__icontains={query}"},minCharacters:3,searchDelay:400,type:"standard",cache:!1,onSelect:function(t){var i=$(this).attr("rel");void 0!==t&&(e.user.interests[i].interest_subject=t.description)}})}),e.goalNeedSaving=function(t){e.user.goals[t].changed=!0},e.createNewGoal=function(){var t={id:0,subject:"",user:e.userUri,changed:!0};e.user.goals.push(t)},e.removeGoal=function(t){var i=w(e.user.goals[t].resource_uri);0===e.user.goals[t].id?e.user.goals.splice(t,1):i.delete().$promise.then(function(){e.user.goals.splice(t,1)})},e.saveCurrentGoal=function(t){var i=s.defer();if(e.user.goals[t].errorMessage="",e.user.goals[t].error=!1,e.user.goals[t].subject.length>300)return e.user.goals[t].error=!0,e.user.goals[t].errorMessage="Goal cannot have more than 300 characters.",i.reject(),i.promise;if(""===e.user.goals[t].subject)e.user.goals[t].error=!0,e.user.goals[t].errorMessage="Entering your goal is required.",i.reject();else if(0===e.user.goals[t].id){var n={goal_subject:e.user.goals[t].subject,user:e.userUri};e.user.goals[t].loading=!0,e.user.goals[t].error=!1,a.save({},n,function(s){e.user.goals[t].loading=!1,e.user.goals[t].error=!1,e.user.goals[t].id=s.id,e.user.goals[t].goal=s.goal,e.user.goals[t].goal_subject=s.goal_subject,e.user.goals[t].resource_uri=s.resource_uri,e.user.goals[t].user=s.user,e.user.goals[t].changed=!1,i.resolve()},function(s){e.user.goals[t].errorMessage=s.data.goal.error[0],e.user.goals[t].loading=!1,e.user.goals[t].error=!0,i.reject()})}else e.user.goals[t].error=!1,e.user.goals[t].loading=!0,a.update({goalId:e.user.goals[t].id},{goal_subject:e.user.goals[t].subject},function(s){e.user.goals[t].loading=!1,e.user.goals[t].error=!1,e.user.goals[t].goal=s.goal,e.user.goals[t].goal_subject=s.goal_subject,e.user.goals[t].resource_uri=s.resource_uri,e.user.goals[t].changed=!1,i.resolve()},function(s){e.user.goals[t].errorMessage=s.data.goal?s.data.goal.error[0]:"There was an error when trying to save this field.",e.user.goals[t].loading=!1,e.user.goals[t].error=!0,i.reject()});return i.promise},e.offerNeedSaving=function(t){e.user.offers[t].changed=!0},e.createNewOffer=function(){var t={id:0,subject:"",user:e.userUri,changed:!0};e.user.offers.push(t)},e.removeOffer=function(t){var i=w(e.user.offers[t].resource_uri);0===e.user.offers[t].id?e.user.offers.splice(t,1):i.delete().$promise.then(function(){e.user.offers.splice(t,1)})},e.saveCurrentOffer=function(t){var i=s.defer();if(e.user.offers[t].errorMessage="",e.user.offers[t].error=!1,e.user.offers[t].subject.length>300)return e.user.offers[t].error=!0,e.user.offers[t].errorMessage="Offer cannot have more than 300 characters.",i.reject(),i.promise;if(""===e.user.offers[t].subject)e.user.offers[t].error=!0,e.user.offers[t].errorMessage="Entering your offer is required.",i.reject();else if(0===e.user.offers[t].id){var n={offer_subject:e.user.offers[t].subject,user:e.userUri};e.user.offers[t].loading=!0,e.user.offers[t].error=!1,d.save({},n,function(s){e.user.offers[t].loading=!1,e.user.offers[t].error=!1,e.user.offers[t].id=s.id,e.user.offers[t].offer=s.offer,e.user.offers[t].offer_subject=s.offer_subject,e.user.offers[t].resource_uri=s.resource_uri,e.user.offers[t].user=s.user,e.user.offers[t].changed=!1,i.resolve()},function(s){e.user.offers[t].errorMessage=s.data.offer.error[0],e.user.offers[t].loading=!1,e.user.offers[t].error=!0,i.reject()})}else e.user.offers[t].error=!1,e.user.offers[t].loading=!0,d.update({offerId:e.user.offers[t].id},{offer_subject:e.user.offers[t].subject},function(s){e.user.offers[t].loading=!1,e.user.offers[t].error=!1,e.user.offers[t].offer=s.offer,e.user.offers[t].offer_subject=s.offer_subject,e.user.offers[t].resource_uri=s.resource_uri,e.user.offers[t].changed=!1,i.resolve()},function(s){e.user.offers[t].errorMessage=s.data.offer?s.data.offer.error[0]:"There was an error when trying to save this field.",e.user.offers[t].loading=!1,e.user.offers[t].error=!0,i.reject()});return i.promise},e.interestNeedSaving=function(t){e.user.interests[t].changed=!0},e.createNewInterest=function(){var t={id:0,interest_subject:"",interest:null,user:e.userUri,changed:!0};e.user.interests.push(t)},e.removeInterest=function(t){var i=w(e.user.interests[t].resource_uri);0===e.user.interests[t].id?e.user.interests.splice(t,1):i.delete().$promise.then(function(){e.user.interests.splice(t,1)})},e.saveCurrentInterest=function(t){var i=s.defer();if(e.user.interests[t].errorMessage="",e.user.interests[t].error=!1,e.user.interests[t].interest_subject.length>100)return e.user.interests[t].error=!0,e.user.interests[t].errorMessage="Interest cannot have more than 100 characters.",i.reject(),i.promise;if(""===e.user.interests[t].interest_subject)e.user.interests[t].error=!0,e.user.interests[t].errorMessage="Entering your interest is required.",i.reject();else if(0===e.user.interests[t].id){var n={interest_subject:e.user.interests[t].interest_subject,user:e.userUri};e.user.interests[t].loading=!0,e.user.interests[t].error=!1,c.save({},n,function(s){e.user.interests[t].loading=!1,e.user.interests[t].error=!1,e.user.interests[t].id=s.id,e.user.interests[t].interest=s.interest,e.user.interests[t].interest_subject=s.interest_subject,e.user.interests[t].resource_uri=s.resource_uri,e.user.interests[t].user=s.user,e.user.interests[t].changed=!1,i.resolve()},function(s){e.user.interests[t].errorMessage=s.data.interest.error[0],e.user.interests[t].loading=!1,e.user.interests[t].error=!0,i.reject()})}else e.user.interests[t].error=!1,e.user.interests[t].loading=!0,c.update({interestId:e.user.interests[t].id},{interest_subject:e.user.interests[t].interest_subject},function(s){e.user.interests[t].loading=!1,e.user.interests[t].error=!1,e.user.interests[t].interest=s.interest,e.user.interests[t].interest_subject=s.interest_subject,e.user.interests[t].resource_uri=s.resource_uri,e.user.interests[t].changed=!1,i.resolve()},function(s){e.user.interests[t].errorMessage=s.data.interest?s.data.interest.error[0]:"There was an error when trying to save this field.",e.user.interests[t].loading=!1,e.user.interests[t].error=!0,i.reject()});return i.promise},e.savingAllChanges=!1,e.startSavingChanges=function(){var t=e.saveChanges();e.savingAllChanges=!0,t.then(function(){v.info("Success saving"),e.savingAllChanges=!1,_({messageTemplate:'<div class="notify-info-header">Success</div><p>All changes have been saved.</p>',classes:"notify-info",icon:"check circle",duration:4e3}),n.go("myprofile")},function(){v.info("Failed"),e.savingAllChanges=!1,_({messageTemplate:'<div class="notify-error-header">Could not save your profile changes.</div><p>There were some errors. Please see them below.</p>',scope:e,classes:"notify-error",icon:"warning circle",duration:4e3})},function(){})},e.saveChanges=function(){var t=s.defer(),i=0;for(var n in e.user.goals)e.user.goals[n].changed&&i++;for(var n in e.user.offers)e.user.offers[n].changed&&i++;for(var n in e.user.interests)e.user.interests[n].changed&&i++;if(i>0){for(var n in e.user.goals)e.user.goals[n].changed&&e.saveCurrentGoal(n).then(function(){i--,0===i&&t.resolve()},function(){t.reject()},function(){});for(var n in e.user.offers)e.user.offers[n].changed&&e.saveCurrentOffer(n).then(function(){i--,0===i&&t.resolve()},function(){t.reject()},function(){});for(var n in e.user.interests)e.user.interests[n].changed&&e.saveCurrentInterest(n).then(function(){i--,0===i&&t.resolve()},function(){t.reject()},function(){})}else t.resolve();return t.promise}}]),angular.module("icebrak").controller("ConversationsCtrl",["$rootScope","notify","$resource","$window","$state","NotificationsRepository","InboxRepository","myIoSocket","Connection","$q","$http","$scope","USER_ID","$log","$timeout","FRIEND","MessagesFactory","$filter","FriendsFactory",function(e,t,i,s,n,o,a,r,l,d,c,u,v,m,f,p,g,h,b){u.leftActive=!0,u.messages=[],u.friendshipId=l.objects[0].id,u.friendImage="//graph.facebook.com/"+l.objects[0].facebook_id+"/picture?type=square",t.closeAll(),u.status={loading:!1,loaded:!1},u.q="",u.newmessage="",u.nextOffset=20,u.next=null,u.friend=p,u.recipient="/api/v1/auth/user/"+u.friend.id+"/",u.sender="/api/v1/auth/user/"+v+"/",u.loadingMessages=!1,u.loadingOlderMessages=!1,u.sendingMessage=!1,u.scrollConversations=function(){f(function(){var e=angular.element(".conversation-content")[0].scrollHeight;angular.element(".conversation-content").filter(":not(:animated)").animate({scrollTop:e},1500)},100)},u.loadMore=function(){var e=d.defer();return null===u.next?(e.reject(),e.promise):(u.status.loading?e.reject():(u.status.loading=!0,f(function(){g.query({user_id:u.friend.id,offset:u.nextOffset,limit:10}).$promise.then(function(t){var i=t.objects;u.next=t.meta.next,h("orderBy")(i,"sent_at",!0),u.nextOffset+=10;for(var s in i){var n=h("amDateFormat")(i[s].sent_at,"dddd, MMMM D, YYYY"),o=h("amDateFormat")(i[s].sent_at,"L"),a=h("getIndexByProperty")("date",n,u.messages);null===a&&(u.messages.push({date:n,realDate:o,contents:[]}),a=u.messages.length-1),u.messages[a].contents.push(i[s].sender===u.sender?{body:i[s].body,sender:i[s].sender,recipient:i[s].recipient,date:o,sent_at:i[s].sent_at,left:!0}:{body:i[s].body,sender:i[s].sender,recipient:i[s].recipient,date:o,sent_at:i[s].sent_at,left:!1}),u.messages[a].contents=h("orderBy")(u.messages[a].contents,"sent_at",!0)}u.messages=h("orderBy")(u.messages,"realDate"),u.status.loading=!1,u.status.loaded=!0,e.resolve()},function(t){e.reject(),u.status.loading=!1;var i=(t.data,t.status),s=(t.header,t.config,"Error "+i);m.error(s)})},400)),e.promise)},u.getMessages=function(){u.messages=[],u.loadingMessages=!0,u.status.loaded=!1,g.query({user_id:u.friend.id,limit:20,offset:0}).$promise.then(function(e){var t=e.objects;u.next=e.meta.next,h("orderBy")(t,"sent_at",!0),u.status.loaded=!0;for(var i in t){var s=h("amDateFormat")(t[i].sent_at,"dddd, MMMM D, YYYY"),n=h("amDateFormat")(t[i].sent_at,"L"),r=h("getIndexByProperty")("date",s,u.messages);null===r&&(u.messages.push({date:s,realDate:n,contents:[]}),r=u.messages.length-1),u.messages[r].contents.push(t[i].sender===u.sender?{body:t[i].body,sender:t[i].sender,recipient:t[i].recipient,date:n,sent_at:t[i].sent_at,left:!0}:{body:t[i].body,sender:t[i].sender,recipient:t[i].recipient,date:n,sent_at:t[i].sent_at,left:!1}),u.messages[r].contents=h("orderBy")(u.messages[r].contents,"sent_at",!0)}u.messages=h("orderBy")(u.messages,"realDate"),u.messages.length>0&&(f(function(){var e=angular.element(".conversation-content")[0].scrollHeight;angular.element(".conversation-content").filter(":not(:animated)").animate({scrollTop:e},0)},100),c.get("/api/v1/inbox/reat_at/?sender_id="+u.friend.id).success(function(){a.getInboxMessages(),o.refreshTotalInbox()}).error(function(){})),u.loadingMessages=!1},function(e){u.loadingMessages=!1;var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);m.error(i)})},u.getMessages(),u.sendNewMessage=function(){if(""===u.newmessage)u.sendingMessage=!1;else{u.sendingMessage=!0;var e={};e={sender:u.sender,recipient:u.recipient,body:u.newmessage},g.save({},e,function(t){e.left=!0,e.sent_at=t.sent_at,e.sender=t.sender,e.recipient=t.recipient;var i=h("amDateFormat")(e.sent_at,"L"),s=h("amDateFormat")(e.sent_at,"dddd, MMMM D, YYYY"),n=h("getIndexByProperty")("date",s,u.messages);e.date=i,null===n&&(u.messages.push({date:s,realDate:i,contents:[]}),n=u.messages.length-1),u.messages[n].contents.push(e),u.newmessage="",m.info("New message saved."),u.sendingMessage=!1,u.scrollConversations()},function(e){u.sendingMessage=!1,m.info(e)})}},e.$on("receivedMessage",function(t,i){var s=JSON.parse(i);if(s.sender===u.recipient){m.info("new message");var n=h("amDateFormat")(s.sent_at,"dddd, MMMM D, YYYY"),r=h("amDateFormat")(s.sent_at,"L"),l=h("getIndexByProperty")("date",n,u.messages);null===l&&(u.messages.push({date:n,realDate:r,contents:[]}),l=u.messages.length-1),u.messages[l].contents.push({body:s.body,sender:s.sender,recipient:s.recipient,date:r,sent_at:s.sent_at,left:!1}),e.notifications.push({body:s.body,sender:s.sender,recipient:s.recipient,date:r,sent_at:s.sent_at}),u.messages[l].contents=h("orderBy")(u.messages[l].contents,"sent_at",!0),u.messages=h("orderBy")(u.messages,"realDate"),c.get("/api/v1/inbox/reat_at/?sender_id="+u.friend.id).success(function(){a.getInboxMessages(),o.refreshTotalInbox()}).error(function(){}),f(function(){var e=angular.element(".conversation-content")[0].scrollHeight;angular.element(".conversation-content").filter(":not(:animated)").animate({scrollTop:e},1500)},100),f(function(){angular.element("#desktop-conversation-content").filter(":not(:animated)").animate({scrollTop:0},1500)},100)}else a.getInboxMessages(),o.refreshTotalInbox()}),u.unFriend=function(){b.update({friendId:u.friendshipId},{status:-1},function(){a.getInboxMessages(),n.go("myconnections")},function(){})}}]),angular.module("icebrak").controller("BigMatchFeedCtrl",function(){}),angular.module("icebrak").factory("GoalsFactory",["$resource",function(e){return e("/api/v1/goal/:goalId/:param",{goalId:"@goalId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("NewConnectionsFactory",["$resource",function(e){return e("/api/v1/new_connections/counter/:newConnectionId/:param",{goalId:"@newConnectionId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("LikesFactory",["$resource",function(e){return e("/api/v1/likes/:likeId/:param",{likeId:"@likeId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("ProfileFactory",["$resource",function(e){return e("/api/v1/profile/:profileId/:param",{profileId:"@profileId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("LocationFactory",["$resource",function(e){return e("/api/v1/location/:locationId/:param",{locationId:"@locationId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("ConnectionsFactory",["$resource",function(e){return e("/api/v1/connections/:connectionId/:param",{connectionId:"@connectionId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("FriendsFactory",["$resource",function(e){return e("/api/v1/friends/:friendId/:param",{friendId:"@friendId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("MutualFriendsFactory",["$resource",function(e){return e("/api/v1/mutual/friends/:friendId/:param",{friendId:"@friendId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("SubjectsFactory",["$resource",function(e){return e("/api/v1/subject/:subjectId/:param",{subjectId:"@subjectId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("OffersFactory",["$resource",function(e){return e("/api/v1/offer/:offerId/:param",{offerId:"@offerId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("InterestsFactory",["$resource",function(e){return e("/api/v1/interest/:interestId/:param",{interestId:"@interestId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("InterestSubjectFactory",["$resource",function(e){return e("/api/v1/interest_subject/:interestId/:param",{interestId:"@interestId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("UsersFactory",["$resource",function(e){return e("/api/v1/auth/user/:userId/:param",{userId:"@userId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("MessagesFactory",["$resource",function(e){return e("/api/v1/messages/:messageId/:param",{messageId:"@messageId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("InboxFactory",["$resource",function(e){return e("/api/v1/inbox/last/:inboxId/:param",{inboxId:"@inboxId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("FiltersFactory",["$resource",function(e){return e("/api/v1/filter/state/:filterId/:param",{filterId:"@filterId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("PhotosFactory",["$resource",function(e){return e("/api/v1/photo/:photoId/:param",{photoId:"@photoId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("InboxUnreadCounterFactory",["$resource",function(e){return e("/api/v1/inbox/unread_counter/:unreadId/:param",{unreadId:"@unreadId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("EventsFactory",["$resource",function(e){return e("/api/v1/event/:eventId/:param",{eventId:"@eventId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PUT"},"delete":{method:"DELETE"}})}]).factory("MembersFactory",["$resource",function(e){return e("/api/v1/member/:memberId/:param",{memberId:"@memberId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PUT"},"delete":{method:"DELETE"}})}]).factory("FeedEventsFriendsFactory",["$resource",function(e){return e("/api/v1/feed/events/friends/:eventId/:param",{eventId:"@eventId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("FeedEventsMyFactory",["$resource",function(e){return e("/api/v1/feed/events/my/:eventId/:param",{eventId:"@eventId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("FeedEventsAllFactory",["$resource",function(e){return e("/api/v1/feed/events/all/:eventId/:param",{eventId:"@eventId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]),angular.module("icebrak").controller("AppCtrl",["$rootScope","APP_ID","USER_PHOTO_SMALL","NotificationsRepository","$http","LocationFactory","$geolocation","ezfb","$scope","USER_ID","FilterRepository","EventsFilterRepository","USER_FIRSTNAME","USER_PHOTO","$timeout","$state","$window","myIoSocket","$filter","$log","notify","$resource","$cookies","InboxRepository","moment","angularMomentConfig",function(e,t,i,s,n,o,a,r,l,d,c,u,v,m,f,p,g,h,b,y,w,_,k,E,x,I){e.hideTopMenu=!1,l.checkLogin=function(){r.getLoginStatus().then(function(t){e.fbAuth=t.authResponse,r.api("/me",function(t){e.apiMe=t})})},l.checkLogin(),s.refreshTotalInbox(),s.refreshTotalConnections(),l.$geolocation=a,a.getCurrentPosition({enableHighAccuracy:!0,timeout:6e4,maximumAge:2}).then(function(e){l.location=e,l.saveLocation(l.location.coords)}),l.saveLocation=function(e){o.query({format:"json"}).$promise.then(function(t){var i={user:"/api/v1/auth/user/"+d+"/",position:e.latitude+","+e.longitude,speed:e.speed,heading:e.heading,altitude:e.altitude,altitude_accuracy:e.altitudeAccuracy};t.meta.total_count>0?(l.serverLocation=t.objects[0],o.update({locationId:l.serverLocation.id},i,function(){y.info("New location updated.")},function(e){y.error("Error updating location."),y.error(e)})):o.save({},i,function(){y.info("New location created.")},function(e){y.error("Error creating location."),y.error(e)})},function(e){var t=(e.data,e.status),i=(e.header,e.config,"Error "+t);y.error(i)})},e.userImg=i,e.userName=v,k.userid=d,c.getFilters(),u.getFilters(),e.goBack=function(){e.hideTopMenu=!1,$(".horizontal.top.sidebar").sidebar("hide"),e.$broadcast("showFullProfile")},l.cancelMatch=function(){$(".dimmable").dimmer("hide"),e.hideTopMenu=!1,$(".horizontal.top.sidebar").sidebar("hide"),e.$broadcast("cancelMatchEvent")},l.confirmMatch=function(){$(".dimmable").dimmer("hide"),e.hideTopMenu=!1,$(".horizontal.top.sidebar").sidebar("hide"),e.$broadcast("confirmMatchEvent")
},e.$on("triggerRefreshMatchfeed",function(){e.showfullprofile=!1,e.hideTopMenu=!0,l.refreshMatchFeed()}),l.refreshMatchFeed=function(){$(".dimmable").dimmer("hide"),e.$broadcast("refreshMatchFeed")},E.getInboxMessages(),e.notifications=[],e.messages=[],l.$on("socket:message",function(t,i){var n=JSON.parse(i);if(y.info(n),n.type==="event_deleted."+d){var o=JSON.parse(n.message),a=x.utc(o.event_start_date).local().format("dddd, MMMM D, YYYY H:mm A ");a+=x.tz(I.timezone).format("z");var r="The event "+o.event_name+" on "+a+" has been cancelled by "+o.event_organizer_name+", the event host. <br>We apologize for any inconvenience. (This is an automated message.)",c=b("amDateFormat")(Date.now(),"h:mm a"),u='<div class="notify-info-header">Event is cancelled <br>'+c+" </div><p>"+r+"</p>";w({messageTemplate:u,scope:l,classes:"notify-info",icon:"calendar",duration:8e3})}if(n.type==="connection."+d){var v=JSON.parse(i),m=JSON.parse(v.message),c=b("amDateFormat")(Date.now(),"h:mm a"),f="/api/v1/auth/user/"+d+"/";if(f===m.friend1)var g=_(m.friend2);if(f===m.friend2)var g=_(m.friend1);g.get().$promise.then(function(e){s.refreshTotalConnections();var t='<div class="notify-info-header"><a ui-sref="myconnections">New connection<br>'+c+' </a></div><p><a ui-sref="myconnections">You and '+e.first_name+" are now friends.</a></p>";w({messageTemplate:t,scope:l,classes:"notify-info",icon:"user",duration:4e3})})}if(n.type==="message."+d)if(e.isState("conversations"))e.$broadcast("receivedMessage",n.message);else{E.getInboxMessages(),s.refreshTotalInbox();var n=JSON.parse(i),h=JSON.parse(n.message),k=b("words")(h.body,10),c=b("amDateFormat")(h.sent_at,"h:mm a"),$=_(h.sender);$.get().$promise.then(function(e){l.gotoConversation=function(){p.go("conversations",{userId:e.id})};var t='<div class="notify-info-header"><a href="" ng-click="gotoConversation()">Received new message from '+e.first_name+"<br>"+c+' </a></div><p><a href="" ng-click="gotoConversation()">'+k+"</a></p>";w({messageTemplate:t,scope:l,classes:"notify-info",icon:"wechat",duration:4e3})})}})}]),angular.module("icebrak").run(["$templateCache",function(e){e.put("app/bigmatchfeed/bigmatchfeed.html",'<div style="float: right;"><div class="ui text main menu"><div class="text item" style="margin-right: 0px;">15 Results &nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;Sort By</div><div class="ui pointing dropdown link item" style="padding-left: 0px;margin-left: 0px;"><span class="text">Most Relevant</span> <i class="dropdown icon"></i><div class="menu"><div class="header">Categories</div><div class="item"><i class="dropdown icon"></i> <span class="text">Clothing</span><div class="menu"><div class="header">Mens</div><div class="item">Shirts</div><div class="item">Pants</div><div class="item">Jeans</div><div class="item">Shoes</div><div class="divider"></div><div class="header">Womens</div><div class="item">Dresses</div><div class="item">Shoes</div><div class="item">Bags</div></div></div><div class="item">Home Goods</div><div class="item">Bedroom</div><div class="divider"></div><div class="header">Order</div><div class="item">Status</div><div class="item">Cancellations</div></div></div></div></div><div class="ui grid"><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">Daniel Louise</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">Hi. I just moved to New York City from France and Im looking to meet new friends and colleagues. I work in finance, but Id like to join a tech startup. I like to travel and Im an avid snowboarder. My parents own a winery, so Im also quite familiar with French wine.</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">John Stevens</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">I am a 55 year old doctor and Im supposed to give a presentation at a local university in 3 weeks, but I dont know how to use PowerPoint. I need someone to show me how to use the software, and to help cre- ate the content of my slides (i.e. copy, images, video).</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">Daniel Louise</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">Hi. I just moved to New York City from France and Im looking to meet new friends and colleagues. I work in finance, but Id like to join a tech startup. I like to travel and Im an avid snowboarder. My parents own a winery, so Im also quite familiar with French wine.</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">Daniel Louise</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">Hi. I just moved to New York City from France and Im looking to meet new friends and colleagues. I work in finance, but Id like to join a tech startup. I like to travel and Im an avid snowboarder. My parents own a winery, so Im also quite familiar with French wine.</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">Daniel Louise</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">Hi. I just moved to New York City from France and Im looking to meet new friends and colleagues. I work in finance, but Id like to join a tech startup. I like to travel and Im an avid snowboarder. My parents own a winery, so Im also quite familiar with French wine.</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">Daniel Louise</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">Hi. I just moved to New York City from France and Im looking to meet new friends and colleagues. I work in finance, but Id like to join a tech startup. I like to travel and Im an avid snowboarder. My parents own a winery, so Im also quite familiar with French wine.</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div></div><script>\n\'use strict\';\n\n$(\'.ui.dropdown\')\n    .dropdown();\n</script>'),e.put("app/conversations/conversations.html",'<div id="mycontroller"><div class="ui fixed borderless menu" id="headermenu"><a class="icon item" ui-sref="inbox"><i class="left chevron icon"></i></a><h3 class="ui center aligned header">{{friend.first_name}}</h3></div><div class="ui fixed menu" id="submenu"><div class="3 fluid large ui buttons"><a ui-sref="conversations({ userId: friend.id })" ng-class="{\'active\': leftActive}" class="ui leftalign button"><i class="fa fa-comment-o icon"></i></a> <a ui-sref="friendprofile({ userId: friend.id })" class="ui button"><i class="fa fa-user icon"></i></a> <a class="ui button rightalign dropdown"><i class="fa fa-ellipsis-h icon"></i><div class="menu" id="friendmenu"><div class="item">Get Introduced</div><div class="item">Add to Group</div><div class="item">Arrange Meetup</div><div class="item">Flag as Inappropriate</div><div class="item deleteconnection">Remove Connection</div></div></a></div></div><div id="desktop-conversation-header" class="ui dividing header large"><div class="content">Conversation with <a ui-sref="friendprofile({ userId: friend.id })">{{friend.first_name}}</a></div></div><div id="desktop-conversation-reply"><div class="ui form"><div class="field"><label></label> <textarea ng-enter="sendNewMessage()" placeholder="Add your message here." ng-model="newmessage"></textarea></div><div ng-click="sendNewMessage()" ng-class="{\'loading\': sendingMessage}" class="ui submit green button">Send Message</div></div></div><div id="desktop-conversation-content" class="basic ui segment" ng-class="{\'loading\': loadingMessages}" when-scroll-ends="loadMore()"><h3 class="ui center aligned header" ng-if="messages.length === 0">There are no any messages</h3><div class="repeat-animation" ng-repeat="message in messages | orderBy:\'-realDate\' track by $index"><div ng-style="" class="repeat-animation quote" ng-class="{\'left\': msg.left, \'right\': !msg.left, \'lastMessage\': $last}" ng-repeat="msg in message.contents | orderBy:\'-sent_at\' track by $index"><img class="round-avatar" ng-src="{{ msg.left && userImg || !msg.left && friendImage}}"><div class="speech-bubble"><blockquote>{{msg.body}}</blockquote></div><span class="time-ago">{{message.date}} {{msg.sent_at | amDateFormat:\'h:mm a\'}}</span></div></div><three-bounce-spinner class="page-spinner-bar" ng-show="status.loading"></three-bounce-spinner></div><div id="mobile-conversation-content" class="conversation-content basic ui segment" ng-class="{\'loading\': loadingMessages}" when-scrolled="loadMore()" scroll-bottom-on="status.loaded"><three-bounce-spinner class="page-spinner-bar" ng-show="status.loading"></three-bounce-spinner><div class="repeat-animation" ng-repeat="message in messages track by $index"><h6>{{message.date}}</h6><div ng-style="" class="repeat-animation" ng-class="{\'bubbledLeft\': msg.left, \'bubbledRight\': !msg.left, \'lastMessage\': $last}" ng-repeat="msg in message.contents | orderBy:\'sent_at\' track by $index"><p>{{msg.body}}</p><span class="conversation-time">{{msg.sent_at | amDateFormat:\'h:mm a\'}}</span></div></div></div><div id="mobile-no-messages" class="conversation-content ui segment" ng-if="messages.length === 0"><h3>There are no any messages</h3></div><div id="mobile-conversation-reply" class="message-reply"><div class="ui fluid action input"><input ng-enter="sendNewMessage()" type="text" placeholder="" ng-model="newmessage"><div ng-click="sendNewMessage()" class="ui button" ng-class="{\'loading\': sendingMessage}">Send</div></div></div><script>\n    \'use strict\';\n\n    $(\'.ui.dropdown\')\n        .dropdown({\n            onShow: function() {\n\n\n                var scope = angular.element($("#submenu")).scope();\n                scope.$apply(function() {\n                    scope.leftActive = false;\n                });\n            },\n            onHide: function() {\n\n                var scope = angular.element($("#submenu")).scope();\n                setTimeout(function() {\n                    scope.$apply(function() {\n                        scope.leftActive = true;\n                    });\n                }, 100);\n            }\n        });\n\n    $(\'.basic.delete.modal\')\n        .modal({\n            onDeny: function() {\n                console.log(\'cancel\');\n            },\n            onApprove: function() {\n                console.log(\'deleting user\');\n\n                angular.element(document.getElementById(\'mycontroller\')).scope().unFriend();\n\n            }\n        })\n        .modal(\'attach events\', \'.deleteconnection\', \'show\');\n    </script><div class="ui basic delete modal"><i class="close icon"></i><div class="header">Please Confirm</div><div class="content"><div class="description"><p>Are you sure you want remove this connection?</p></div></div><div class="actions"><div class="two fluid ui inverted buttons"><div class="ui red negative basic inverted button"><i class="remove icon"></i> No</div><a class="ui green basic inverted button ok"><i class="checkmark icon"></i> Yes</a></div></div></div></div>'),e.put("app/editmyprofile/editmyprofile.html",'<div class="ui fixed borderless menu center" id="edittopmenu"><div class="left menu"><a class="ui item" ui-sref="myprofile"><i class="left chevron icon"></i></a></div><div class="header item">Edit Profile</div><div class="right menu"><a class="ui item" ng-click="startSavingChanges()" ng-class="{\'loading\': savingAllChanges}">Save</a></div></div><div class="segment" id="my-profile-header-edit" ng-hide="showModal || editInterest"><div class="ui segment"><div id="tiles" ng-cloak=""><div class="ui image tile" ng-class="{\'left floated medium tile-big\': $index === 0, \'left floated small tile-small\': $index === 1 || $index === 2 || $index === 4 || $index === 5, \'small tile-small\': $index === 3 }" ng-repeat="photo in user.photos track by $index" end-repeat-photos="" ng-drop="true" ng-drop-success="onDropComplete($index, $data,$event)"><a href="" ng-click="$parent.userPhotoDelete = photo; $parent.userPhotoDeleteIndex = $index;" class="ui right corner delete_photo label" ng-show="photo.photo !== \'\'"><i class="close icon"></i></a><div class="tile-content" ng-show="photo.photo === \'\'"><div class="content"><div class="center"><a href="" ng-click="$parent.newPhotoIndex = $index; getFBAlbums();" class="ui compact icon button add_photo"><i class="circle add icon"></i> Add Photo</a></div></div></div><div style="background-image: url(\'{{photo.photo}}\')" ng-if="photo.cropped_photo === \'\'" ng-drag="true" ng-drag-data="photo" class="img-bounding-box"></div><div style="background-image: url(\'{{photo.cropped_photo}}\')" ng-if="photo.cropped_photo !== \'\'" ng-drag="true" ng-drag-data="photo" class="img-bounding-box"></div></div></div></div></div><div class="body segment edit" id="my-profile-body" ng-hide="showModal || editInterest"><div class="ui attached segment" id="my-profile-title"><h3 class="ui left floated header">{{ user.firstName }}<span ng-hide="user.firstName === \'\'">,</span> {{ user.age }}</h3></div><div class="ui attached segment" ng-class="{loading: loadingGoals || loadingOffers || loadingUser || loadingLikes || loadingInterests }"><h4 class="ui header">Goals</h4><div class="ui large list"><div class="item" end-repeat="" ng-repeat="goal in user.goals track by $index"><div class="content"><div class="description"><div class="ui fluid search goals" rel="{{$index}}" ng-class="{\'loading\': goal.loading }"><div class="ui fluid leftright action input" ng-class="{\'error\': goal.error}"><div class="ui removebutton icon circular button" ng-click="removeGoal($index)"><i class="remove icon"></i></div><input type="text" class="prompt" ng-model="goal.subject" ng-change="goalNeedSaving($index)"></div><div class="results"></div></div><div class="ui red pointing fluid label visible transition" ng-if="goal.error">{{goal.errorMessage}}</div></div></div></div></div><div class="ui fluid labeled blue button" ng-click="createNewGoal()"><i class="plus icon"></i> Create new Goal</div><h4 class="ui header">Offers</h4><div class="ui large list"><div class="item" end-repeat="" ng-repeat="offer in user.offers track by $index"><div class="content"><div class="description"><div class="ui fluid search offers" rel="{{$index}}" ng-class="{\'loading\': offer.loading }"><div class="ui fluid leftright action input" ng-class="{\'error\': offer.error}"><div class="ui removebutton icon circular button" ng-click="removeOffer($index)"><i class="remove icon"></i></div><input type="text" class="prompt" ng-model="offer.subject" ng-change="offerNeedSaving($index)"></div><div class="results"></div></div><div class="ui red pointing fluid label visible transition" ng-if="offer.error">{{offer.errorMessage}}</div></div></div></div></div><div class="ui fluid labeled blue button" ng-click="createNewOffer()"><i class="plus icon"></i> Create new Offer</div><h4 class="ui header">About</h4><form class="ui form" ng-class="{loading: loadingAbout}"><div class="field"><label></label> <textarea rows="3" ng-model="user.about_me" ng-blur="saveAbout()"></textarea></div></form><h4 class="ui header">Activities &amp; Interests</h4><div class="ui large list"><div class="item" end-repeat="" ng-repeat="interest in user.interests track by $index"><div class="content"><div class="description"><div class="ui fluid search interests" rel="{{$index}}" ng-class="{\'loading\': interest.loading }"><div class="ui fluid leftright action input" ng-class="{\'error\': interest.error}"><div class="ui removebutton icon circular button" ng-click="removeInterest($index)"><i class="remove icon"></i></div><input type="text" class="prompt" ng-model="interest.interest_subject" ng-change="interestNeedSaving($index)"></div><div class="results"></div></div><div class="ui red pointing fluid label visible transition" ng-if="interest.error">{{interest.errorMessage}}</div></div></div></div></div><div class="ui fluid labeled blue button" ng-click="createNewInterest()"><i class="plus icon"></i> Create new Interest</div><h4 class="ui header">Likes</h4><div class="ui list likes"><div class="item" ng-repeat="like in user.likes | limitTo:5 track by $index"><div class="content"><div class="description">{{ like.name }}</div></div></div></div></div><div class="ui attached segment" id="socialaccounts"><h4 class="ui header">Social Accounts</h4><br><a ng-click="link(\'linkedin\')" class="ui icon linkedin labeled fluid button notconnected" ng-if="social.linkedin.length === 0"><i class="linkedin icon"></i> Connect</a><div class="ui fluid buttons socialbuttons" ng-if="social.linkedin.length > 0"><a href="{{ social.linkedin }}" target="_new" class="ui social icon twitter labeled button"><i class="linkedin icon"></i> {{user.firstName}} <i class="check circle icon right"></i></a> <a ng-click="unlink(\'linkedin\')" class="ui right icon circular button disconnect"><i class="remove icon"></i></a></div><br><a ng-click="link(\'twitter\')" class="ui icon twitter labeled fluid button notconnected" ng-if="social.twitter.length === 0"><i class="twitter icon"></i> Connect</a><div class="ui fluid buttons socialbuttons" ng-if="social.twitter.length > 0"><a href="https://twitter.com/{{ social.twitter }}" target="_new" class="ui social icon twitter labeled button"><i class="twitter icon"></i> {{social.twitter}} <i class="check circle icon right"></i></a> <a ng-click="unlink(\'twitter\')" class="ui right icon circular button disconnect"><i class="remove icon"></i></a></div><br><a href="{{ user.facebookProfile }}" target="_new" class="ui social icon facebook labeled fluid button" ng-if="user.facebookProfile !== \'\'"><i class="facebook icon"></i> {{user.firstName}} <i class="lock icon right"></i></a></div></div><div class="ui basic modal" id="deletePhotoModal"><i class="close icon"></i><div class="header">Please Confirm</div><div class="content" ng-cloak=""><img ng-src="{{userPhotoDelete.photo}}" class="ui image small" alt=""><div class="description"><p>Are you sure you want to delete your photo?</p></div></div><div class="actions"><div class="two fluid ui inverted buttons"><div class="ui red basic inverted button"><i class="remove icon"></i> No</div><div ng-click="deletePhoto()" class="ui green basic inverted button"><i class="checkmark icon"></i> Yes</div></div></div></div><div class="body segment edit" id="my-profile-photos" ng-if="showModal" ng-cloak=""><div class="ui attached segment"><div class="ui fluid primary button" ng-click="closeModal()">Back to Edit Profile</div></div><div class="ui attached segment" ng-class="{loading: albumsLoading}"><div class="ui dividing header" ng-show="currentAlbum == \'\'">Choose Facebook Album</div><div class="ui dividing header" ng-show="currentAlbum != \'\' && showPhotos">Choose Photo</div><div class="ui selection list" ng-hide="hideAlbums"><div class="item" ng-click="getFBPhotos(fbAlbum.id, fbAlbum.name)" ng-repeat="fbAlbum in facebookAlbums track by $index"><img class="ui tiny image" ng-src="{{fbAlbum.picture.data.url}}"><div class="content"><div class="header">{{fbAlbum.name}}</div></div></div></div><div ng-show="hideAlbums" class="ui segment" ng-class="{loading: photosLoading}"><div class="fluid ui button" ng-click="backToAlbums()">Back to Albums</div><h3 ng-show="showPhotos" class="ui header">{{currentAlbum}}</h3><h3 ng-hide="showPhotos" class="ui header">Crop Photo</h3><div class="ui selection list" ng-show="showPhotos"><div ng-click="showCrop($index)" class="item button ok" ng-repeat="fbPhoto in facebookPhotos track by $index"><img class="ui small image" ng-src="{{fbPhoto.source}}"><div class="content"><div class="header"></div></div></div></div><div ng-hide="showPhotos"><div class="cropArea"><img-crop image="myImage" result-image="myCroppedImage" area-type="square"></img-crop></div><br><br><br><div class="ui fluid primary button" ng-click="createPhoto(myCroppedImage)">Save Photo</div></div></div></div></div><script type="text/javascript">\n\'use strict\';\n\nfunction refreshConnect() {\n    angular.element($(\'#socialaccounts\')).scope().refreshUser();\n}\n</script>'),e.put("app/events/event.html",'<div class="ui fixed borderless menu center" id="edittopmenu"><div class="left menu"><a class="ui item" ng-click="eventpage.gotoPreviousState();"><i class="left chevron icon"></i></a></div><div class="header item">Event Details</div><div class="right menu"><a class="ui item" ng-click="eventpage.makeactionEvent();"><span ng-show="isState(\'event.create\') || (isState(\'event.edit\') && eventpage.isHost.option)">Save</span> <span ng-show="isState(\'event.details\') && eventpage.isHost.option">Edit</span></a></div></div><div ui-view=""></div>'),e.put("app/events/event_create.html",'<div class="ui grid" ng-cloak=""><div class="row"><div class="wide column"><ng-include src="\'components/event/event.tpl.html\'"></ng-include></div></div></div>'),e.put("app/events/event_edit.html",'<div class="ui grid" ng-cloak=""><div class="row"><div class="wide column"><ng-include src="\'components/event/eventedit.tpl.html\'"></ng-include></div></div></div>'),e.put("app/events/event_view.html",'<div class="ui grid" ng-cloak=""><div class="row"><div class="wide column"><ng-include src="\'components/event/eventview.tpl.html\'"></ng-include></div></div></div>'),e.put("app/events/events_allevents.html",'<events-feed type="allevents"></events-feed>'),e.put("app/events/events_map.html","Map"),e.put("app/events/events_myevents.html",'<events-feed type="myevents"></events-feed>'),e.put("app/events/events_mynetwork.html",'<events-feed type="mynetwork"></events-feed>'),e.put("app/events/events_page.html",'<div class="ui grid"><div class="row"><div class="wide column"><div class="ui fluid secondary menu center-aligned" id="eventsMobileNav"><a class="item" ui-sref="events.myevents" ng-class="{\'active\': isState(\'events.myevents\')}">MY EVENTS</a> <a class="item" ui-sref="events.mynetwork" ng-class="{\'active\': isState(\'events.mynetwork\')}">MY NETWORK</a> <a class="item" ui-sref="events.allevents" ng-class="{\'active\': isState(\'events.allevents\')}">ALL EVENTS</a></div><div class="ui secondary pointing menu" id="eventsDesktopNav"><a class="item" ui-sref="events.myevents" ng-class="{\'active\': isState(\'events.myevents\')}">MY EVENTS</a> <a class="item" ui-sref="events.mynetwork" ng-class="{\'active\': isState(\'events.mynetwork\')}">MY NETWORK</a> <a class="item" ui-sref="events.allevents" ng-class="{\'active\': isState(\'events.allevents\')}">ALL EVENTS</a><div class="right menu"><a class="ui button small green icon" ng-click="eventspage.showEventModal()"><i class="fa fa-plus-circle icon"></i> Create</a></div></div><div class="ui secondary pointing menu" id="eventsDesktopSubNav"><div class="item"></div><div class="right menu"><a class="item icon active" ng-class="{\'active\': isState(\'events.myevents\') || isState(\'events.mynetwork\') || isState(\'events.allevents\')}"><i class="fa large fa-list icon"></i></a> <a class="item icon"><i class="fa large fa-calendar icon"></i></a> <a class="item" ui-sref="events.map" ng-class="{\'active\': isState(\'events.map\')}"><i class="fa large fa-map-marker icon"></i></a></div></div></div></div></div><div ui-view=""></div><ui-event-create-modal show="eventspage.showModal"></ui-event-create-modal><ui-event-view-modal show="eventspage.showViewModal" eventid="eventspage.viewEvent"></ui-event-view-modal>'),e.put("app/finalstep/finalstep.html",'<div id="finalstep"><div class="ui fixed borderless menu center" id="mainheadermenu"><div class="header item"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">4</i></span> Final Step</div><div class="right menu"><div class="ui item" id="nextButton"><a ui-sref="matchfeed" class="ui button green"><span ng-if="finalstep.twitter === \'\' && finalstep.linkedin === \'\'">Skip</span><span ng-if="finalstep.twitter !== \'\' || finalstep.linkedin !== \'\'">Next</span> &raquo;</a></div></div></div><div class="ui grid fullheight"><div class="row"><div class="wide column"><div class="body segment"><h2 class="ui header dividing center aligned desktopview"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">4</i></span><div class="content">Final Step</div><a ui-sref="matchfeed" id="nextButtonDesktop" class="ui button green"><span ng-if="finalstep.twitter === \'\' && finalstep.linkedin === \'\'">Skip</span><span ng-if="finalstep.twitter !== \'\' || finalstep.linkedin !== \'\'">Next</span> &raquo;</a></h2><h2 class="ui center aligned header withborder"><hr>Connect your LinkedIn and<br>Twitter accounts<hr></h2><div class="ui basic segment"><div class="ui center aligned grid"><div class="row"><div class="column"><div class="ui segment basic center alligend"><p>This will improve your match results within the icebr&#257;k community.</p><p><i class="icon lock"></i> icebr&#257;k will never share your information or post on your behalf.</p></div></div></div><div class="row"><div class="column"><div class="ui segment basic center alligend" ng-class="{\'loading\': finalstep.loading}"><a class="ui linkedin big button" ng-click="finalstep.link(\'linkedin\')" ng-show="finalstep.linkedin === \'\'"><i class="linkedin icon"></i> Connect</a> <a href="{{ finalstep.linkedin }}" target="_new" class="ui social icon linkedin big labeled button" ng-show="finalstep.linkedin !== \'\'"><i class="linkedin icon"></i> {{finalstep.firstName}} <i class="check circle icon right"></i></a><br><br><a class="ui twitter big button" ng-click="finalstep.link(\'twitter\')" ng-show="finalstep.twitter === \'\'"><i class="twitter icon"></i> Connect</a> <a href="https://twitter.com/{{ finalstep.twitter }}" target="_new" class="ui social icon twitter labeled big button" ng-show="finalstep.twitter !== \'\'"><i class="twitter icon"></i> {{finalstep.twitter}} <i class="check circle icon right"></i></a></div></div></div></div></div></div></div></div></div><script type="text/javascript">\n    \'use strict\';\n\n    function refreshConnect() {\n        angular.element($(\'#finalstep\')).scope().finalstep.refreshUser();\n    }\n    </script></div>'),e.put("app/friendprofile/friendprofile.html",'<div id="connectionPage" ng-cloak=""><div class="ui fixed borderless menu" id="headermenu"><a class="icon item" ui-sref="myconnections"><i class="left chevron icon"></i></a><h3 class="ui center aligned header">{{ friendprofile.user.first_name }}</h3></div><div class="ui fixed menu friendsubmenu" id="submenu"><div class="3 fluid large ui buttons"><a ui-sref="conversations({ userId: friendprofile.userInfo.id })" class="ui leftalign button"><i class="fa fa-comment-o icon"></i></a> <a ui-sref="friendprofile({ userId: friendprofile.userInfo.id })" ng-class="{\'active\': friendprofile.middleActive}" class="ui button"><i class="fa fa-user icon"></i></a> <a class="ui button rightalign dropdown"><i class="fa fa-ellipsis-h icon"></i><div class="menu" id="friendmenu"><div class="item">Get Introduced</div><div class="item">Add to Group</div><div class="item">Arrange Meetup</div><div class="item">Flag as Inappropriate</div><div class="item deleteconnection">Remove Connection</div></div></a></div></div><div class="3 fluid large ui buttons friendsubmenu" id="desktopsubmenu"><a ui-sref="conversations({ userId: friendprofile.userInfo.id })" class="ui leftalign button"><i class="fa fa-comment-o icon"></i></a> <a ui-sref="friendprofile({ userId: friendprofile.userInfo.id })" ng-class="{\'active\': friendprofile.middleActive}" class="ui button"><i class="fa fa-user icon"></i></a> <a class="ui button rightalign dropdown"><i class="fa fa-ellipsis-h icon"></i><div class="menu" id="friendmenu"><div class="item">Get Introduced</div><div class="item">Add to Group</div><div class="item">Arrange Meetup</div><div class="item">Flag as Inappropriate</div><div class="item deleteconnection">Remove Connection</div></div></a></div><user-profile person="friendprofile.userInfo" type="friend" header="friendprofileheader" body="matched-profile-body"></user-profile></div><script>\n    \'use strict\';\n    $(\'.ui.dropdown\')\n    .dropdown({\n        onShow:  function(){\n            var scope = angular.element($(".friendsubmenu")).scope();\n            scope.$apply(function(){\n                scope.friendprofile.middleActive = false;\n            });\n        },\n        onHide: function(){\n            var scope = angular.element($(".friendsubmenu")).scope();\n            setTimeout(function() {\n                scope.$apply(function(){\n                    scope.friendprofile.middleActive = true;\n                });\n            }, 100);\n        }\n    })\n    ;\n\n</script><div class="ui basic delete modal"><i class="close icon"></i><div class="header">Please Confirm</div><div class="content"><div class="description"><p>Are you sure you want remove this connection?</p></div></div><div class="actions"><div class="two fluid ui inverted buttons"><div class="ui red negative basic inverted button"><i class="remove icon"></i> No</div><a class="ui green basic inverted button ok"><i class="checkmark icon"></i> Yes</a></div></div></div><script>\n  \'use strict\';\n  $(\'.basic.delete.modal\')\n  .modal({\n    onDeny    : function(){\n      console.log(\'cancel\');\n  },\n  onApprove : function() {\n      console.log(\'deleting user\');\n      angular.element(document.getElementById(\'connectionPage\')).scope().friendprofile.unFriend();\n  }\n})\n  .modal(\'attach events\', \'.deleteconnection\', \'show\');\n\n\n</script>'),e.put("app/goalcreate/goalcreate.html",'<div class="ui fixed borderless menu center" id="mainheadermenu"><div class="header item"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">2</i></span> Create a goal</div><div class="right menu"><div class="ui item" id="nextButton"><div ng-click="createGoal()" ng-class="{\'disabled\': subject === \'\'}" class="ui button green">Next &raquo;</div></div></div></div><div class="ui grid fullheight"><div class="row"><div class="wide column"><div class="body segment"><h2 class="ui header dividing center aligned desktopview"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">2</i></span><div class="content">Create a goal</div><div ng-click="createGoal()" id="nextButtonDesktop" ng-class="{\'disabled\': subject === \'\'}" class="ui button green">Next &raquo;</div></h2><h2 class="ui center aligned header withborder">My goal is to...<hr></h2><div class="ui attached warning message" id="warningmessage" ng-show="messageShow"><div class="header">Warning</div><p>{{message}}</p></div><div class="ui basic segment"><div class="ui center aligned grid"><div class="row"><div class="search-wrapper"><div field-required="false" angucomplete-alt="" text-no-results="No existing goal found. Create new goal &raquo;" minlength="3" input-changed="inputChanged" match-class="highlight" selected-object="selectResult" description-field="description[3]" title-field="description" remote-url="/api/v1/subject/?format=json&description__icontains=" remote-url-data-field="objects" type="text" input-name="description" id="id_description" placeholder="enter your goal here"></div></div></div></div></div><div class="ui secondary segment" id="instructions" ng-hide="subject !== \'\'"><h4>This should be something you want other people to help you with.</h4><br><h4>For example:</h4><p><ul class="unstyled"><li>&quot;Learn to play tennis&quot;</li><li>&quot;Find a running partner&quot;</li><li>&quot;Hire a cat sitter&quot;</li><li>&quot;Move my sofa upstairs&quot;</li></ul></p></div></div></div></div></div>'),e.put("app/inbox/inbox.html",'<div id="search-header"><div class="ui left icon input"><input type="text" ng-model="inbox.q" name="q" placeholder="Search"> <i class="circular search icon"></i></div></div><div id="inbox-body" class="basic ui segment" ng-class="{\'loading\': inbox.loadingMessages}" when-scroll-ends="inbox.loadMore()"><div class="ui selection divided list"><a ng-class="{\'unread\': message.readAt === null}" ui-sref="conversations({ userId: message.friendId })" class="item repeat-animation" ng-if="message.body !== null" ng-repeat="message in inbox.allMessages | filter:{firstName: inbox.q} track by message.id"><div class="ui circular tiny image img-bounding-box" ng-style="{\'background-image\': \'url(//graph.facebook.com/{{ message.facebookId }}/picture?type=large)\'}"></div><span class="message-time">{{message.sentAt}}</span><div class="content"><div class="header">{{message.firstName}}</div><div class="description">{{message.body | words: 8}}</div></div></a></div><three-bounce-spinner class="page-spinner-bar" ng-show="inbox.loadingMore"></three-bounce-spinner></div>'),e.put("app/interests/interests.html",'<div class="ui fixed borderless menu center" id="mainheadermenu"><div class="header item"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">1</i></span> What interests you?</div><div class="right menu"><div class="ui item" id="nextButton"><div ng-click="interest.nextStep()" ng-class="{\'disabled\': interest.counter === 0}" class="ui button green">Next &raquo;</div></div></div></div><div id="interests-header"><h2 class="ui header dividing center aligned desktopview"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">1</i></span><div class="content">What interests you?</div><div ng-click="interest.nextStep()" id="nextButtonDesktopInterests" ng-class="{\'disabled\': interest.counter === 0}" class="ui button green">Next &raquo;</div></h2><div class="ui left icon input"><input type="text" ng-model="interest.searchQuery" ng-change="interest.getAllInterests()" ng-model-options="{debounce:300}" placeholder="Search"> <i class="circular search icon"></i></div></div><div id="interests" class="basic ui segment" ng-class="{\'loading\': interest.loadingInterests}" when-scroll-ends="interest.loadMoreInterests()"><div ng-click="interest.useInterest($index)" class="ui button toggle compact repeat-animation" ng-repeat="inter in interest.allInterests track by $index" ng-class="{\'active\': inter.active, \'loading\': interest.inter.loading}">{{inter.description}}</div><div class="ui info message" ng-show="interest.noResults && !interest.loadingInterests"><p>No interests found.</p><p>Try with another search term or <a href="" ng-click="interest.reset()">reset your search</a>.</p></div><three-bounce-spinner class="page-spinner-bar" ng-show="interest.loadingMore"></three-bounce-spinner></div>'),e.put("app/main/main.html",'<div class="ui center aligned grid fullheight" id="homepage"><div class="row"><div class="wide column"><div class="ui huge header aligned center">{{greetingMessage}} Icebr&#257;k</div></div></div><div class="row"><div class="wide column"><div class="ui small header" id="main-info">Icebr&#257;k connects people with similar goals<br>and interests.</div><br><p><a ui-sref="selectinterests" class="ui green button huge">Start</a></p></div></div></div>'),e.put("app/matchfeed/matchfeed.html",'<matchfeed-profile type="matchfeed"></matchfeed-profile>'),e.put("app/myconnections/myconnections.html",'<div id="search-header"><div class="ui left icon input"><input type="text" ng-model="myconnections.q" ng-change="myconnections.getFriends()" placeholder="Search" ng-model-options="{debounce:300}"> <i class="circular search icon"></i></div></div><div id="friends-list-body" class="basic ui segment" ng-class="{\'loading\': myconnections.loading}" when-scroll-ends="myconnections.loadMoreFriends()"><div class="ui basic segment notice" ng-if="myconnections.noConnections"><div class="ui info message"><p>You don\'t have any connections. Go to your Match Feed to find people with similar goals and interests.</p><p><a class="ui icon button blue" ui-sref="matchfeed">Match Feed</a></p></div></div><div class="ui divided selection list"><div class="ui info message" ng-show="myconnections.noResults && !myconnections.loading && !myconnections.noConnections"><p>No connections found.</p><p>Try with another search term or <a href="" ng-click="myconnections.reset()">reset your search</a>.</p></div><div ng-click="myconnections.gotoConnection($index)" ng-class="{\'unread\': friend.updated_at === null}" class="item repeat-animation" ng-repeat="friend in myconnections.friends track by $index"><div class="ui circular tiny image img-bounding-box" ng-style="{\'background-image\': \'url(//graph.facebook.com/{{ friend.facebook_id }}/picture?type=large)\'}"></div><div class="content"><div class="header">{{friend.first_name}}</div><div class="description"><div class="ui mini statistics"><div class="statistic" tooltips="" tooltip-speed="fast" tooltip-title="Match score"><div class="value"><i class="intersecticon icon"></i></div><div class="label">{{friend.common_goals_offers_interests}}</div></div><div class="statistic" tooltips="" tooltip-speed="fast" tooltip-title="Mutual friends"><div class="value"><i class="empty user usericon icon"></i></div><div class="label">{{friend.totalFriends}}</div></div></div></div></div></div></div><three-bounce-spinner class="page-spinner-bar" ng-show="myconnections.loadingMore"></three-bounce-spinner></div>'),e.put("app/myprofile/myprofile.html",'<user-profile person="myprofile.user" type="loggedInUser" header="my-profile-header" body="matched-profile-body"></user-profile>'),e.put("app/offercreate/offercreate.html",'<div class="ui fixed borderless menu center" id="mainheadermenu"><div class="header item"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">3</i></span> Post an offer</div><div class="right menu"><div class="ui item" id="nextButton"><div ng-click="createOffer()" ng-class="{\'disabled\': subject === \'\'}" class="ui button green">Next &raquo;</div></div></div></div><div class="ui grid fullheight"><div class="row"><div class="wide column"><div class="body segment"><h2 class="ui header dividing center aligned desktopview"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">3</i></span><div class="content">Post an offer</div><div ng-click="createOffer()" id="nextButtonDesktop" ng-class="{\'disabled\': subject === \'\'}" class="ui button green">Next &raquo;</div></h2><h2 class="ui center aligned header withborder">I can help people...<hr></h2><div class="ui attached warning message" id="warningmessage" ng-show="messageShow"><div class="header">Warning</div><p>{{message}}</p></div><div class="ui basic segment"><div class="ui form"><div class="ui center aligned grid"><div class="row"><div class="search-wrapper"><div field-required="false" angucomplete-alt="" minlength="3" text-no-results="No existing offer found. Create new offer &raquo;" input-changed="inputChanged" match-class="highlight" selected-object="selectResult" description-field="description[3]" title-field="description" remote-url="/api/v1/subject/?format=json&description__icontains=" remote-url-data-field="objects" type="text" input-name="description" id="id_description" placeholder="enter your offer here"></div></div></div></div></div></div><div class="ui secondary segment" id="instructions" ng-hide="subject !== \'\'"><h4>This should be something you\'re willing to help other people achieve.</h4><br><h4>For example:</h4><p><ul class="unstyled"><li>&quot;Learn to play the banjo&quot;</li><li>&quot;Find a great restaurant&quot;</li><li>&quot;Take care of their pets&quot;</li><li>&quot;Move their 500 lb sofa&quot;</li></ul></p></div></div></div></div></div>'),e.put("app/settings/settings.html",'<div class="ui grid fullheight" id="settingsPage"><div class="row"><div class="wide column"><div class="ui basic segment"><h4 class="ui header dividing">Settings</h4><form class="ui form"><div class="inline fields"><label for="fruit">Distance units:</label><div class="field"><div class="customradio"><input type="radio" ng-model="settings.distanceUnit" value="miles"> <label ng-click="settings.setUnit(\'miles\')">miles</label></div></div><div class="field"><div class="customradio"><input type="radio" ng-model="settings.distanceUnit" value="km"> <label ng-click="settings.setUnit(\'km\')">km</label></div></div></div><div class="ui divider"></div><div ng-click="settings.saveSettings()" class="ui green button" ng-class="{\'disabled\': !settings.userSettingsChanged, \'loading\': settings.loadingSave}">Save</div></form></div><br><br><div class="ui basic segment"><h4 class="ui header dividing">Manage Account</h4><div class="ui deleteitem red fluid button"><i class="remove circle icon"></i> Delete Account</div><br><br><a class="ui fluid button" ui-sref-ignore="" href="accounts/logout"><i class="fa fa-sign-out icon"></i> Sign out</a></div></div></div></div><div class="ui basic delete modal"><i class="close icon"></i><div class="header">Please Confirm</div><div class="content"><div class="description"><p>Are you sure you want to delete your account?</p></div></div><div class="actions"><div class="two fluid ui inverted buttons"><div class="ui red negative basic inverted button"><i class="remove icon"></i> No</div><a class="ui green basic inverted button ok"><i class="checkmark icon"></i> Yes</a></div></div></div><script>\n\'use strict\';\n$(\'.basic.delete.modal\')\n    .modal({\n        onDeny: function() {},\n        onApprove: function() {\n            angular.element($(\'#settingsPage\')).scope().settings.deleteUser();\n        }\n    })\n    .modal(\'attach events\', \'.deleteitem\', \'show\');\n</script>'),e.put("components/event/event.tpl.html",'<div class="ui basic segment"><form class="ui form"><div class="ui positive message" ng-show="singleevent.showSuccess"><div class="header">New event was successfully created.</div></div><div class="ui negative message" ng-show="singleevent.showError"><div class="header">Warning</div><p ng-repeat="errormsg in singleevent.errorMessage track by $index">{{errormsg}}</p></div><div class="ui large form segment first" id="FirstSegment"><div class="field"><label>Event Name</label> <input auto-focus="" autocomplete="off" class="border-bottom" ng-model="singleevent.event.name" placeholder="{{::singleevent.placeholder.name}}" type="text" name="name"></div><div class="field"><label>Location</label><div class="ui icon input" id="locationInput" ng-class="{\'urlexists\': singleevent.mapurlTrue}"><input autocomplete="off" name="location" attach="\'locationInput\'" google-places-autocomplete="" options="singleevent.autocompleteOptions" placeholder="{{::singleevent.placeholder.location}}" ng-model="singleevent.eventLocation" type="text"> <i ng-click="singleevent.openMap()" class="marker large icon"></i></div></div></div><div class="ui large form segment" id="datePair"><div class="field" ng-class="{\'error\': singleevent.startsTimeError}"><label>Starts</label><div class="ui icon input" id="desktopStartsAt"><input autocomplete="off" class="date start" ng-model="singleevent.starts_on_date" placeholder="{{::singleevent.placeholder.starts}}" type="text" name="starts_on_date"> <i class="calendar icon"></i></div><input name="starts_on" autocomplete="off" ng-change="singleevent.checkDatesStarts()" ng-class="{\'fulldisplay\': singleevent.event.starts_on !== \'\' && singleevent.event.starts_on !== null}" ng-if="singleevent.showMobile" id="startsAtDate" class="border-bottom" placeholder="Starts" type="datetime-local" ng-model="singleevent.event.starts_on"> <input autocomplete="off" id="startsAtTime" class="time start" placeholder="{{::singleevent.placeholder.startsTime}}" type="text" ng-model="singleevent.starts_on_time" name="starts_on_time"></div><div class="field" ng-class="{\'error\': singleevent.endsTimeError}"><label>Ends</label><div class="ui icon input" id="desktopEndsAt"><input autocomplete="off" class="date end" ng-model="singleevent.ends_on_date" placeholder="{{::singleevent.placeholder.ends}}" type="text" name="ends_on_date"> <i class="calendar icon"></i></div><input name="ends_on" autocomplete="off" ng-change="singleevent.checkDatesEnds()" ng-class="{\'fulldisplay\': singleevent.event.ends_on !== \'\' && singleevent.event.ends_on !== null}" ng-if="singleevent.showMobile" id="endsAtDate" class="ui border-bottom" placeholder="Ends" type="datetime-local" ng-model="singleevent.event.ends_on"> <input autocomplete="off" id="endsAtTime" class="time end" placeholder="{{::singleevent.placeholder.endsTime}}" type="text" ng-model="singleevent.ends_on_time" name="ends_on_time"></div><div class="field"><label>Repeat</label> <input autocomplete="off" name="repeat" id="repeat" placeholder="{{::singleevent.placeholder.repeat}}" type="text" ng-model="singleevent.event.repeat"><div class="ui icon input" id="desktopRepeatUntil"><input autocomplete="off" class="simpledate" ng-model="singleevent.event.repeatUntil" placeholder="{{::singleevent.placeholder.repeatUntil}}" type="text"> <i class="calendar icon"></i></div></div></div><div class="ui large form segment icon-segment"><div class="field"><label>Costs</label><div class="fluid ui right labeled icon button"><i class="fa-angle-right fa icon large"></i> {{::singleevent.placeholder.costs}}</div></div></div><div class="ui large form segment icon-segment"><div class="field"><label>Invitations</label><div class="fluid ui right labeled icon button"><i class="fa-angle-right fa icon large"></i> {{::singleevent.placeholder.invitations}}</div></div></div><div class="ui large form segment icon-segment"><div class="field" id="attachmentsDesc"><label>Attachments</label><div class="fluid ui right labeled icon button with-left-icon"><i class="fa-paperclip fa icon large left-icon"></i> <i class="fa-angle-right fa icon large"></i> {{::singleevent.placeholder.attachments}}</div></div><div class="ui divider" id="last-section"></div><div class="field"><label>Description</label> <textarea autocomplete="off" name="description" rows="4" class="border-bottom" placeholder="{{::singleevent.placeholder.description}}" ng-model="singleevent.event.description"></textarea></div></div><div class="ui large form segment" id="actionForm"><div id="actionButton" ng-click="singleevent.saveEvent()" class="ui green button"><i class="fa fa-plus-circle icon"></i> Create</div></div></form></div><script>\n    \'use strict\';\n\n\n// initialize input widgets first\n$(\'#datePair .time\').timepicker({\n    \'showDuration\': true,\n    \'timeFormat\': \'H:i\',\n    \'scrollDefaultNow\': true\n});\n\n$(\'#datePair .date\').datepicker({\n    \'format\': \'mm/dd/yyyy\',\n    \'autoclose\': true,\n    \'startDate\': moment().format(\'MM/DD/YYYY\'),\n    \'todayHighlight\': true,\n});\n\n$(\'#datePair .simpledate\').datepicker({\n    \'format\': \'mm/dd/yyyy\',\n    \'autoclose\': true,\n    \'startDate\': moment().format(\'MM/DD/YYYY\'),\n    \'todayHighlight\': true,\n});\n\n\n// initialize datepair\n$(\'#datePair\').datepair({\n    defaultTimeDelta: 3600000,\n});\n\n\n</script>'),e.put("components/event/eventedit.tpl.html",'<div class="ui basic segment"><form class="ui form" ng-class="{\'loading\': viewevent.loadingEvent}"><div class="ui positive message" ng-show="viewevent.showSuccess"><div class="header">New event was successfully created.</div></div><div class="ui negative message" ng-show="viewevent.showError"><div class="header">Warning</div><p ng-repeat="errormsg in viewevent.errorMessage track by $index">{{errormsg}}</p></div><div class="ui large form segment first" id="FirstSegment"><div class="field"><label>Event Name</label> <input auto-focus="" autocomplete="off" class="border-bottom" ng-model="viewevent.eventEdit.name" placeholder="{{::viewevent.placeholder.name}}" type="text" name="name"></div><div class="field"><label>Location</label><div class="ui icon input" id="locationInput2" ng-class="{\'urlexists\': viewevent.mapurlTrue}"><input autocomplete="off" name="location" attach="\'locationInput2\'" google-places-autocomplete="" options="viewevent.autocompleteOptions" placeholder="{{::viewevent.placeholder.location}}" ng-model="viewevent.eventLocation" type="text"> <i ng-click="viewevent.openMap()" class="marker large icon"></i></div></div></div><div class="ui large form segment" id="datePairEdit"><div class="field" ng-class="{\'error\': viewevent.startsTimeError}"><label>Starts</label><div class="ui icon input" id="desktopStartsAt"><input autocomplete="off" class="date start" ng-model="viewevent.starts_on_date" placeholder="{{::viewevent.placeholder.starts}}" type="text" name="starts_on_date"> <i class="calendar icon"></i></div><input name="starts_on" autocomplete="off" ng-change="viewevent.checkDatesStarts()" ng-class="{\'fulldisplay\': viewevent.eventEdit.starts_on !== \'\' && viewevent.eventEdit.starts_on !== null}" ng-if="viewevent.showMobile" id="startsAtDate" class="border-bottom" placeholder="Starts" type="datetime-local" ng-model="viewevent.eventEdit.starts_on"> <input autocomplete="off" id="startsAtTime" class="time start" placeholder="{{::viewevent.placeholder.startsTime}}" type="text" ng-model="viewevent.starts_on_time" name="starts_on_time"></div><div class="field" ng-class="{\'error\': viewevent.endsTimeError}"><label>Ends</label><div class="ui icon input" id="desktopEndsAt"><input autocomplete="off" class="date end" ng-model="viewevent.ends_on_date" placeholder="{{::viewevent.placeholder.ends}}" type="text" name="ends_on_date"> <i class="calendar icon"></i></div><input name="ends_on" autocomplete="off" ng-change="viewevent.checkDatesEnds()" ng-class="{\'fulldisplay\': viewevent.eventEdit.ends_on !== \'\' && viewevent.eventEdit.ends_on !== null}" ng-if="viewevent.showMobile" id="endsAtDate" class="ui border-bottom" placeholder="Ends" type="datetime-local" ng-model="viewevent.eventEdit.ends_on"> <input autocomplete="off" id="endsAtTime" class="time end" placeholder="{{::viewevent.placeholder.endsTime}}" type="text" ng-model="viewevent.ends_on_time" name="ends_on_time"></div><div class="field"><label>Repeat</label> <input autocomplete="off" name="repeat" id="repeat" placeholder="{{::viewevent.placeholder.repeat}}" type="text" ng-model="viewevent.eventEdit.repeat"><div class="ui icon input" id="desktopRepeatUntil"><input autocomplete="off" class="simpledate" ng-model="viewevent.eventEdit.repeatUntil" placeholder="{{::viewevent.placeholder.repeatUntil}}" type="text"> <i class="calendar icon"></i></div></div></div><div class="ui large form segment icon-segment"><div class="field"><label>Costs</label><div class="fluid ui right labeled icon button"><i class="fa-angle-right fa icon large"></i> {{::viewevent.placeholder.costs}}</div></div></div><div class="ui large form segment icon-segment"><div class="field"><label>Invitations</label><div class="fluid ui right labeled icon button"><i class="fa-angle-right fa icon large"></i> {{::viewevent.placeholder.invitations}}</div></div></div><div class="ui large form segment icon-segment"><div class="field" id="attachmentsDesc"><label>Attachments</label><div class="fluid ui right labeled icon button with-left-icon"><i class="fa-paperclip fa icon large left-icon"></i> <i class="fa-angle-right fa icon large"></i> {{::viewevent.placeholder.attachments}}</div></div><div class="ui divider" id="last-section"></div><div class="field"><label>Description</label> <textarea autocomplete="off" name="description" rows="4" class="border-bottom" placeholder="{{::viewevent.placeholder.description}}" ng-model="viewevent.eventEdit.description"></textarea></div></div><div class="ui large form segment" id="actionForm"><div id="deleteEventButton" class="ui red button">Delete</div><div id="actionButton" ng-click="viewevent.saveEvent()" class="ui green button"><i class="fa fa-save icon"></i> Save Changes</div></div></form></div><div class="ui small modal deletemodal" id="deleteEventModal"><i class="close icon"></i><div class="header">Please Confirm</div><div class="content"><p>Are you sure you want to delete this event?</p></div><div class="actions"><div class="ui negative basic icon labeled button"><i class="remove icon"></i> No</div><a class="ui positive right button icon labeled"><i class="checkmark icon"></i> Yes</a></div></div><script>\n\'use strict\';\n$(\'#deleteEventModal\')\n    .modal({\n        onDeny: function() {},\n        onApprove: function() {\n            angular.element($(\'#deleteEventButton\')).scope().viewevent.deleteEvent();\n        }\n    })\n    .modal(\'attach events\', \'#deleteEventButton\', \'show\')\n    .modal(\'setting\', \'allowMultiple\', true);\n</script><script>\n\'use strict\';\n\n\n// initialize input widgets first\n$(\'#datePairEdit .time\').timepicker({\n    \'showDuration\': true,\n    \'timeFormat\': \'H:i\',\n    \'scrollDefaultNow\': true\n});\n\n$(\'#datePairEdit .date\').datepicker({\n    \'format\': \'mm/dd/yyyy\',\n    \'autoclose\': true,\n    \'startDate\': moment().format(\'MM/DD/YYYY\'),\n    \'todayHighlight\': true,\n});\n\n$(\'#datePairEdit .simpledate\').datepicker({\n    \'format\': \'mm/dd/yyyy\',\n    \'autoclose\': true,\n    \'startDate\': moment().format(\'MM/DD/YYYY\'),\n    \'todayHighlight\': true,\n});\n\n\n// initialize datepair\n$(\'#datePairEdit\').datepair({\n    defaultTimeDelta: 3600000,\n});\n</script>'),e.put("components/event/eventview.tpl.html",'<div class="ui center aligned header" ng-show="viewevent.isHost === true && !viewevent.loadingEvent && !viewevent.eventNotFound">You are the host of this event.</div><div class="row" ng-show="viewevent.isHost === false && !viewevent.loadingEvent && !viewevent.eventNotFound"><div class="wide column"><div class="ui fluid secondary menu" id="event-going-menu"><div class="header item">GOING?</div><a class="item" ng-click="viewevent.changeRsvpStatus(\'yes\')" ng-class="{active: viewevent.eventRsvp.status === \'yes\'}">YES</a> <a class="item" ng-click="viewevent.changeRsvpStatus(\'no\')" ng-class="{active: viewevent.eventRsvp.status === \'no\'}">NO</a> <a class="item" ng-click="viewevent.changeRsvpStatus(\'maybe\')" ng-class="{active: viewevent.eventRsvp.status === \'maybe\'}">MAYBE</a></div></div></div><div class="ui negative message" ng-show="viewevent.eventNotFound && !viewevent.loadingEvent"><div class="header">Warning</div><p>This event doesn\'t exist anymore.</p></div><div class="ui basic segment" ng-class="{\'hidevisibility\': viewevent.eventNotFound}"><form class="ui form" ng-class="{\'loading\': viewevent.loadingEvent}"><div class="ui large form segment first editable" id="FirstSegment"><div class="field"><label class="specialpadding">Event Name</label><div class="eventcontent"><span id="eventName">{{viewevent.event.name}}</span></div></div><div class="ui divider" id="last-section"></div><div class="field" id="locationField"><label class="specialpadding">Location</label><div class="eventcontent" ng-class="{\'urlexists\': viewevent.mapurlTrue}"><i ng-click="viewevent.openMap()" class="marker large icon"></i> <span class="locationContent"><span ng-if="viewevent.event.location_name.trim() !== viewevent.event.city.trim()">{{viewevent.event.location_name}}</span> <span><br ng-if="viewevent.event.location_name.trim() !== viewevent.event.city.trim() && viewevent.event.location_name !== null && viewevent.event.location_name.trim() !== \'\' && viewevent.event.location_name.trim() !== viewevent.event.street.trim()"><span ng-if="viewevent.event.street !== null && viewevent.event.street.trim() !== \'\' && viewevent.event.location_name.trim() !== viewevent.event.street.trim()">{{viewevent.event.street}}<br></span> <span ng-if="viewevent.event.city !== null && viewevent.event.city.trim() !== \'\'">{{viewevent.event.city}} {{viewevent.event.zipcode}} {{viewevent.event.state}}</span></span></span></div></div></div><div class="ui large form segment" id="DatesSection" ng-if="viewevent.showMobile"><div class="field"><span>{{viewevent.firstrow}}</span></div><div class="ui divider" id="last-section"></div><div class="field"><span class="timeslot">{{viewevent.secondrow}}</span> <span class="repeats">repeats weekly</span><div class="cleardiv"></div></div><div class="ui divider" id="last-section"></div><div class="field"><span class="cost"><strong>Cost:</strong> $25 (in advance)</span> <span class="paid"><i class="fa fa-check icon"></i><strong>PAID</strong></span><div class="cleardiv"></div></div></div><div class="ui large form segment" id="DatesSection" ng-if="!viewevent.showMobile"><div class="field"><label class="specialpadding">Starts</label><div class="eventcontent"><span>{{viewevent.firstrow}}</span></div></div><div class="ui divider" id="last-section"></div><div class="field"><label class="specialpadding">Ends</label><div class="eventcontent"><span class="timeslot">{{viewevent.secondrow}}</span> <span class="repeats">repeats weekly</span><div class="cleardiv"></div></div></div><div class="ui divider" id="last-section"></div><div class="field"><label class="specialpadding">Cost</label><div class="eventcontent"><span class="cost">$25 (in advance)</span> <span class="paid"><i class="fa fa-check icon"></i><strong>PAID</strong></span><div class="cleardiv"></div></div></div></div><div class="ui large form segment" id="HostedSection" ng-if="!viewevent.showMobile"><div class="field"><label class="specialpadding">Hosted By</label><div class="eventcontent"><span>Thomas Tracey</span></div></div><div class="ui divider" id="last-section"></div><div class="field"><label class="specialpadding">Attending</label><div class="eventcontent"><span class="people-attending">{{viewevent.event.friend_attendees_count}} people attending</span> <span class="remaining-spots">0 spots remaining</span><div class="cleardiv"></div></div></div></div><div class="ui large form segment" id="HostedSection" ng-if="viewevent.showMobile"><div class="field"><span>Hosted By Thomas Tracey</span></div><div class="ui divider" id="last-section"></div><div class="field"><span class="people-attending">{{viewevent.event.friend_attendees_count}} people attending</span> <span class="remaining-spots">0 spots remaining</span><div class="cleardiv"></div></div></div><div class="ui large form segment icon-segment"><div class="field"><label class="specialpadding">Group Chat</label><div class="fluid ui right labeled icon button"><i class="fa-angle-right fa icon large"></i> 15 messages</div></div></div><div class="ui large form segment" id="eventDescription"><div class="field" ng-if="viewevent.showMobile"><span>Event Description:</span></div><div class="ui divider" id="last-section" ng-if="viewevent.showMobile"></div><div class="field"><label class="specialpadding">Description</label><div class="eventcontent"><span>{{viewevent.event.description}}</span></div></div></div><div class="ui large form segment" id="actionForm" ng-if="viewevent.isHost"><div id="actionButton" ng-click="viewevent.editEvent()" class="ui green button"><i class="fa fa-edit icon"></i> Edit</div></div></form></div>'),e.put("components/eventsfeed/eventsfeed.directive.html","<ng-include src=\"'components/eventsfeed/eventsfeed.tpl.html'\"></ng-include>"),e.put("components/eventsfeed/eventsfeed.tpl.html",'<div id="eventsfeed-list-body" class="basic ui segment" ng-class="{\'loading\': eventsfeed.loading}" when-scroll-ends="eventsfeed.loadMoreEvents()"><div class="ui basic segment notice" ng-if="eventsfeed.noEvents"><div class="ui info message"><p>You don\'t have any events.</p></div></div><div class="eventgroup" ng-repeat="eventcontent in eventsfeed.events track by $index"><div class="eventdate">{{eventcontent.date}}</div><a class="ui fluid card" ng-click="eventsfeed.gotoEvent(event.id)" ng-repeat="event in eventcontent.items track by $index"><div class="image"><img src="/static/img/placeholder-image.jpg"></div><div class="content"><div class="header">{{event.name}}</div><div class="meta"><span ng-if="event.location_name.trim() !== event.city.trim()">{{event.location_name}}</span> <span><br ng-if="event.location_name.trim() !== event.city.trim() && event.location_name !== null && event.location_name.trim() !== \'\' && event.location_name.trim() !== event.street.trim()"><span ng-if="event.street !== null && event.street.trim() !== \'\' && event.location_name.trim() !== event.street.trim()">{{event.street}}<br></span> <span ng-if="event.city !== null && event.city.trim() !== \'\'">{{event.city}} {{event.zipcode}} {{event.state}}</span></span><div class="description"><div class="ui mini statistics"><div class="statistic" data-tooltip="Match Score"><div class="value"><i class="intersecticon icon"></i></div><div class="label">{{event.cumulative_match_score}}</div></div><div class="statistic" data-tooltip="Total Friends"><div class="value"><i class="empty user usericon icon"></i></div><div class="label">{{event.friend_attendees_count}}</div></div></div></div></div><div class="extra content distance">{{event.distance[0]}} {{event.distance[1]}} away</div></div></a></div><three-bounce-spinner class="page-spinner-bar" ng-show="eventsfeed.loadingMore"></three-bounce-spinner></div>'),e.put("components/filter/matchfeedFilter.directive.html",'<div id="FilterController" class="{{filter.class}}" ng-cloak=""><h4 class="ui header" ng-show="filter.class === \'desktopview\'">FILTERS</h4><div class="ui fitted divider" ng-show="filter.class === \'desktopview\'"></div><div id="{{filter.id}}" class="ui form"><form name="filterForm" id="filterForm"><div class="field"><label>Distance <span class="range">{{filter.distanceValue}} {{filter.distanceUnit}}</span></label><rzslider rz-slider-hide-limit-labels="false" rz-slider-model="filter.distanceValue" rz-slider-floor="1" rz-slider-ceil="10000"></rzslider></div><div class="field"><label>Age <span class="range">{{filter.ageSlider.min}} &ndash; {{filter.ageSlider.max}}</span></label><rzslider rz-slider-hide-limit-labels="false" rz-slider-floor="filter.ageSlider.floor" rz-slider-ceil="filter.ageSlider.ceil" rz-slider-model="filter.ageSlider.min" rz-slider-high="filter.ageSlider.max"></rzslider></div><div class="field"><label class="">Show</label></div><div class="field field-checkbox"><uicheckbox value="m" change="filter.toggleGender(value, checked)" checked="{{filter.checkedmale}}" type="toggle" ng-model="filter.male">Men</uicheckbox></div><div class="field field-checkbox"><uicheckbox value="f" change="filter.toggleGender(value, checked)" checked="{{filter.checkedfemale}}" type="toggle" ng-model="filter.female">Women</uicheckbox></div><div class="field"><label class="">Order By</label></div><div class="field"><select class="icebrakselect" ng-change="filter.saveFiltersDebounce()" ng-options="item.value as item.name for item in filter.orderByValues" ng-model="filter.orderBy"></select></div><div class="field keywords-label"><label class="">Keywords</label></div><div class="field" ng-show="filter.showFilterMessage"><label><div class="ui small negative message"><p>{{filter.filtermessage}}</p></div></label></div><div class="field"><div class="ui icon input" id="keywordsSearch"><input ng-minlength="3" type="text" placeholder="Enter keyword" ng-enter="filter.addKeyword(filter.newKeyword)" ng-model="filter.newKeyword"> <i class="circular plus icon" ng-click="filter.addKeyword(filter.newKeyword)"></i></div></div><a ng-click="filter.removeKeyword($index)" href="" class="item" ng-repeat="keyword in filter.myKeywords track by $index"><div class="content"><div class="header"><i class="circle remove icon"></i> {{keyword}}</div></div></a><div class="ui divider"></div><a href="" class="button ui submit green" ng-class="{\'disabled\': !filter.changed}" ng-click="filter.refreshMatchFeed()" role="button">Update</a></form></div></div>'),e.put("components/filterEvents/filterEvents.template.html",'<div id="FilterController" class="{{filter.class}}" ng-cloak=""><h4 class="ui header" ng-show="filter.class === \'desktopview\'">FILTERS</h4><div class="ui fitted divider" ng-show="filter.class === \'desktopview\'"></div><div id="{{filter.id}}" class="ui form"><form name="filterForm" id="filterForm"><div class="field"><label>Distance <span class="range">{{filter.distanceValue}} {{filter.distanceUnit}}</span></label><rzslider rz-slider-hide-limit-labels="false" rz-slider-model="filter.distanceValue" rz-slider-floor="1" rz-slider-ceil="10000"></rzslider></div><div class="field keywords-label"><label class="">Keywords</label></div><div class="field" ng-show="filter.showFilterMessage"><label><div class="ui small negative message"><p>{{filter.filtermessage}}</p></div></label></div><div class="field"><div class="ui icon input" id="keywordsSearch"><input ng-minlength="3" type="text" placeholder="Enter keyword" ng-enter="filter.addKeyword(filter.newKeyword)" ng-model="filter.newKeyword"> <i class="circular plus icon" ng-click="filter.addKeyword(filter.newKeyword)"></i></div></div><a ng-click="filter.removeKeyword($index)" href="" class="item" ng-repeat="keyword in filter.myKeywords track by $index"><div class="content"><div class="header"><i class="circle remove icon"></i> {{keyword}}</div></div></a><div class="ui divider"></div><a href="" class="button ui submit green" ng-class="{\'disabled\': !filter.changed}" ng-click="filter.refreshEventsFeed()" role="button">Update</a></form></div></div>'),e.put("components/matchfeedprofile/matchfeedprofile.template.html",'<div class="ui grid" ng-cloak=""><div class="row"><div class="wide column"><div ng-if="userprofile.total > 0"><three-bounce-spinner ng-show="userprofile.loadingFeed" class="ui inverted dimmer transition visible active"></three-bounce-spinner><div ng-show="!showDimmer"><div class="dimmable"><h2 class="ui dividing header" id="desktopmatchheader" ng-if="userprofile.showfullprofile">{{ userprofile.user.first_name }}, {{ userprofile.user.age }}<div class="action-header"><div ng-click="userprofile.cancelMatchDesktop()" class="ui circular icon negative button"><i class="remove icon"></i></div><div ng-click="userprofile.confirmMatchDesktop()" class="ui circular icon positive button"><i class="check icon"></i></div></div><div class="sub header">{{userprofile.user.distance[0]}} {{userprofile.user.distance[1]}}<ng-include src="\'components/profile/statistics-horizontal.tpl.html\'"></ng-include></div></h2><div class="ui basic segment" id="matchfeedheader-slider" ng-if="userprofile.showfullprofile"><ng-include src="\'components/profile/headerphotoslider.tpl.html\'"></ng-include></div><div class="header segment" id="matched-profile-header" ng-hide="userprofile.showfullprofile"><div class="ui segment"><div ng-click="userprofile.changeTopMenu()" ng-show="userprofile.photosSlider[0].cropped_photo === \'\'" class="ui circular middle aligned left floated small image img-bounding-box" style="background-image: url(\'{{userprofile.photosSlider[0].photo}}\');"></div><div ng-click="userprofile.changeTopMenu()" ng-show="userprofile.photosSlider[0].cropped_photo !== \'\'" class="ui circular middle aligned left floated small image img-bounding-box" style="background-image: url(\'{{userprofile.photosSlider[0].cropped_photo}}\');"></div><h2 ng-click="userprofile.changeTopMenu()" class="ui header">{{ userprofile.user.first_name }}, {{ userprofile.user.age }}<div class="sub header">{{userprofile.user.distance[0]}} {{userprofile.user.distance[1]}}</div></h2><ng-include src="\'components/profile/statistics.tpl.html\'"></ng-include></div></div><div class="body segment" id="matched-profile-body" ng-click="userprofile.changeTopMenu()"><div class="ui attached segment" ng-show="userprofile.showfullprofile" id="mobilematchheader"><h3 class="ui left floated header">{{ userprofile.user.first_name }}, {{ userprofile.user.age }}</h3><h5 class="ui right floated header">{{userprofile.user.distance[0]}} {{userprofile.user.distance[1]}}</h5><br><ng-include src="\'components/profile/statistics-horizontal.tpl.html\'"></ng-include></div><div class="ui attached segment"><ng-include src="\'components/profile/profilebody.tpl.html\'"></ng-include></div></div><div class="footer segment" id="matched-profile-footer" ng-hide="userprofile.showfullprofile || userprofile.total === 0"><div class="ui grid one column aligned center"><div class="row"><div class="column"><div class="ui labeled icon menu"><a href="" ng-click="userprofile.cancelMatch()" class="item" id="left_button"><i class="remove red circle icon"></i></a> <a href="" ng-click="userprofile.confirmMatch()" class="item" id="accept_button"><i class="check green circle icon"></i></a></div></div></div></div><br></div></div></div></div><div class="body segment" ng-show="userprofile.total === 0 && !userprofile.loadingFeed"><div class="ui info message"><div class="header">Sorry. Currently you don\'t have any matches.</div><p>Add more information to your profile. <a class="ui icon mini button blue" ui-sref="myprofile"><i class="angle double right icon"></i></a></p><p>Adjust your match filter to be less restrictive. <a class="ui icon mini button blue" id="showFilter" href=""><i class="angle double right icon"></i></a></p></div></div></div></div></div><page-dimmer ng-model="userprofile.showDimmer" show="true"><h1 class="ui header"><img src="/static/img/icebrak-logo-dark.png" class="ui medium image centered" alt=""></h1><h2 class="ui header">Locating people with similar goals...</h2><fading-circle-spinner></fading-circle-spinner></page-dimmer><script>\n\'use strict\';\n\n$(\'.right.sidebar.matchfeedfilter\')\n    .sidebar(\'attach events\', \'#showFilter\', \'show\');\n$(\'#showFilter\')\n    .removeClass(\'disabled\');\n</script>'),e.put("components/modal/modalcreate.html",'<div class="ui modal small centeraligned" id="createEventsModal"><i class="close icon" ng-click="singleevent.closeEventModal()"></i><div class="header">Create Event</div><div class="content"><ng-include src="\'components/event/event.tpl.html\'"></ng-include></div></div>'),e.put("components/modal/modalview.html",'<div class="ui modal small centeraligned" id="{{viewevent.modalId}}"><i class="close icon" ng-click="viewevent.closeEventModal()"></i><div class="header">Event Details</div><div class="content"><ng-include ng-if="!viewevent.editMode" src="\'components/event/eventview.tpl.html\'"></ng-include><ng-include ng-if="viewevent.editMode" src="\'components/event/eventedit.tpl.html\'"></ng-include></div></div>'),e.put("components/profile/headerphotoslider.tpl.html",'<div class="pagination-container"><div id="PhotoSlider" ng-if="userprofile.photosSlider.length > 0"><flex-slider slider-id="photoSlider" touch="true" slideshow="false" slide="item in userprofile.photosSlider | orderBy:\'order\' track by $index"><li><img ng-click="userprofile.nextImage()" ng-show="item.cropped_photo === \'\'" class="ui image" ng-src="{{item.photo}}"> <img ng-click="userprofile.nextImage()" ng-show="item.cropped_photo !== \'\'" class="ui image" ng-src="{{item.cropped_photo}}"></li></flex-slider></div></div>'),e.put("components/profile/profilebody.tpl.html",'<h4 class="ui header" ng-if="userprofile.user.goals.length > 0 || userprofile.type === \'loggedInUser\'">Goals</h4><div class="ui list" ng-if="userprofile.type === \'matchfeed\'"><div ng-hide="!userprofile.showfullprofile && $index > 2" class="item" ng-repeat="goal in userprofile.user.goals | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': goal.match === 1, \'empty smallicon\': goal.match === 0 }"></i><div class="content"><div class="description">{{ goal.value }}</div></div></div></div><div class="ui list" ng-if="userprofile.type === \'friend\'"><div ng-hide="!userprofile.showfullprofile" class="item" ng-repeat="goal in userprofile.user.goals | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': goal.match === 1, \'empty smallicon\': goal.match === 0 }"></i><div class="content"><div class="description">{{ goal.value }}</div></div></div></div><div class="ui list" ng-if="userprofile.type === \'loggedInUser\'"><div class="item" ng-repeat="goal in userprofile.user.goals track by $index"><i class="icon empty"></i><div class="content"><div class="description">{{ goal.subject }}</div></div></div><p ng-if="userprofile.user.goals.length === 0">No goals yet.</p></div><h4 class="ui header" ng-if="userprofile.user.offers.length > 0 || userprofile.type === \'loggedInUser\'">Offers</h4><div class="ui list" ng-if="userprofile.type === \'matchfeed\'"><div ng-hide="!userprofile.showfullprofile && $index > 2" class="item" ng-repeat="offer in userprofile.user.offers | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': offer.match === 1, \'empty smallicon\': offer.match === 0 }"></i><div class="content"><div class="description">{{ offer.value }}</div></div></div></div><div class="ui list" ng-if="userprofile.type === \'friend\'"><div ng-hide="!userprofile.showfullprofile" class="item" ng-repeat="offer in userprofile.user.offers | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': offer.match === 1, \'empty smallicon\': offer.match === 0 }"></i><div class="content"><div class="description">{{ offer.value }}</div></div></div></div><div class="ui list" ng-show="userprofile.type === \'loggedInUser\'"><div class="item" ng-repeat="offer in userprofile.user.offers track by $index"><i class="icon empty"></i><div class="content"><div class="description">{{ offer.subject }}</div></div></div><p ng-if="userprofile.user.offers.length === 0">No offers yet.</p></div><h4 class="ui header" ng-if="userprofile.user.about_me.length > 0 && userprofile.showfullprofile">About</h4><div class="ui list" ng-if="userprofile.user.about_me.length > 0 && userprofile.showfullprofile"><div class="item"><i class="empty icon"></i><div class="content"><div class="description"><span>{{userprofile.user.about_me}}</span></div></div></div></div><h4 class="ui header" ng-if="userprofile.user.interests.length > 0 || userprofile.type === \'loggedInUser\'">Activities &amp; Interests</h4><div class="ui list" ng-if="userprofile.type === \'matchfeed\'"><div class="item" ng-hide="!userprofile.showfullprofile && $index > 2" ng-repeat="interest in userprofile.user.interests | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': interest.match === 1, \'empty smallicon\': interest.match === 0 }"></i><div class="content"><div class="description">{{ interest.value }}</div></div></div></div><div class="ui list" ng-if="userprofile.type === \'friend\'"><div class="item" ng-hide="!userprofile.showfullprofile" ng-repeat="interest in userprofile.user.interests | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': interest.match === 1, \'empty smallicon\': interest.match === 0 }"></i><div class="content"><div class="description">{{ interest.value }}</div></div></div></div><div class="ui list" ng-show="userprofile.type === \'loggedInUser\'"><div class="item" ng-repeat="interest in userprofile.user.interests | limitTo:5 track by $index"><i class="icon empty"></i><div class="content"><div class="description">{{ interest.interest_subject }}</div></div></div><p ng-if="userprofile.user.interests.length === 0">No interests yet.</p></div><h4 ng-if="userprofile.showfullprofile && userprofile.user.friends.length > 0" class="ui header">Mutual Friends</h4><div ng-if="userprofile.showfullprofile && userprofile.user.friends.length > 0" class="ui selection list"><a ui-sref="friendprofile({ userId: userprofile.friend.user_id })" class="item" ng-repeat="friend in userprofile.user.friends track by $index"><img class="ui avatar image" ng-src="http://graph.facebook.com/{{ friend.facebook_id }}/picture"><div class="content"><div class="header">{{ friend.first_name }}</div></div></a></div><h4 ng-if="userprofile.showfullprofile && userprofile.user.facebookfriends.length > 0" class="ui header">Mutual Facebook Friends ({{ userprofile.user.facebookfriends.length }})</h4><div ng-if="userprofile.showfullprofile && userprofile.user.facebookfriends.length > 0" class="ui selection list"><div class="item" ng-repeat="friend in userprofile.user.facebookfriends track by $index"><img class="ui avatar image" ng-src="http://graph.facebook.com/{{ friend.facebook_id }}/picture"><div class="content"><div class="header">{{ friend.first_name }}</div></div></div></div><h4 ng-if="showfullprofile && userprofile.user.twitterfriends.length > 0" class="ui header">Mutual Twitter Friends ({{ userprofile.user.twitterfriends.length }})</h4><div ng-if="showfullprofile && userprofile.user.twitterfriends.length > 0" class="ui selection list"><div class="item" ng-repeat="friend in userprofile.user.twitterfriends track by $index"><img class="ui avatar image" ng-src="{{friend.profile_image_url}}"><div class="content"><div class="header">{{ friend.name }}</div></div></div></div><h4 ng-if="showfullprofile && userprofile.user.twitterfollowers.length > 0" class="ui header">Mutual Twitter Followers ({{ userprofile.user.twitterfollowers.length }})</h4><div ng-if="showfullprofile && userprofile.user.twitterfollowers.length > 0" class="ui selection list"><div class="item" ng-repeat="friend in userprofile.user.twitterfollowers track by $index"><img class="ui avatar image" ng-src="{{friend.profile_image_url}}"><div class="content"><div class="header">{{ friend.name }}</div></div></div></div><h4 ng-if="showfullprofile && userprofile.user.linkedinconnections.length > 0" class="ui header">Mutual LinkedIn Connections ({{ userprofile.user.linkedinconnections.length }})</h4><div ng-if="showfullprofile && userprofile.user.linkedinconnections.length > 0" class="ui selection list"><div class="item" ng-repeat="friend in userprofile.user.linkedinconnections track by $index"><img class="ui avatar image" ng-src="{{friend.pictureUrls.values[0]}}"><div class="content"><div class="header">{{ friend.firstName }}</div></div></div></div><h4 class="ui header" ng-if="userprofile.user.likes.length > 0 || userprofile.type === \'loggedInUser\'">Likes</h4><div class="ui list likes" ng-if="userprofile.type === \'matchfeed\'"><div class="item" ng-hide="!userprofile.showfullprofile && $index > 2" ng-repeat="like in userprofile.user.likes | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': like.match === 1, \'empty smallicon\': like.match === 0 }"></i><div class="content"><div class="description">{{ like.value }}</div></div></div></div><div class="ui list likes" ng-if="userprofile.type === \'friend\'"><div class="item" ng-hide="!userprofile.showfullprofile" ng-repeat="like in userprofile.user.likes | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': like.match === 1, \'empty smallicon\': like.match === 0 }"></i><div class="content"><div class="description">{{ like.value }}</div></div></div></div><div class="ui list likes" ng-show="userprofile.type === \'loggedInUser\'"><div class="item" ng-repeat="like in userprofile.user.likes | limitTo:5 track by $index"><i class="icon empty"></i><div class="content"><div class="description">{{ like.name }}</div></div></div><p ng-if="userprofile.user.likes.length == 0">No likes yet.</p></div><h4 class="ui header socialprofileheader" ng-if="(userprofile.social.linkedin !== \'\' || userprofile.social.twitter !== \'\' || userprofile.social.facebook !== \'\') && userprofile.showfullprofile">Social Accounts</h4><br ng-if="userprofile.social.linkedin.length > 0"><a href="{{ userprofile.social.linkedin }}" target="_new" class="ui social icon fluid linkedin labeled button" ng-if="userprofile.social.linkedin.length > 0 && userprofile.showfullprofile"><i class="linkedin icon"></i> {{userprofile.user.first_name}} <i class="check circle icon right"></i></a><br ng-if="userprofile.social.twitter.length > 0"><a href="https://twitter.com/{{ userprofile.social.twitter }}" target="_new" class="ui social fluid icon twitter labeled button" ng-if="userprofile.social.twitter.length > 0 && userprofile.showfullprofile"><i class="twitter icon"></i> {{userprofile.social.twitter}} <i class="check circle icon right"></i></a><br ng-if="userprofile.social.facebook.length > 0"><a href="{{ userprofile.social.facebook }}" class="ui social icon facebook labeled fluid button" ng-if="userprofile.social.facebook.length > 0 && userprofile.showfullprofile"><i class="facebook icon"></i> {{userprofile.user.first_name}} <i class="lock icon right"></i></a>'),e.put("components/profile/statistics-horizontal.tpl.html",'<div class="ui mini horizontal statistics"><div class="statistic" tooltips="" tooltip-speed="fast" tooltip-title="Match score"><div class="value"><i class="intersecticon icon"></i></div><div class="label">{{userprofile.totalmatchingcount}}</div></div><div class="statistic" tooltips="" tooltip-speed="fast" tooltip-title="Mutual friends"><div class="value"><i class="empty user usericon icon"></i></div><div class="label">{{userprofile.totalfriendscount}}</div></div></div>'),e.put("components/profile/statistics.tpl.html",'<div class="ui mini statistics"><div class="statistic" tooltips="" tooltip-speed="fast" tooltip-title="Match score"><div class="value"><i class="intersecticon icon"></i></div><div class="label">{{userprofile.totalmatchingcount}}</div></div><div class="statistic" tooltips="" tooltip-speed="fast" tooltip-title="Mutual friends"><div class="value"><i class="empty user usericon icon"></i></div><div class="label">{{userprofile.totalfriendscount}}</div></div></div>'),e.put("components/userprofile/userprofile.template.html",'<div class="ui grid" ng-cloak=""><div class="row"><div class="wide column"><div class="header segment with-menu" id="{{userprofile.header}}"><ng-include src="\'components/profile/headerphotoslider.tpl.html\'"></ng-include></div><div class="body segment" id="{{userprofile.body}}"><div class="ui top attached segment"><h3 class="ui left floated header">{{ userprofile.user.first_name }}<span ng-hide="userprofile.user.first_name === \'\'">,</span> {{ userprofile.user.age }}</h3><h5 id="editbutton" ng-if="userprofile.type === \'loggedInUser\'" class="ui right floated header"><a ui-sref="editmyprofile" class="ui tiny button blue">Edit</a></h5></div><div class="ui attached segment"><ng-include src="\'components/profile/profilebody.tpl.html\'"></ng-include></div></div></div></div></div>')
}]);