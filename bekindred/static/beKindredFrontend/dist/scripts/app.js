"use strict";angular.module("beKindred",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","angular-spinkit","frontend.semantic.dimmer","truncate","ya.nouislider","ngDraggable","angucomplete-alt","angular-carousel","cgNotify","ngImgCrop","angularMoment","btford.socket-io","ngLodash","hj.gsapifyRouter"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$resourceProvider","gsapifyRouterProvider",function(e,i,s,t,n){s.defaults.headers.patch={"Content-Type":"application/json;charset=utf-8"},t.defaults.stripTrailingSlashes=!1,s.defaults.xsrfCookieName="csrftoken",s.defaults.xsrfHeaderName="X-CSRFToken",s.defaults.headers.post={"Content-Type":"application/json;charset=utf-8"},n.defaults={enter:"fadeIn",leave:"fadeOut"},n.transition("slideAbove",{duration:1,ease:"Quart.easeInOut",css:{y:"-100%"}}),n.transition("slideBelow",{duration:1,ease:"Quart.easeInOut",css:{y:"100%"}}),n.transition("slideLeft",{duration:1,ease:"Quint.easeInOut",css:{x:"-100%"}}),n.transition("slideRight",{duration:1,ease:"Quint.easeInOut",delay:.5,css:{x:"100%"}}),n.transition("fadeIn",{duration:.5,delay:.2,css:{opacity:0}}),n.transition("fadeOut",{duration:.2,css:{opacity:0}}),n.transition("scaleDown",{duration:.5,css:{scale:0,opacity:0}}),n.initialTransitionEnabled=!0,e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl",data:{displayName:"Icebr&#257;k"},resolve:{}}).state("settings",{url:"/settings",templateUrl:"app/settings/settings.html",controller:"SettingsCtrl",data:{displayName:"Settings"},resolve:{}}).state("conversations",{url:"/conversation/:userId",data:{displayName:"Conversations"},resolve:{userId:["$stateParams",function(e){return e.userId}],UsersFactory:"UsersFactory",FRIEND:["UsersFactory","$stateParams",function(e,i){var s=i.userId;return e.get({userId:s,format:"json"}).$promise}],ConnectionsFactory:"ConnectionsFactory",Connection:["ConnectionsFactory","$stateParams",function(e,i){var s=i.userId;return e.query({friend:s,format:"json"}).$promise}]},templateUrl:"app/conversations/conversations.html",controller:"ConversationsCtrl"}).state("goalcreate",{url:"/create-goal",data:{displayName:"Create a goal"},templateUrl:"app/goalcreate/goalcreate.html",controller:"GoalCreateCtrl"}).state("finalstep",{url:"/final-step",data:{displayName:"Final Step"},resolve:{UsersFactory:"UsersFactory",User:["UsersFactory","USER_ID",function(e,i){var s=i;return e.get({userId:s,format:"json"}).$promise}]},templateUrl:"app/finalstep/finalstep.html",controller:"FinalStepController",controllerAs:"finalstep"}).state("selectinterests",{url:"/select-interests",data:{displayName:"What interests you?"},templateUrl:"app/interests/interests.html",controller:"InterestsController",controllerAs:"interest"}).state("offercreate",{url:"/create-offer",data:{displayName:"Post an offer"},templateUrl:"app/offercreate/offercreate.html",controller:"OfferCreateCtrl"}).state("matchfeed",{url:"/match-feed",data:{displayName:"Match Feed"},templateUrl:"app/matchfeed/matchfeed.html",controller:"MatchFeedCtrl"}).state("bigmatchfeed",{url:"/big-match-feed",data:{displayName:"Match Feed"},templateUrl:"app/bigmatchfeed/bigmatchfeed.html",controller:"BigMatchFeedCtrl"}).state("myconnections",{url:"/my-connections",data:{displayName:"Connections"},templateUrl:"app/myconnections/myconnections.html",controller:"MyConnectionsController",controllerAs:"myconnections"}).state("friendprofile",{url:"/friend-profile/:userId",data:{displayName:"Connection"},resolve:{userId:["$stateParams",function(e){return e.userId}],ProfileFactory:"ProfileFactory",ConnectionsFactory:"ConnectionsFactory",User:["ProfileFactory","$stateParams",function(e,i){var s=i.userId;return e.get({user_id:s,format:"json"}).$promise}],Connection:["ConnectionsFactory","$stateParams",function(e,i){var s=i.userId;return e.query({friend:s,format:"json"}).$promise}]},templateUrl:"app/friendprofile/friendprofile.html",controller:"FriendProfileController",controllerAs:"friendprofile"}).state("myprofile",{url:"/my-profile",data:{displayName:"Profile"},templateUrl:"app/myprofile/myprofile.html",controller:"MyProfileCtrl"}).state("editmyprofile",{url:"/my-profile/edit",data:{displayName:"Edit profile"},templateUrl:"app/editmyprofile/editmyprofile.html",controller:"EditMyProfileCtrl"}).state("inbox",{url:"/messages",data:{displayName:"Messages"},templateUrl:"app/inbox/inbox.html",controller:"InboxController",controllerAs:"inbox"}),i.otherwise("/")}]).run(["$rootScope","$state","$stateParams","$timeout",function(e,i,s){e.$state=i,e.isState=function(e){return i.includes(e)},e.$stateParams=s,e.$on("$stateChangeStart",function(){$(".sidebar").sidebar("is visible")&&$(".sidebar").sidebar("hide")}),e.$on("$stateChangeSuccess",function(){document.body.scrollTop=document.documentElement.scrollTop=0}),e.$on("$stateChangeError",function(){})}]).value("noUiSliderConfig",{step:1}).directive("ngEnter",function(){return function(e,i,s){i.bind("keydown keypress",function(i){13===i.which&&(e.$apply(function(){e.$eval(s.ngEnter)}),i.preventDefault())})}}).directive("updateTitle",["$rootScope","$timeout",function(e,i){return{link:function(s,t){var n=function(e,s){var n="Icebr&#257;k";s.data&&s.data.displayName&&(n=s.data.displayName),i(function(){t.html(n)})};e.$on("$stateChangeSuccess",n)}}}]).directive("endRepeat",["$timeout",function(e){return{restrict:"A",link:function(i){i.$last===!0&&e(function(){i.$emit("ngRepeatFinished")})}}}]).directive("endRepeatPhotos",["$timeout",function(e){return{restrict:"A",link:function(i){i.$last===!0&&e(function(){i.$emit("ngRepeatFinishedPhotos")})}}}]).filter("getByProperty",function(){return function(e,i,s){for(var t=0,n=s.length;n>t;t++)if(s[t][e]===i)return s[t];return null}}).filter("lastMessage",function(){return function(e){return null===e?"No messages.":e}}).filter("getIndexByProperty",function(){return function(e,i,s){for(var t=0,n=s.length;n>t;t++)if(s[t][e]===i)return t;return null}}).filter("getByPropertyExcept",function(){return function(e,i,s,t,n){for(var r=0,a=n.length;a>r;r++)if(n[r][e]===i&&n[r][s]!==t)return n[r];return null}}).directive("modal",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{model:"=ngModel"},template:'<div class="ui dimmer modals page transition" style="position: absolute;" ng-class="{ \'active visible\': model }"><div class="ui long test modal transition scrolling" style="top: 150px;" ng-class="{ \'active visible\': model }" ng-transclude></div></div>',link:function(){}}}).directive("ngChangeOnBlur",function(){return{restrict:"A",require:"ngModel",link:function(e,i,s){if("radio"!==s.type&&"checkbox"!==s.type){var t=s.ngChangeOnBlur,n=null;i.bind("focus",function(){e.$apply(function(){n=i.val()})}),i.bind("blur",function(){e.$apply(function(){var s=i.val();s!==n&&e.$eval(t)})})}}}}).factory("myIoSocket",["socketFactory",function(e){var i=io.connect("//"+window.location.hostname+":3000");return i=e({ioSocket:i}),i.forward("message"),i.forward("error"),i}]).directive("whenScrollEnds",function(){return{restrict:"A",link:function(e,i,s){var t=i.height(),n=100;i.scroll(function(){var r=i.prop("scrollHeight"),a=r-t;a-i.scrollTop()<=n&&e.$apply(s.whenScrollEnds)})}}}).directive("whenScrolled",["$timeout",function(e){return function(i,s,t){var n=s[0];s.bind("scroll",function(){if(n.scrollTop<=100){var s=n.scrollHeight;i.$apply(t.whenScrolled).then(function(){e(function(){n.scrollTop=n.scrollHeight-s})})}})}}]).directive("scrollBottomOn",["$timeout",function(e){return function(i,s,t){i.$watch(t.scrollBottomOn,function(i){i&&e(function(){s[0].scrollTop=s[0].scrollHeight})})}}]).directive("uicheckbox",function(){return{restrict:"E",replace:!0,transclude:!0,require:"ngModel",scope:{type:"@",value:"@",size:"@",checked:"@",change:"&",model:"=ngModel"},template:'<div class="{{checkbox_class}}"><input type="checkbox"><label ng-click="click_on_checkbox()" ng-transclude></label></div>',link:function(e,i){"standard"===e.type||void 0===e.type?(e.type="standard",e.checkbox_class="ui checkbox"):"slider"===e.type?(e.type="slider",e.checkbox_class="ui slider checkbox"):"toggle"===e.type?(e.type="toggle",e.checkbox_class="ui toggle checkbox"):(e.type="standard",e.checkbox_class="ui checkbox"),"large"===e.size?e.checkbox_class=e.checkbox_class+" large":"huge"===e.size&&(e.checkbox_class=e.checkbox_class+" huge"),"false"===e.checked||void 0===e.checked?e.checked=!1:(e.checked=!0,i.children()[0].setAttribute("checked","")),i.bind("click",function(){e.$apply(function(){e.checked===!0?(e.checked=!0,e.model=!1,i.children()[0].removeAttribute("checked")):(e.checked=!0,e.model=!0,i.children()[0].setAttribute("checked","true"))})}),e.$watch("model",function(s){void 0!==s&&(s===!0?(e.checked=!0,i.children()[0].setAttribute("checked","true"),e.change({value:e.value,checked:e.checked})):(e.checked=!1,i.children()[0].removeAttribute("checked"),e.change({value:e.value,checked:e.checked})))})}}}),angular.module("beKindred").controller("SettingsCtrl",["$rootScope","$scope","$log","$timeout","$window","$http",function(e,i,s,t,n,r){i.deleteUser=function(){s.info("delete user"),r({method:"POST",url:"/accounts/deactivate/",headers:{"Content-Type":"application/x-www-form-urlencoded"}}),n.location.href="/accounts/logout",n.location.assign()}}]),angular.module("beKindred").controller("OfferCreateCtrl",["$scope","$state","$log","OffersFactory","SubjectsFactory","USER_ID","$filter",function(e,i,s,t,n,r){e.subject="",e.resourceUri=null,e.messageShow=!1,e.message="",e.userUri="/api/v1/auth/user/"+r+"/",e.inputChanged=function(i){e.subject=i},e.selectResult=function(i){void 0!==i?(e.subject=i.originalObject.description,e.resourceUri=i.originalObject.resource_uri):e.resourceUri=null},e.saveOffer=function(){var s={offer_subject:e.subject,user:e.userUri};t.save({},s,function(){i.go("finalstep")},function(i){e.resourceUri=null,e.messageShow=!0,e.message=i.data.offer?i.data.offer.error[0]:"There was an error when trying to save your offer."})},e.createOffer=function(){return e.messageShow=!1,e.message="",""===e.subject?(e.message="Entering your offer is required to continue.",e.messageShow=!0,!1):e.subject.length>300?(e.message="Offer cannot have more than 300 characters.",e.messageShow=!0,!1):void e.saveOffer()}}]),angular.module("beKindred").controller("MyProfileCtrl",["$scope","USER_ID","UsersFactory","InterestsFactory","GoalsFactory","OffersFactory","LikesFactory","PhotosFactory","USER_PHOTO","$log",function(e,i,s,t,n,r,a,o,d,c){e.twitter=null,e.linkedin=null,e.user={id:1,firstName:"",lastName:"",age:"",about_me:"",photos:[],goals:[],offers:[],likes:[],interests:[],mutual:{friends:[],facebookfriends:[],twitterfriends:[],twitterfollowers:[],linkedinconnections:[]}},e.loadingUser=!1,e.loadingGoals=!1,e.loadingOffers=!1,e.loadingLikes=!1,e.loadingInterests=!1,e.getUser=function(){e.loadingUser=!0,e.loadingGoals=!0,e.loadingOffers=!0,e.loadingLikes=!0,n.query({user_id:i,format:"json"}).$promise.then(function(i){i.meta.total_count>0&&(e.user.goals=i.objects),e.loadingGoals=!1},function(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);c.error(s)}),r.query({user_id:i,format:"json"}).$promise.then(function(i){i.meta.total_count>0&&(e.user.offers=i.objects),e.loadingOffers=!1},function(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);c.error(s)}),a.query({format:"json"}).$promise.then(function(i){i.meta.total_count>0&&(e.user.likes=i.objects),e.loadingLikes=!1},function(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);c.error(s)}),t.query({user_id:i,format:"json"}).$promise.then(function(i){i.meta.total_count>0&&(e.user.interests=i.objects),e.loadingInterests=!1},function(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);c.error(s)}),s.get({format:"json"},{userId:i}).$promise.then(function(i){e.user.firstName=i.first_name,e.user.lastName=i.last_name,e.user.about_me=i.about_me,e.user.age=i.age,e.user.facebookId=i.facebook_id,e.user.facebookProfile=i.facebook_profile_url,e.twitter=i.twitter_provider,e.linkedin=i.linkedin_provider,e.loadingUser=!1},function(i){var s=(i.data,i.status),t=(i.header,i.config,"Error "+s);e.loadingUser=!1,c.error(t)})},e.getUser(),e.photosSlider=[],e.getPhotos=function(){o.query({format:"json"}).$promise.then(function(s){if(e.user.photos=s.objects,0===e.user.photos.length){var t={photo:d,cropped_photo:"",order:0,user:"/api/v1/auth/user/"+i+"/"};o.save({},t,function(i){c.info(i),c.info("New photo saved."),e.user.photos.push({photo:d,cropped_photo:"",order:0}),e.photosSlider=e.user.photos},function(e){c.info(e)})}else e.photosSlider=e.user.photos},function(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);c.error(s)})},e.getPhotos()}]),function(){function e(e,i,s,t,n,r,a,o){function d(){u.q="",u.getFriends()}function c(){u.nextOffset=5,u.next=null,u.loading=!0,n.query({format:"json",first_name:u.q,limit:20,offset:0}).$promise.then(function(e){if(u.friends=e.objects,u.next=e.meta.next,0===u.friends.length)u.pok?u.noResults=!0:(u.noConnections=!0,u.pok=!0);else{u.pok=!0,u.noResults=!1,u.noConnections=!1;for(var i in u.friends)u.friends[i].totalFriends=0,u.friends[i].totalFriends+=u.friends[i].mutual_bk_friends_count,u.friends[i].totalFriends+=u.friends[i].mutual_fb_friends_count,u.friends[i].totalFriends+=u.friends[i].mutual_linkedin_connections_count,u.friends[i].totalFriends+=u.friends[i].mutual_twitter_friends_count,u.friends[i].totalFriends+=u.friends[i].mutual_twitter_followers_count}u.loading=!1},function(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);r.error(s),u.noConnections=!0,u.loading=!1})}function l(){var e=o.defer();return null===u.next?(e.reject(),e.promise):(u.loadingMore?e.reject():(u.loadingMore=!0,a(function(){n.query({format:"json",limit:5,first_name:u.q,offset:u.nextOffset}).$promise.then(function(i){var s=i.objects;u.next=i.meta.next,u.nextOffset+=5;for(var t in s)s[t].totalFriends=0,s[t].totalFriends+=s[t].mutual_bk_friends_count,s[t].totalFriends+=s[t].mutual_fb_friends_count,s[t].totalFriends+=s[t].mutual_linkedin_connections_count,s[t].totalFriends+=s[t].mutual_twitter_friends_count,s[t].totalFriends+=s[t].mutual_twitter_followers_count,u.friends.push(s[t]);u.loadingMore=!1,e.resolve()},function(i){e.reject();var s=(i.data,i.status),t=(i.header,i.config,"Error "+s);r.error(t),u.loadingMore=!1})},400)),e.promise)}var u=this;u.friends=[],u.q="",u.noConnections=!1,u.pok=!1,u.noResults=!1,u.loading=!1,u.loadingMore=!1,u.nextOffset=5,u.next=null,u.getFriends=c,u.loadMoreFriends=l,u.reset=d,u.getFriends()}angular.module("beKindred").controller("MyConnectionsController",e),e.$inject=["$scope","FriendsFactory","USER_ID","$resource","ConnectionsFactory","$log","$timeout","$q"]}(),angular.module("beKindred").factory("MatchFeedFactory",["$resource",function(e){return e("/api/v1/matchfeed/:matchId/:param",{matchId:"@matchId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]),angular.module("beKindred").controller("MatchFeedCtrl",["$rootScope","$scope","$timeout","$filter","USER_ID","MatchFeedFactory","PhotosFactory","FriendsFactory","$log","MutualFriendsFactory",function(e,i,s,t,n,r,a,o,d,c){i.matchedUser=[],i.total=0,i.offset=0,i.previous=null,i.next=null,i.me="/api/v1/auth/user/"+n+"/",i.friendshipStatus=null,i.friendshipId=null,i.filtering=!0,i.photosSlider=[],i.loadingFeed=!1;var l=0;i.totalfriendscount=0,i.totalmatchingcount=0,i.loadMatches=function(){i.totalfriendscount=0,i.totalmatchingcount=0,0===l?(i.showDimmer=!0,e.hideTopMenu=!0,$("#filtersMenu").sidebar("hide"),i.matchedUser=[],r.query({format:"json",filter:i.filtering}).$promise.then(function(s){i.matchedUser=[],i.total=0,i.offset=0,i.previous=null,i.next=null;var n=s.objects;if(n.length>0){i.total=s.meta.total_count,i.matchedUser=s.objects[0],i.offset=s.meta.offset,i.total=s.meta.total_count,i.previous=s.meta.previous,i.next=s.meta.next;var r=[],o=i.matchedUser.goals[0];for(var l in o){var u={value:l,match:o[l]};r.push(u),1===u.match&&i.totalmatchingcount++}i.matchedUser.goals=r;var v=[],f=i.matchedUser.offers[0];for(var l in f){var m={value:l,match:f[l]};v.push(m),1===m.match&&i.totalmatchingcount++}i.matchedUser.offers=v;var h=[],g=i.matchedUser.interests[0];for(var l in g){var p={value:l,match:g[l]};h.push(p),1===p.match&&i.totalmatchingcount++}i.matchedUser.interests=h;var b=[],w=i.matchedUser.likes[0];for(var l in w){var y={value:l,match:w[l]};b.push(y),1===y.match&&i.totalmatchingcount++}i.matchedUser.likes=b,c.query({format:"json",user_id:i.matchedUser.id}).$promise.then(function(e){e.objects.length>0&&(i.matchedUser.friends=e.objects[0].mutual_bk_friends,i.matchedUser.facebookfriends=e.objects[0].mutual_fb_friends,i.matchedUser.linkedinconnections=e.objects[0].mutual_linkedin_connections,i.matchedUser.twitterfollowers=e.objects[0].mutual_twitter_followers,i.matchedUser.twitterfriends=e.objects[0].mutual_twitter_friends,i.totalfriendscount+=e.objects[0].mutual_bk_friends_count,i.totalfriendscount+=e.objects[0].mutual_fb_friends_count,i.totalfriendscount+=e.objects[0].mutual_linkedin_connections_count,i.totalfriendscount+=e.objects[0].mutual_twitter_followers_count,i.totalfriendscount+=e.objects[0].mutual_twitter_friends_count)}),i.defaultUserPhoto="//graph.facebook.com/"+i.matchedUser.facebook_id+"/picture?type=large",a.query({format:"json",user_id:i.matchedUser.user_id}).$promise.then(function(e){if(i.matchedUser.photos=e.objects,i.matchedUser.photos.length>0)i.photosSlider=i.matchedUser.photos;else{var s={photo:i.defaultUserPhoto,order:0,user:"/api/v1/auth/user/"+i.matchedUser.user_id+"/"};a.save({},s,function(e){d.info(e),d.info("New photo saved."),i.matchedUser.photos.push(e),i.photosSlider=i.matchedUser.photos},function(e){d.info(e)})}i.photosSlider=t("orderBy")(i.photosSlider,"order",!1)})}else i.matchedUser=[],i.total=0,i.offset=0,i.previous=null,i.next=null;i.showDimmer=!1,e.hideTopMenu=!1,i.filtering=!0},function(s){i.filtering=!0;var t=(s.data,s.status),n=(s.header,s.config,"Error "+t);d.error(n),i.matchedUser=[],i.total=0,i.offset=0,i.previous=null,i.next=null,i.showDimmer=!1,e.hideTopMenu=!1}),l=1):(i.showDimmer=!1,e.hideTopMenu=!1)},i.loadMatches(),e.showfullprofile=!1,e.$on("cancelMatchEvent",function(){i.cancelMatch()}),e.$on("confirmMatchEvent",function(){i.confirmMatch()}),e.$on("refreshMatchFeed",function(){l=0,i.filtering=!0,i.loadMatches()}),i.getNextMatch=function(){i.totalfriendscount=0,i.totalmatchingcount=0,i.loadingFeed=!0;var s=i.offset;s++,s===i.total&&(s=0),d.info(i.total),r.query({format:"json",offset:0,limit:1,filter:i.filtering}).$promise.then(function(e){var s=e.objects;if(s.length>0){d.info("more results"),d.info(s.length),i.matchedUser=e.objects[0],i.offset=e.meta.offset,i.total=e.meta.total_count,i.previous=e.meta.previous,i.next=e.meta.next;var n=[],r=i.matchedUser.goals[0];for(var o in r){var l={value:o,match:r[o]};n.push(l),1===l.match&&i.totalmatchingcount++}i.matchedUser.goals=n;var u=[],v=i.matchedUser.offers[0];for(var o in v){var f={value:o,match:v[o]};u.push(f),1===f.match&&i.totalmatchingcount++}i.matchedUser.offers=u;var m=[],h=i.matchedUser.interests[0];for(var o in h){var g={value:o,match:h[o]};m.push(g),1===g.match&&i.totalmatchingcount++}i.matchedUser.interests=m;var p=[],b=i.matchedUser.likes[0];for(var o in b){var w={value:o,match:b[o]};p.push(w),1===w.match&&i.totalmatchingcount++}i.matchedUser.likes=p,c.query({format:"json",user_id:i.matchedUser.id}).$promise.then(function(e){e.objects.length>0&&(i.matchedUser.friends=e.objects[0].mutual_bk_friends,i.matchedUser.facebookfriends=e.objects[0].mutual_fb_friends,i.matchedUser.linkedinconnections=e.objects[0].mutual_linkedin_connections,i.matchedUser.twitterfollowers=e.objects[0].mutual_twitter_followers,i.matchedUser.twitterfriends=e.objects[0].mutual_twitter_friends,i.totalfriendscount+=e.objects[0].mutual_bk_friends_count,i.totalfriendscount+=e.objects[0].mutual_fb_friends_count,i.totalfriendscount+=e.objects[0].mutual_linkedin_connections_count,i.totalfriendscount+=e.objects[0].mutual_twitter_followers_count,i.totalfriendscount+=e.objects[0].mutual_twitter_friends_count)}),i.defaultUserPhoto="//graph.facebook.com/"+i.matchedUser.facebook_id+"/picture?type=large",a.query({format:"json",user_id:i.matchedUser.user_id}).$promise.then(function(e){if(i.matchedUser.photos=e.objects,i.matchedUser.photos.length>0)i.photosSlider=i.matchedUser.photos;else{var s={photo:i.defaultUserPhoto,order:0,user:"/api/v1/auth/user/"+i.matchedUser.user_id+"/"};a.save({},s,function(e){d.info(e),d.info("New photo saved."),i.matchedUser.photos.push(e),i.photosSlider=i.matchedUser.photos},function(e){d.info(e)})}i.photosSlider=t("orderBy")(i.photosSlider,"order",!1)})}else i.matchedUser=[],i.total=0,i.offset=0,i.previous=null,i.next=null;i.loadingFeed=!1},function(s){var t=(s.data,s.status),n=(s.header,s.config,"Error "+t);d.error(n),i.matchedUser=[],i.total=0,i.offset=0,i.previous=null,i.next=null,i.showDimmer=!1,e.hideTopMenu=!1})},i.cancelMatch=function(){d.info("cancel match");var e={friend1:i.me,friend2:"/api/v1/auth/user/"+i.matchedUser.user_id+"/",status:-1};o.save(e,function(){i.getNextMatch()},function(){})},i.confirmMatch=function(){d.info("accept match");var e={friend1:i.me,friend2:"/api/v1/auth/user/"+i.matchedUser.user_id+"/",status:0};o.save(e,function(){i.getNextMatch()},function(){})},i.changeTopMenu=function(){e.hideTopMenu=!0,e.showfullprofile=!0,$("#MatchMenu").sidebar("toggle")}}]),angular.module("beKindred").controller("MainCtrl",["$scope",function(){}]),function(){function e(e,i,s,t,n,r,a,o,d,c,l,u,v){function f(){b.counter>0?d.go("goalcreate"):t({messageTemplate:'<div class="notify-info-header">Warning</div><p>To continue please select at least one interest.</p>',scope:u,classes:"notify-info",icon:"warning circle"})}function m(){b.searchQuery="",b.getAllInterests(),b.noResults=!1}function h(){b.userInterests=[],w.width()>400&&(b.limit=400),b.nextOffset=100,b.next=null,b.noResults=!1,b.loadingInterests=!0,b.allInterests.splice(0,b.allInterests.length),e.query({user_id:n,format:"json",limit:200,offset:0}).$promise.then(function(e){b.counter=e.meta.total_count,e.objects.length>0&&(b.userInterests=e.objects),i.query({format:"json",limit:b.limit,description__icontains:b.searchQuery,offset:0}).$promise.then(function(e){b.next=e.meta.next;var i=e.objects;if(i.length>0)for(var s=i.length-1;s>=0;s--){i[s].active=!1,i[s].interest_resource=null;for(var t=b.userInterests.length-1;t>=0;t--)i[s].resource_uri===b.userInterests[t].interest&&(i[s].interest_resource=b.userInterests[t].resource_uri,i[s].active=!0);b.allInterests.push(i[s])}else b.allInterests.splice(0,b.allInterests.length),b.noResults=!0;b.loadingInterests=!1},function(e){var i=(e.data,e.status),t=(e.header,e.config,"Error "+i);s.error(t),b.loadingInterests=!1})},function(e){var i=(e.data,e.status),t=(e.header,e.config,"Error "+i);s.error(t),b.loadingInterests=!1})}function g(){var t=c.defer();return b.loadingMore?t.reject():null!==b.next?(b.loadingMore=!0,a(function(){e.query({user_id:n,format:"json",limit:200,offset:0}).$promise.then(function(e){b.counter=e.meta.total_count,e.objects.length>0&&(b.userInterests=e.objects),i.query({format:"json",description__icontains:b.searchQuery,offset:b.nextOffset,limit:30}).$promise.then(function(e){var i=e.objects;b.next=e.meta.next,b.nextOffset+=30,e.objects.length>0&&(i=e.objects);for(var s=i.length-1;s>=0;s--){i[s].active=!1,i[s].interest_resource=null;for(var n=b.userInterests.length-1;n>=0;n--)i[s].resource_uri===b.userInterests[n].interest&&(i[s].interest_resource=b.userInterests[n].resource_id,i[s].active=!0);b.allInterests.push(i[s])}b.loadingMore=!1,t.resolve()},function(e){var i=(e.data,e.status),n=(e.header,e.config,"Error "+i);s.error(n),b.loadingMore=!1,t.reject()})},function(e){var i=(e.data,e.status),n=(e.header,e.config,"Error "+i);s.error(n),t.reject()})},400)):t.reject(),t.promise}function p(i){var n=b.allInterests[i];if(n)if(n.active){var r=o(n.interest_resource);n.loading=!0,r.delete().$promise.then(function(){n.active=!1,n.interest_resource=null,b.counter--,n.loading=!1},function(e){var i=(e.data,e.status),t=(e.header,e.config,"Error "+i);s.error(t),n.loading=!1,n.error=!0})}else if(b.counter>=10)t({messageTemplate:'<div class="notify-info-header">Warning</div><p>Please select up to 10 interests.</p>',scope:u,classes:"notify-info",icon:"warning circle"});else{var a={interest_subject:n.description,user:b.userUri};n.loading=!0,e.save({},a,function(e){s.info(n),n.loading=!1,n.error=!1,n.interest_resource=e.resource_uri,n.active=!0,b.counter++},function(e){n.errorMessage=e.data.interest.error[0],t({messageTemplate:'<div class="notify-info-header">Error</div><p>'+n.errorMessage+"</p>",scope:u,classes:"notify-info",icon:"warning circle"}),n.loading=!1,n.error=!0})}}var b=this;b.useInterest=p,b.getAllInterests=h,b.nextStep=f,b.searchQuery="",b.userUri="/api/v1/auth/user/"+n+"/",b.next=null,b.nextOffset=100,b.loadingMore=!1,b.noResults=!1,b.reset=m,b.loadMoreInterests=g,b.allInterests=[],b.counter=0,b.loadingInterests=!1,b.userInterests=[];var w=angular.element(v);b.limit=100,b.getAllInterests()}angular.module("beKindred").controller("InterestsController",e),e.$inject=["InterestsFactory","InterestSubjectFactory","$log","notify","USER_ID","$filter","$timeout","$resource","$state","$q","lodash","$scope","$window"]}(),function(){function e(e,i,s,t){function n(){function n(e){o.inboxMessages.splice(0,o.inboxMessages.length),o.next=e.meta.next,o.total=e.meta.total;var i=e.objects,n=0;for(var r in i)null===i[r].read_at&&null!==i[r].last_message_body&&n++,o.inboxMessages.push({firstName:i[r].first_name,friendId:i[r].friend_id,facebookId:i[r].facebook_id,sentAt:s("amDateFormat")(i[r].sent_at,"h:mm a"),readAt:i[r].read_at,id:i[r].id,body:i[r].last_message_body});o.unreadMessagesCounter=n,t.$broadcast("refreshInboxMessages")}function r(e){o.inboxMessages.splice(0,o.inboxMessages.length);var s=(e.data,e.status),t=(e.header,e.config,"Error "+s);i.error(t)}return i.info("fetching inbox"),e.query({format:"json"}).$promise.then(n,r)}function r(){return o.unreadMessagesCounter}function a(){return o.inboxMessages}var o={getInboxMessages:n,getUnreadMessagesCounter:r,getAllMessages:a,unreadMessagesCounter:0,inboxMessages:[],limit:20,offset:0,nextOffset:10,next:null,total:0};return o}angular.module("beKindred").factory("InboxRepository",e),e.$inject=["InboxFactory","$log","$filter","$rootScope"]}(),function(){function e(e,i,s,t){function n(){a.allMessages=t.getAllMessages()}function r(){}var a=this;a.allMessages=[],a.loadInbox=n,a.loadMore=r,a.loadingMessages=!1,a.loadingMore=!1,a.q="",a.loadInbox(),i.$on("refreshInboxMessages",function(){a.loadInbox()})}angular.module("beKindred").controller("InboxController",e),e.$inject=["$scope","$rootScope","$log","InboxRepository"]}(),angular.module("beKindred").controller("GoalCreateCtrl",["$scope","$state","$log","GoalsFactory","SubjectsFactory","USER_ID",function(e,i,s,t,n,r){e.subject="",e.resourceUri=null,e.messageShow=!1,e.message="",e.userUri="/api/v1/auth/user/"+r+"/",e.inputChanged=function(i){e.subject=i},e.selectResult=function(i){void 0!==i?(e.subject=i.originalObject.description,e.resourceUri=i.originalObject.resource_uri):e.resourceUri=null},e.saveGoal=function(){var s={goal_subject:e.subject,user:e.userUri};t.save({},s,function(){i.go("offercreate")},function(i){e.resourceUri=null,e.messageShow=!0,e.message=i.data.goal?i.data.goal.error[0]:"There was an error when trying to save your goal."})},e.createGoal=function(){return e.messageShow=!1,e.message="",""===e.subject?(e.message="Entering your goal is required to continue.",e.messageShow=!0,!1):e.subject.length>300?(e.message="Goal cannot have more than 300 characters.",e.messageShow=!0,!1):void e.saveGoal()}}]),function(){function e(e,i,s,t,n,r,a,o,d,c,l,u,v,f){function m(){p.loadingUser=!0,p.loadingGoals=!0,p.loadingOffers=!0,p.loadingLikes=!0;var e=[],s=i.objects[0].goals[0];for(var n in s){var r={value:n,match:s[n]};e.push(r)}p.user.goals=e;var a=[],o=i.objects[0].offers[0];for(var n in o){var d={value:n,match:o[n]};a.push(d)}p.user.offers=a;var c=[],l=i.objects[0].interests[0];for(var n in l){var v={value:n,match:l[n]};c.push(v)}p.user.interests=c;var f=[],m=i.objects[0].likes[0];for(var n in m){var h={value:n,match:m[n]};f.push(h)}p.user.likes=f,t.query({format:"json",user_id:p.user.id}).$promise.then(function(e){e.objects.length>0&&(p.user.friends=e.objects[0].mutual_bk_friends,p.user.facebookfriends=e.objects[0].mutual_fb_friends,p.user.linkedinconnections=e.objects[0].mutual_linkedin_connections,p.user.twitterfollowers=e.objects[0].mutual_twitter_followers,p.user.twitterfriends=e.objects[0].mutual_twitter_friends,p.loadingUser=!1,p.loadingGoals=!1,p.loadingOffers=!1,p.loadingLikes=!1,p.loadingInterests=!1)},function(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);u.error(s),p.loadingUser=!1,p.loadingGoals=!1,p.loadingOffers=!1,p.loadingLikes=!1})}function h(){l.query({format:"json",user_id:p.user.id}).$promise.then(function(e){if(p.user.photos=e.objects,0===p.user.photos.length){var i={photo:p.defaultUserPhoto,order:0,user:"/api/v1/auth/user/"+p.user.id+"/"};l.save({},i,function(e){u.info(e),u.info("New photo saved."),p.user.photos.push({photo:p.defaultUserPhoto,cropped_photo:"",order:0}),p.photosSlider=p.user.photos},function(e){u.info(e)})}else p.photosSlider=p.user.photos},function(e){var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);u.error(s)})}function g(){f.update({friendId:p.friendshipId},{status:-1},function(){n.getInboxMessages(),v.go("myconnections")},function(){})}var p=this;p.middleActive=!0,p.friendshipId=o.objects[0].id,p.user={id:i.objects[0].id,facebook_id:i.objects[0].facebook_id,firstName:i.objects[0].first_name,lastName:i.objects[0].last_name,age:i.objects[0].age,about_me:i.objects[0].about_me,photos:[],goals:[],offers:[],likes:[],interests:[],friends:[],facebookfriends:[],twitterfriends:[],twitterfollowers:[],linkedinconnections:[],linkedin_provider:i.objects[0].linkedin_provider,twitter_provider:i.objects[0].twitter_provider},p.defaultUserPhoto="//graph.facebook.com/"+p.user.facebook_id+"/picture?type=large",p.loadingUser=!1,p.loadingGoals=!1,p.loadingOffers=!1,p.loadingLikes=!1,p.loadingInterests=!1,p.photosSlider=[],p.getUser=m,p.getPhotos=h,p.unFriend=g,p.getUser(),p.getPhotos()}angular.module("beKindred").controller("FriendProfileController",e),e.$inject=["$scope","User","UsersFactory","MutualFriendsFactory","InboxRepository","InterestsFactory","GoalsFactory","Connection","OffersFactory","LikesFactory","PhotosFactory","$log","$state","FriendsFactory"]}(),function(){function e(e,i,s,t){function n(e){var i=400,s=300,t=void 0!==window.screenLeft?window.screenLeft:screen.left,n=void 0!==window.screenTop?window.screenTop:screen.top,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,o=r/2-i/2+t,d=a/2-s/2+n,c="height="+s+",width="+i+",left="+o+",top="+d+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=yes,directories=no,status=yes",l="/social/associate/"+e+"/?next=/goals/close_login_popup",u=window.open(l,"Connecting...",c);window.focus&&u.focus()}function r(){a.loading=!0,s.get({format:"json"},{userId:i}).$promise.then(function(e){a.twitter=e.twitter_provider,a.linkedin=e.linkedin_provider,a.firstName=e.first_name,a.loading=!1})}var a=this;a.loading=!1,a.link=n,a.refreshUser=r,a.twitter=t.twitter_provider,a.linkedin=t.linkedin_provider,a.firstName=t.first_name}e.$inject=["$log","USER_ID","UsersFactory","User"],angular.module("beKindred").controller("FinalStepController",e)}(),angular.module("beKindred").controller("EditMyProfileCtrl",["$scope","$timeout","USER_ID","$q","$state","UsersFactory","GoalsFactory","LikesFactory","SubjectsFactory","OffersFactory","InterestsFactory","PhotosFactory","$log","$filter","$cookies","$http","FB_TOKEN","$location","$anchorScroll","$window","$resource","notify",function(e,i,s,t,n,r,a,o,d,c,l,u,v,f,m,h,g,p,b,w,y,k){e.twitter=null,e.linkedin=null,e.userUri="/api/v1/auth/user/"+s+"/",e.user={id:s,firstName:"",lastName:"",age:"",about_me:"",photos:[{id:0,order:0,photo:"",cropped_photo:""},{id:0,order:1,photo:"",cropped_photo:""},{id:0,order:2,photo:"",cropped_photo:""},{id:0,order:3,photo:"",cropped_photo:""},{id:0,order:4,photo:"",cropped_photo:""},{id:0,order:5,photo:"",cropped_photo:""}],goals:[],offers:[],likes:[],interests:[],mutual:{friends:[],facebookfriends:[],twitterfriends:[],twitterfollowers:[],linkedinconnections:[]}},e.loadingUser=!1,e.loadingGoals=!1,e.loadingOffers=!1,e.loadingLikes=!1,e.loadingInterests=!1,e.getUser=function(){e.loadingUser=!0,e.loadingGoals=!0,e.loadingOffers=!0,e.loadingLikes=!0,e.loadingInterests=!0,a.query({user_id:s,format:"json"}).$promise.then(function(i){i.meta.total_count>0&&(e.user.goals=i.objects),e.loadingGoals=!1
}),c.query({user_id:s,format:"json"}).$promise.then(function(i){i.meta.total_count>0&&(e.user.offers=i.objects),e.loadingOffers=!1}),o.query({user_id:s,format:"json"}).$promise.then(function(i){i.meta.total_count>0&&(e.user.likes=i.objects),e.loadingLikes=!1}),l.query({user_id:s,format:"json"}).$promise.then(function(i){i.meta.total_count>0&&(e.user.interests=i.objects),e.loadingInterests=!1}),r.get({format:"json"},{userId:s}).$promise.then(function(i){e.user.firstName=i.first_name,e.user.lastName=i.last_name,e.user.about_me=i.about_me,e.user.age=i.age,e.user.facebookId=i.facebook_id,e.user.facebookProfile=i.facebook_profile_url,e.twitter=i.twitter_provider,e.linkedin=i.linkedin_provider,e.loadingUser=!1})},e.getUser(),e.link=function(e){var i=350,s=250,t=void 0!==window.screenLeft?window.screenLeft:screen.left,n=void 0!==window.screenTop?window.screenTop:screen.top,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,o=r/2-i/2+t,d=a/2-s/2+n,c="height="+s+",width="+i+",left="+o+",top="+d+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=yes,directories=no,status=yes",l="/social/associate/"+e+"/?next=/goals/close_login_popup",u=window.open(l,"Connecting...",c);window.focus&&u.focus()},e.unlink=function(e){var i=350,s=250,t=void 0!==window.screenLeft?window.screenLeft:screen.left,n=void 0!==window.screenTop?window.screenTop:screen.top,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,o=r/2-i/2+t,d=a/2-s/2+n,c="height="+s+",width="+i+",left="+o+",top="+d+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=yes,directories=no,status=yes",l="/social/disconnect/"+e+"/",u=window.open(l,"Disconnecting...",c);window.focus&&u.focus()},e.refreshUser=function(){r.get({format:"json"},{userId:s}).$promise.then(function(i){e.twitter=i.twitter_provider,e.linkedin=i.linkedin_provider})},e.loadingAbout=!1,e.saveAbout=function(){e.loadingAbout=!0,r.update({userId:s},{about_me:e.user.about_me},function(){e.loadingAbout=!1},function(e){v.info(e)})},e.apiPhotos=[],e.facebookPhotos=[],e.onDropComplete=function(i,s){var t=e.user.photos[i],n=e.user.photos.indexOf(s);e.user.photos[i]=s,e.user.photos[i].order=i,e.user.photos[n]=t,e.user.photos[n].order=n,0!==e.user.photos[i].id&&u.update({photoId:e.user.photos[i].id},{order:e.user.photos[i].order},function(){},function(e){v.info(e)}),0!==e.user.photos[n].id&&u.update({photoId:e.user.photos[n].id},{order:e.user.photos[n].order},function(){},function(e){v.info(e)})},e.getPhotos=function(){u.query({format:"json"}).$promise.then(function(i){e.apiPhotos=i.objects;for(var s in e.apiPhotos)for(var t in e.user.photos)e.user.photos[t].order===e.apiPhotos[s].order&&(e.user.photos[t].id=e.apiPhotos[s].id,e.user.photos[t].photo=e.apiPhotos[s].photo,e.user.photos[t].cropped_photo=e.apiPhotos[s].cropped_photo)})},e.getPhotos(),e.currentAlbum="",e.getFBPhotos=function(i,s){e.showPhotos=!0,e.myImage=null,e.photoIndex=null,e.hideAlbums=!0,e.currentAlbum=s,e.photosLoading=!0,h.get("https://graph.facebook.com/"+i+"?fields=photos{id,height,width,source}&access_token="+g).success(function(i){e.photosLoading=!1,e.facebookPhotos=i.photos.data}).error(function(){e.photosLoading=!1})},e.backToAlbums=function(){e.showPhotos=!0,e.myImage=null,e.photoIndex=null,e.currentAlbum="",e.hideAlbums=!e.hideAlbums,e.getFBAlbums()},e.facebookAlbums=[],e.hideAlbums=!1,e.getFBAlbums=function(){e.showModal=!0,e.albumsLoading=!0,h.get("https://graph.facebook.com/me/albums?fields=picture,name&access_token="+g).success(function(i){e.facebookAlbums=i.data,e.albumsLoading=!1}).error(function(){e.albumsLoading=!1})},e.deletePhoto=function(){var i=e.userPhotoDeleteIndex;u.delete({photoId:e.user.photos[i].id},function(){e.user.photos[i].photo="",e.user.photos[i].cropped_photo="",e.user.photos[i].id=0},function(e){v.info(e)})},e.closeModal=function(){e.showModal=!1,e.showPhotos=!0,e.myImage=null,e.photoIndex=null,i(function(){p.hash("my-profile-header-edit"),b()},600)},e.showModal=!1,e.albumsLoading=!1,e.photosLoading=!1,e.showPhotos=!0,e.myImage=null,e.photoIndex=null,e.myCroppedImage=null,e.showCrop=function(i){e.photoIndex=i,e.myImage=e.facebookPhotos[i].source,e.showPhotos=!1},e.myCroppedImage="",e.createPhoto=function(i){var t=e.photoIndex,n=e.facebookPhotos[t],r={cropped_photo:i,photo:n.source,order:e.newPhotoIndex,user:"/api/v1/auth/user/"+s+"/"};u.save({},r,function(i){var s=e.newPhotoIndex;e.user.photos[s].photo=i.photo,e.user.photos[s].cropped_photo=i.cropped_photo,e.user.photos[s].id=i.id,e.closeModal()},function(){})},e.$on("ngRepeatFinishedPhotos",function(){$("#deletePhotoModal").modal("attach events",".delete_photo","show")}),e.$on("ngRepeatFinished",function(){$(".ui.search.goals").search({apiSettings:{url:"api/v1/subject/?format=json&description__icontains={query}"},minCharacters:3,searchDelay:400,type:"standard",cache:!1,onSelect:function(i){var s=$(this).attr("rel");void 0!==i&&(e.user.goals[s].subject=i.description)}}),$(".ui.search.offers").search({apiSettings:{url:"api/v1/subject/?format=json&description__icontains={query}"},minCharacters:3,searchDelay:400,type:"standard",cache:!1,onSelect:function(i){var s=$(this).attr("rel");void 0!==i&&(e.user.offers[s].subject=i.description)}}),$(".ui.search.interests").search({apiSettings:{url:"api/v1/interest_subject/?format=json&description__icontains={query}"},minCharacters:3,searchDelay:400,type:"standard",cache:!1,onSelect:function(i){var s=$(this).attr("rel");void 0!==i&&(e.user.interests[s].interest_subject=i.description)}})}),e.goalNeedSaving=function(i){e.user.goals[i].changed=!0},e.createNewGoal=function(){var i={id:0,subject:"",user:e.userUri,changed:!0};e.user.goals.push(i)},e.removeGoal=function(i){var s=y(e.user.goals[i].resource_uri);0===e.user.goals[i].id?e.user.goals.splice(i,1):s.delete().$promise.then(function(){e.user.goals.splice(i,1)})},e.saveCurrentGoal=function(i){var s=t.defer();if(e.user.goals[i].errorMessage="",e.user.goals[i].error=!1,e.user.goals[i].subject.length>300)return e.user.goals[i].error=!0,e.user.goals[i].errorMessage="Goal cannot have more than 300 characters.",s.reject(),s.promise;if(""===e.user.goals[i].subject)e.user.goals[i].error=!0,e.user.goals[i].errorMessage="Entering your goal is required.",s.reject();else if(0===e.user.goals[i].id){var n={goal_subject:e.user.goals[i].subject,user:e.userUri};e.user.goals[i].loading=!0,e.user.goals[i].error=!1,a.save({},n,function(t){e.user.goals[i].loading=!1,e.user.goals[i].error=!1,e.user.goals[i].id=t.id,e.user.goals[i].goal=t.goal,e.user.goals[i].goal_subject=t.goal_subject,e.user.goals[i].resource_uri=t.resource_uri,e.user.goals[i].user=t.user,e.user.goals[i].changed=!1,s.resolve()},function(t){e.user.goals[i].errorMessage=t.data.goal.error[0],e.user.goals[i].loading=!1,e.user.goals[i].error=!0,s.reject()})}else e.user.goals[i].error=!1,e.user.goals[i].loading=!0,a.update({goalId:e.user.goals[i].id},{goal_subject:e.user.goals[i].subject},function(t){e.user.goals[i].loading=!1,e.user.goals[i].error=!1,e.user.goals[i].goal=t.goal,e.user.goals[i].goal_subject=t.goal_subject,e.user.goals[i].resource_uri=t.resource_uri,e.user.goals[i].changed=!1,s.resolve()},function(t){e.user.goals[i].errorMessage=t.data.goal?t.data.goal.error[0]:"There was an error when trying to save this field.",e.user.goals[i].loading=!1,e.user.goals[i].error=!0,s.reject()});return s.promise},e.offerNeedSaving=function(i){e.user.offers[i].changed=!0},e.createNewOffer=function(){var i={id:0,subject:"",user:e.userUri,changed:!0};e.user.offers.push(i)},e.removeOffer=function(i){var s=y(e.user.offers[i].resource_uri);0===e.user.offers[i].id?e.user.offers.splice(i,1):s.delete().$promise.then(function(){e.user.offers.splice(i,1)})},e.saveCurrentOffer=function(i){var s=t.defer();if(e.user.offers[i].errorMessage="",e.user.offers[i].error=!1,e.user.offers[i].subject.length>300)return e.user.offers[i].error=!0,e.user.offers[i].errorMessage="Offer cannot have more than 300 characters.",s.reject(),s.promise;if(""===e.user.offers[i].subject)e.user.offers[i].error=!0,e.user.offers[i].errorMessage="Entering your offer is required.",s.reject();else if(0===e.user.offers[i].id){var n={offer_subject:e.user.offers[i].subject,user:e.userUri};e.user.offers[i].loading=!0,e.user.offers[i].error=!1,c.save({},n,function(t){e.user.offers[i].loading=!1,e.user.offers[i].error=!1,e.user.offers[i].id=t.id,e.user.offers[i].offer=t.offer,e.user.offers[i].offer_subject=t.offer_subject,e.user.offers[i].resource_uri=t.resource_uri,e.user.offers[i].user=t.user,e.user.offers[i].changed=!1,s.resolve()},function(t){e.user.offers[i].errorMessage=t.data.offer.error[0],e.user.offers[i].loading=!1,e.user.offers[i].error=!0,s.reject()})}else e.user.offers[i].error=!1,e.user.offers[i].loading=!0,c.update({offerId:e.user.offers[i].id},{offer_subject:e.user.offers[i].subject},function(t){e.user.offers[i].loading=!1,e.user.offers[i].error=!1,e.user.offers[i].offer=t.offer,e.user.offers[i].offer_subject=t.offer_subject,e.user.offers[i].resource_uri=t.resource_uri,e.user.offers[i].changed=!1,s.resolve()},function(t){e.user.offers[i].errorMessage=t.data.offer?t.data.offer.error[0]:"There was an error when trying to save this field.",e.user.offers[i].loading=!1,e.user.offers[i].error=!0,s.reject()});return s.promise},e.interestNeedSaving=function(i){e.user.interests[i].changed=!0},e.createNewInterest=function(){var i={id:0,interest_subject:"",interest:null,user:e.userUri,changed:!0};e.user.interests.push(i)},e.removeInterest=function(i){var s=y(e.user.interests[i].resource_uri);0===e.user.interests[i].id?e.user.interests.splice(i,1):s.delete().$promise.then(function(){e.user.interests.splice(i,1)})},e.saveCurrentInterest=function(i){var s=t.defer();if(e.user.interests[i].errorMessage="",e.user.interests[i].error=!1,e.user.interests[i].interest_subject.length>100)return e.user.interests[i].error=!0,e.user.interests[i].errorMessage="Interest cannot have more than 100 characters.",s.reject(),s.promise;if(""===e.user.interests[i].interest_subject)e.user.interests[i].error=!0,e.user.interests[i].errorMessage="Entering your interest is required.",s.reject();else if(0===e.user.interests[i].id){var n={interest_subject:e.user.interests[i].interest_subject,user:e.userUri};e.user.interests[i].loading=!0,e.user.interests[i].error=!1,l.save({},n,function(t){e.user.interests[i].loading=!1,e.user.interests[i].error=!1,e.user.interests[i].id=t.id,e.user.interests[i].interest=t.interest,e.user.interests[i].interest_subject=t.interest_subject,e.user.interests[i].resource_uri=t.resource_uri,e.user.interests[i].user=t.user,e.user.interests[i].changed=!1,s.resolve()},function(t){e.user.interests[i].errorMessage=t.data.interest.error[0],e.user.interests[i].loading=!1,e.user.interests[i].error=!0,s.reject()})}else e.user.interests[i].error=!1,e.user.interests[i].loading=!0,l.update({interestId:e.user.interests[i].id},{interest_subject:e.user.interests[i].interest_subject},function(t){e.user.interests[i].loading=!1,e.user.interests[i].error=!1,e.user.interests[i].interest=t.interest,e.user.interests[i].interest_subject=t.interest_subject,e.user.interests[i].resource_uri=t.resource_uri,e.user.interests[i].changed=!1,s.resolve()},function(t){e.user.interests[i].errorMessage=t.data.interest?t.data.interest.error[0]:"There was an error when trying to save this field.",e.user.interests[i].loading=!1,e.user.interests[i].error=!0,s.reject()});return s.promise},e.savingAllChanges=!1,e.startSavingChanges=function(){var i=e.saveChanges();e.savingAllChanges=!0,i.then(function(){v.info("Success saving"),e.savingAllChanges=!1,k({messageTemplate:'<div class="notify-info-header">Success</div><p>All changes have been saved.</p>',classes:"notify-info",icon:"check circle"}),n.go("myprofile")},function(){v.info("Failed"),e.savingAllChanges=!1,k({messageTemplate:'<div class="notify-error-header">Could not save your profile changes.</div><p>There were some errors. Please see them below.</p>',scope:e,classes:"notify-error",icon:"warning circle"})},function(){})},e.saveChanges=function(){var i=t.defer(),s=0;for(var n in e.user.goals)e.user.goals[n].changed&&s++;for(var n in e.user.offers)e.user.offers[n].changed&&s++;for(var n in e.user.interests)e.user.interests[n].changed&&s++;if(s>0){for(var n in e.user.goals)e.user.goals[n].changed&&e.saveCurrentGoal(n).then(function(){s--,0===s&&i.resolve()},function(){i.reject()},function(){});for(var n in e.user.offers)e.user.offers[n].changed&&e.saveCurrentOffer(n).then(function(){s--,0===s&&i.resolve()},function(){i.reject()},function(){});for(var n in e.user.interests)e.user.interests[n].changed&&e.saveCurrentInterest(n).then(function(){s--,0===s&&i.resolve()},function(){i.reject()},function(){})}else i.resolve();return i.promise}}]),angular.module("beKindred").controller("ConversationsCtrl",["$rootScope","notify","$resource","$state","InboxRepository","myIoSocket","Connection","$q","$http","$scope","USER_ID","$log","$timeout","FRIEND","MessagesFactory","$filter","FriendsFactory",function(e,i,s,t,n,r,a,o,d,c,l,u,v,f,m,h,g){c.leftActive=!0,c.messages=[],c.friendshipId=a.objects[0].id,i.closeAll(),c.status={loading:!1,loaded:!1},c.q="",c.newmessage="",c.nextOffset=20,c.next=null,c.friend=f,c.recipient="/api/v1/auth/user/"+c.friend.id+"/",c.sender="/api/v1/auth/user/"+l+"/",c.loadingMessages=!1,c.loadingOlderMessages=!1,c.sendingMessage=!1,c.scrollConversations=function(){v(function(){var e=angular.element(".conversation-content")[0].scrollHeight;angular.element(".conversation-content").filter(":not(:animated)").animate({scrollTop:e},1500)},100)},c.loadMore=function(){var e=o.defer();return null===c.next?(e.reject(),e.promise):(c.status.loading?e.reject():(c.status.loading=!0,v(function(){m.query({user_id:c.friend.id,offset:c.nextOffset,limit:10}).$promise.then(function(i){var s=i.objects;c.next=i.meta.next,h("orderBy")(s,"sent_at",!0),c.nextOffset+=10;for(var t in s){var n=h("amDateFormat")(s[t].sent_at,"dddd, MMMM D, YYYY"),r=h("amDateFormat")(s[t].sent_at,"L"),a=h("getIndexByProperty")("date",n,c.messages);null===a&&(c.messages.push({date:n,realDate:r,contents:[]}),a=c.messages.length-1),c.messages[a].contents.push(s[t].sender===c.sender?{body:s[t].body,sender:s[t].sender,recipient:s[t].recipient,date:r,sent_at:s[t].sent_at,left:!0}:{body:s[t].body,sender:s[t].sender,recipient:s[t].recipient,date:r,sent_at:s[t].sent_at,left:!1}),c.messages[a].contents=h("orderBy")(c.messages[a].contents,"sent_at",!0)}c.messages=h("orderBy")(c.messages,"realDate"),c.status.loading=!1,c.status.loaded=!0,e.resolve()},function(i){e.reject(),c.status.loading=!1;var s=(i.data,i.status),t=(i.header,i.config,"Error "+s);u.error(t)})},400)),e.promise)},c.getMessages=function(){c.messages=[],c.loadingMessages=!0,c.status.loaded=!1,m.query({user_id:c.friend.id,limit:20,offset:0}).$promise.then(function(e){var i=e.objects;c.next=e.meta.next,h("orderBy")(i,"sent_at",!0),c.status.loaded=!0;for(var s in i){var t=h("amDateFormat")(i[s].sent_at,"dddd, MMMM D, YYYY"),r=h("amDateFormat")(i[s].sent_at,"L"),a=h("getIndexByProperty")("date",t,c.messages);null===a&&(c.messages.push({date:t,realDate:r,contents:[]}),a=c.messages.length-1),c.messages[a].contents.push(i[s].sender===c.sender?{body:i[s].body,sender:i[s].sender,recipient:i[s].recipient,date:r,sent_at:i[s].sent_at,left:!0}:{body:i[s].body,sender:i[s].sender,recipient:i[s].recipient,date:r,sent_at:i[s].sent_at,left:!1}),c.messages[a].contents=h("orderBy")(c.messages[a].contents,"sent_at",!0)}c.messages=h("orderBy")(c.messages,"realDate"),c.messages.length>0&&(v(function(){var e=angular.element(".conversation-content")[0].scrollHeight;angular.element(".conversation-content").filter(":not(:animated)").animate({scrollTop:e},0)},100),d.get("/api/v1/inbox/reat_at/?sender_id="+c.friend.id).success(function(){n.getInboxMessages()}).error(function(){})),c.loadingMessages=!1},function(e){c.loadingMessages=!1;var i=(e.data,e.status),s=(e.header,e.config,"Error "+i);u.error(s)})},c.getMessages(),c.sendNewMessage=function(){if(""===c.newmessage)c.sendingMessage=!1;else{c.sendingMessage=!0;var e={};e={sender:c.sender,recipient:c.recipient,body:c.newmessage},m.save({},e,function(i){e.left=!0,e.sent_at=i.sent_at,e.sender=i.sender,e.recipient=i.recipient;var s=h("amDateFormat")(e.sent_at,"L"),t=h("amDateFormat")(e.sent_at,"dddd, MMMM D, YYYY"),n=h("getIndexByProperty")("date",t,c.messages);e.date=s,null===n&&(c.messages.push({date:t,realDate:s,contents:[]}),n=c.messages.length-1),c.messages[n].contents.push(e),c.newmessage="",u.info("New message saved."),c.sendingMessage=!1,c.scrollConversations()},function(e){c.sendingMessage=!1,u.info(e)})}},e.$on("receivedMessage",function(i,s){var t=JSON.parse(s);if(t.sender===c.recipient){u.info("new message");var r=h("amDateFormat")(t.sent_at,"dddd, MMMM D, YYYY"),a=h("amDateFormat")(t.sent_at,"L"),o=h("getIndexByProperty")("date",r,c.messages);null===o&&(c.messages.push({date:r,realDate:a,contents:[]}),o=c.messages.length-1),c.messages[o].contents.push({body:t.body,sender:t.sender,recipient:t.recipient,date:a,sent_at:t.sent_at,left:!1}),e.notifications.push({body:t.body,sender:t.sender,recipient:t.recipient,date:a,sent_at:t.sent_at}),c.messages[o].contents=h("orderBy")(c.messages[o].contents,"sent_at",!0),c.messages=h("orderBy")(c.messages,"realDate"),d.get("/api/v1/inbox/reat_at/?sender_id="+c.friend.id).success(function(){n.getInboxMessages()}).error(function(){}),v(function(){var e=angular.element(".conversation-content")[0].scrollHeight;angular.element(".conversation-content").filter(":not(:animated)").animate({scrollTop:e},1500)},100)}}),c.unFriend=function(){g.update({friendId:c.friendshipId},{status:-1},function(){n.getInboxMessages(),t.go("myconnections")},function(){})}}]),angular.module("beKindred").controller("BigMatchFeedCtrl",["$rootScope","$scope","$timeout","$filter","USER_ID","MatchFeedFactory","PhotosFactory","FriendsFactory","$log","MutualFriendsFactory",function(){}]),function(){function e(){function e(){}var s={controller:i,controllerAs:"messages",bindToController:!0,scope:{},link:e,template:"{{messages.counter}}",restrict:"EA"};return s}function i(e,i,s){function t(){n.counter=i.getUnreadMessagesCounter()}var n=this;n.counter=0,n.refreshCounter=t,s.$on("refreshInboxMessages",function(){n.refreshCounter()}),n.refreshCounter()}angular.module("beKindred").directive("messagesCounter",e),i.$inject=["$scope","InboxRepository","$rootScope","$log"]}(),function(){function e(e,i,s,t,n){function r(){function s(e){0===e.objects.length?(l.createFilters(c),l.filterState=c):(l.filterId=e.objects[0].id,l.filterState=e.objects[0],t.$broadcast("refreshFilters"))}function n(e){var s=(e.data,e.status),n=(e.header,e.config,"Error "+s);i.error(n),l.filterState=c,t.$broadcast("refreshFilters")}return i.info("fetching filters"),e.query({format:"json"}).$promise.then(s,n)}function a(){return l.filterState}function o(s){function n(){l.filterState=s,t.$broadcast("refreshFilters")}function r(e){var s=(e.data,e.status),t=(e.header,e.config,"Error "+s);i.error(t)}return i.info("saving filters"),null!==l.filterId?e.update({filterId:l.filterId},s,n,r):void 0}function d(s){function t(e){i.info("new filters created"),l.filterId=e.id}function n(e){var s=(e.data,e.status),t=(e.header,e.config,"Error "+s);i.error(t)}return i.info("creating filters"),e.save(s,t,n)}var c={distance:1e4,gender:"m,f",min_age:25,max_age:60,keyword:"",user:"/api/v1/auth/user/"+n+"/"},l={filterState:{distance:1e4,gender:"m,f",min_age:25,max_age:60,keyword:"",user:"/api/v1/auth/user/"+n+"/"},filterId:null,getFilters:r,saveFilters:o,createFilters:d,getFilterState:a};return l}angular.module("beKindred").factory("FilterRepository",e),e.$inject=["FiltersFactory","$log","$filter","$rootScope","USER_ID"]}(),angular.module("beKindred").factory("FiltersFactory",["$resource",function(e){return e("/api/v1/filter/state/:filterId/:param",{filterId:"@filterId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]),function(){function e(){function e(){}var s={controller:i,controllerAs:"filter",bindToController:!0,scope:{id:"@id","class":"@class"},link:e,templateUrl:"components/filter/matchfeedFilter.directive.html",restrict:"E"};return s}function i(e,i,s,t,n,r,a){function o(){i.$emit("triggerRefreshMatchfeed")}function d(){f.currentFilters=n.getFilterState(),f.distanceValue=f.currentFilters.distance,f.ageValues[0]=f.currentFilters.min_age,f.ageValues[1]=f.currentFilters.max_age,""!==f.currentFilters.keyword&&void 0!==f.currentFilters.keyword?f.myKeywords=f.currentFilters.keyword.split(","):f.myKeywords.splice(0,f.myKeywords.length),""===f.currentFilters.gender&&(f.male=!1,f.female=!1),"m,f"===f.currentFilters.gender&&(f.male=!0,f.female=!0),"m"===f.currentFilters.gender&&(f.male=!0,f.female=!1),"f"===f.currentFilters.gender&&(f.male=!1,f.female=!0)}function c(e,i){if(i===!0)f.gendersArr.push(e);else{var s=f.gendersArr.indexOf(e);f.gendersArr.splice(s,1)}f.gendersArr.sort().reverse(),f.genders=f.gendersArr.join(","),f.saveFilters()}function l(){f.newFilters={distance:parseInt(f.distanceValue),gender:f.genders,min_age:parseInt(f.ageValues[0]),max_age:parseInt(f.ageValues[1]),keyword:0===f.myKeywords.length?"":f.myKeywords.join(),user:"/api/v1/auth/user/"+r+"/"},n.saveFilters(f.newFilters)}function u(e){f.myKeywords.splice(e,1),f.saveFilters()}function v(e){if(f.filtermessage="",""===e||void 0===e)f.filtermessage="Keyword must have at least 3 letters",f.showFilterMessage=!0;else if(f.myKeywords.length<5){f.existing=!1;for(var i=f.myKeywords.length-1;i>=0;i--)f.myKeywords[i]===e&&(f.existing=!0);f.existing===!1?(f.myKeywords.push(e),f.saveFilters(),f.newKeyword="",f.showFilterMessage=!1):(f.filtermessage="Keyword already exists",f.showFilterMessage=!0)}else f.filtermessage="You cannot add more than 5 keywords",f.showFilterMessage=!0}var f=this;f.toggleGender=c,f.saveFilters=a.debounce(l,300),f.getFilters=d,f.removeKeyword=u,f.addKeyword=v,f.refreshMatchFeed=o,f.distanceValue=1e4,f.distanceOptions={range:{min:1,max:1e4}},f.male=!1,f.female=!1,f.checkedmale=!1,f.checkedfemale=!1,f.genders="",f.filtermessage="",f.currentFilters=null,f.showFilterMessage=!1,f.ageValues=[25,60],f.ageOptions={range:{min:18,max:115}},f.myKeywords=[],f.gendersArr=[],f.getFilters(),i.$on("refreshFilters",function(){f.getFilters()})}angular.module("beKindred").directive("matchfeedFilter",e),i.$inject=["$scope","$rootScope","$window","FiltersFactory","FilterRepository","USER_ID","lodash"]}(),angular.module("frontend.semantic.dimmer",[]).directive("pageDimmer",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{show:"=?",model:"=ngModel"},template:'<div class="{{dimmer_class}}" ng-click="click_on_dimmer()"><div class="content"><div class="center" ng-transclude></div></div></div>',link:function(e){1==e.show?e.dimmer_class="ui page inverted active dimmer":(e.show=!1,e.dimmer_class="ui page inverted disable dimmer"),e.click_on_dimmer=function(){e.model=!0,e.show=!0,e.dimmer_class="ui page inverted active dimmer"},e.$watch("model",function(i){return 0==i||void 0==i?(e.show=!1,void(e.dimmer_class="ui page inverted disable dimmer")):void(e.dimmer_class="ui page inverted active dimmer")})}}}),angular.module("beKindred").factory("GoalsFactory",["$resource",function(e){return e("/api/v1/goal/:goalId/:param",{goalId:"@goalId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("LikesFactory",["$resource",function(e){return e("/api/v1/likes/:likeId/:param",{likeId:"@likeId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("ProfileFactory",["$resource",function(e){return e("/api/v1/profile/:profileId/:param",{profileId:"@profileId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("ConnectionsFactory",["$resource",function(e){return e("/api/v1/connections/:connectionId/:param",{connectionId:"@connectionId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("FriendsFactory",["$resource",function(e){return e("/api/v1/friends/:friendId/:param",{friendId:"@friendId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("MutualFriendsFactory",["$resource",function(e){return e("/api/v1/mutual/friends/:friendId/:param",{friendId:"@friendId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("SubjectsFactory",["$resource",function(e){return e("/api/v1/subject/:subjectId/:param",{subjectId:"@subjectId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("OffersFactory",["$resource",function(e){return e("/api/v1/offer/:offerId/:param",{offerId:"@offerId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("InterestsFactory",["$resource",function(e){return e("/api/v1/interest/:interestId/:param",{interestId:"@interestId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("InterestSubjectFactory",["$resource",function(e){return e("/api/v1/interest_subject/:interestId/:param",{interestId:"@interestId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("UsersFactory",["$resource",function(e){return e("/api/v1/auth/user/:userId/:param",{userId:"@userId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("MessagesFactory",["$resource",function(e){return e("/api/v1/messages/:messageId/:param",{messageId:"@messageId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("InboxFactory",["$resource",function(e){return e("/api/v1/inbox/last/:inboxId/:param",{inboxId:"@inboxId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("FiltersFactory",["$resource",function(e){return e("/api/v1/filter/state/:filterId/:param",{filterId:"@filterId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]).factory("PhotosFactory",["$resource",function(e){return e("/api/v1/photo/:photoId/:param",{photoId:"@photoId"},{query:{method:"GET",isArray:!1,cache:!1},save:{method:"POST"},update:{method:"PATCH"},"delete":{method:"DELETE"}})}]),angular.module("beKindred").controller("AppCtrl",["$rootScope","$scope","USER_ID","FilterRepository","USER_FIRSTNAME","USER_PHOTO","$timeout","$state","$window","myIoSocket","$filter","$log","notify","$resource","$cookies","InboxRepository",function(e,i,s,t,n,r,a,o,d,c,l,u,v,f,m,h){e.hideTopMenu=!1,e.userImg=r,e.userName=n,m.userid=s,t.getFilters(),e.goBack=function(){e.hideTopMenu=!1,e.showfullprofile=!1,$(".horizontal.top.sidebar").sidebar("hide")},i.cancelMatch=function(){$(".dimmable").dimmer("hide"),e.hideTopMenu=!1,e.showfullprofile=!1,$(".horizontal.top.sidebar").sidebar("hide"),e.$broadcast("cancelMatchEvent")},i.confirmMatch=function(){$(".dimmable").dimmer("hide"),e.hideTopMenu=!1,e.showfullprofile=!1,$(".horizontal.top.sidebar").sidebar("hide"),e.$broadcast("confirmMatchEvent")},e.$on("triggerRefreshMatchfeed",function(){i.refreshMatchFeed()}),i.refreshMatchFeed=function(){$(".dimmable").dimmer("hide"),e.$broadcast("refreshMatchFeed")},h.getInboxMessages(),e.notifications=[],e.messages=[],i.$on("socket:message",function(s,t){if(e.isState("conversations"))e.$broadcast("receivedMessage",t);else{h.getInboxMessages();var n=JSON.parse(t),r=l("words")(n.body,10),a=l("amDateFormat")(n.sent_at,"h:mm a"),d=f(n.sender);d.get().$promise.then(function(e){i.gotoConversation=function(){o.go("conversations",{userId:e.id})};var s='<div class="notify-info-header"><a href="" ng-click="gotoConversation()">Received new message from '+e.first_name+"<br>"+a+' </a></div><p><a href="" ng-click="gotoConversation()">'+r+"</a></p>";v({messageTemplate:s,scope:i,classes:"notify-info",icon:"wechat"})})}})}]),angular.module("beKindred").run(["$templateCache",function(e){e.put("app/bigmatchfeed/bigmatchfeed.html",'<div style="float: right;"><div class="ui text main menu"><div class="text item" style="margin-right: 0px;">15 Results &nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;Sort By</div><div class="ui pointing dropdown link item" style="padding-left: 0px;margin-left: 0px;"><span class="text">Most Relevant</span> <i class="dropdown icon"></i><div class="menu"><div class="header">Categories</div><div class="item"><i class="dropdown icon"></i> <span class="text">Clothing</span><div class="menu"><div class="header">Mens</div><div class="item">Shirts</div><div class="item">Pants</div><div class="item">Jeans</div><div class="item">Shoes</div><div class="divider"></div><div class="header">Womens</div><div class="item">Dresses</div><div class="item">Shoes</div><div class="item">Bags</div></div></div><div class="item">Home Goods</div><div class="item">Bedroom</div><div class="divider"></div><div class="header">Order</div><div class="item">Status</div><div class="item">Cancellations</div></div></div></div></div><div class="ui grid"><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">Daniel Louise</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">Hi. I just moved to New York City from France and I’m looking to meet new friends and colleagues. I work in finance, but I’d like to join a tech startup. I like to travel and I’m an avid snowboarder. My parents own a winery, so I’m also quite familiar with French wine.</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">John Stevens</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">I am a 55 year old doctor and I’m supposed to give a presentation at a local university in 3 weeks, but I don’t know how to use PowerPoint. I need someone to show me how to use the software, and to help cre- ate the content of my slides (i.e. copy, images, video).</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">Daniel Louise</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">Hi. I just moved to New York City from France and I’m looking to meet new friends and colleagues. I work in finance, but I’d like to join a tech startup. I like to travel and I’m an avid snowboarder. My parents own a winery, so I’m also quite familiar with French wine.</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">Daniel Louise</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">Hi. I just moved to New York City from France and I’m looking to meet new friends and colleagues. I work in finance, but I’d like to join a tech startup. I like to travel and I’m an avid snowboarder. My parents own a winery, so I’m also quite familiar with French wine.</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">Daniel Louise</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">Hi. I just moved to New York City from France and I’m looking to meet new friends and colleagues. I work in finance, but I’d like to join a tech startup. I like to travel and I’m an avid snowboarder. My parents own a winery, so I’m also quite familiar with French wine.</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div><div class="row"><div class="column"><div class="ui fluid card matchedperson"><div class="content heading"><div class="ui tiny image"><img src="http://lorempixel.com/200/200"></div><div class="header-container"><div class="header">Daniel Louise</div><div class="meta">5 miles away</div></div><div class="description-container"><div class="description">Hi. I just moved to New York City from France and I’m looking to meet new friends and colleagues. I work in finance, but I’d like to join a tech startup. I like to travel and I’m an avid snowboarder. My parents own a winery, so I’m also quite familiar with French wine.</div></div><div class="extra"><div class="ui right floated bottom">7 hours ago</div></div></div><div class="content middle"><div class="ui equal width grid"><div class="row"><div class="column"><div>2 Matched Goals</div></div><div class="five wide column">Jacques wants to meet new people.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to meet new people.</div></div><div class="row"><div class="column"><div></div></div><div class="five wide column">Jacques is wiling to help people learn French.</div><div class="column wide center aligned"><i class="exchange icon"></i></div><div class="five wide column">You want to learn French.</div></div></div></div><div class="ui divider fitted inverted"></div><div class="content bottom"><div class="ui equal width grid"><div class="row"><div class="column"><br><br><div>9 things in common</div></div><div class="three wide column"><div>4 people</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Adam Smith</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">David Ricardo</div><div class="description">Facebook</div></div></div></div></div><div class="three wide column"><div>2 Likes &amp; Interests</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Burgundy Wine</div><div class="description">Facebook</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Motorcycles</div><div class="description">Pinterest</div></div></div></div></div><div class="three wide column"><div>3 places</div><div class="ui link items"><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Le Petit MAisonk</div><div class="description">Nice, France</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">The Meatball Shop</div><div class="description">New York, NY</div></div></div><div class="item"><div class="ui avatar-tiny image"><img src="http://lorempixel.com/50/50"></div><div class="content"><div class="header">Sydney Opera House</div><div class="description">Sydney, Australia</div></div></div></div></div></div></div></div><div class="extra content">Interested?&nbsp;&nbsp;&nbsp; <i class="check icon"></i>Yes&nbsp;&nbsp;&nbsp; <i class="cancel icon"></i>No&nbsp;&nbsp;&nbsp; <i class="star icon"></i>Maybe Later&nbsp;&nbsp;&nbsp;<div class="ui right floated"><i class="flag icon"></i> Flag</div></div></div></div></div></div><script>\n\n  \'use strict\';\n\n  $(\'.ui.dropdown\')\n  .dropdown()\n  ;\n</script>'),e.put("app/conversations/conversations.html",'<div id="mycontroller"><div class="ui fixed borderless menu" id="headermenu"><a class="icon item" ui-sref="inbox"><i class="left chevron icon"></i></a><h3 class="ui center aligned header">{{friend.first_name}}</h3></div><div class="ui fixed menu" id="submenu"><div class="3 fluid large ui buttons"><a ui-sref="conversations({ userId: friend.id })" ng-class="{\'active\': leftActive}" class="ui leftalign button"><i class="fa fa-comment-o icon"></i></a> <a ui-sref="friendprofile({ userId: friend.id })" class="ui button"><i class="fa fa-user icon"></i></a> <a class="ui button rightalign dropdown"><i class="fa fa-ellipsis-h icon"></i><div class="menu" id="friendmenu"><div class="item">Get Introduced</div><div class="item">Add to Group</div><div class="item">Arrange Meetup</div><div class="item">Flag as Inappropriate</div><div class="item deleteconnection">Remove Connection</div></div></a></div></div><div class="conversation-content basic ui segment" ng-class="{\'loading\': loadingMessages}" when-scrolled="loadMore()" scroll-bottom-on="status.loaded"><three-bounce-spinner class="page-spinner-bar" ng-show="status.loading"></three-bounce-spinner><div class="repeat-animation" ng-repeat="message in messages track by $index"><h6>{{message.date}}</h6><div ng-style="" class="repeat-animation" ng-class="{\'bubbledLeft\': msg.left, \'bubbledRight\': !msg.left, \'lastMessage\': $last}" ng-repeat="msg in message.contents | orderBy:\'sent_at\' track by $index"><p>{{msg.body}}</p><span class="conversation-time">{{msg.sent_at | amDateFormat:\'h:mm a\'}}</span></div></div></div><div class="conversation-content ui segment" ng-if="messages.length === 0"><h3>There are no any messages</h3></div><div class="message-reply"><div class="ui fluid action input"><input ng-enter="sendNewMessage()" type="text" placeholder="" ng-model="newmessage"><div ng-click="sendNewMessage()" class="ui button" ng-class="{\'loading\': sendingMessage}">Send</div></div></div><script>\n  \'use strict\';\n\n  $(\'.ui.dropdown\')\n  .dropdown({\n    onShow:  function(){\n\n\n      var scope = angular.element($("#submenu")).scope();\n      scope.$apply(function(){\n        scope.leftActive = false;\n      });\n    },\n    onHide: function(){\n\n      var scope = angular.element($("#submenu")).scope();\n      setTimeout(function() {\n        scope.$apply(function(){\n          scope.leftActive = true;\n        });\n      }, 100);\n    }\n  })\n  ;\n\n  $(\'.basic.delete.modal\')\n  .modal({\n    onDeny    : function(){\n      console.log(\'cancel\');\n    },\n    onApprove : function() {\n      console.log(\'deleting user\');\n\n      angular.element(document.getElementById(\'mycontroller\')).scope().unFriend();\n\n    }\n  })\n  .modal(\'attach events\', \'.deleteconnection\', \'show\');\n\n</script><div class="ui basic delete modal"><i class="close icon"></i><div class="header">Please Confirm</div><div class="content"><div class="description"><p>Are you sure you want remove this connection?</p></div></div><div class="actions"><div class="two fluid ui inverted buttons"><div class="ui red negative basic inverted button"><i class="remove icon"></i> No</div><a class="ui green basic inverted button ok"><i class="checkmark icon"></i> Yes</a></div></div></div></div>'),e.put("app/editmyprofile/editmyprofile.html",'<div class="ui fixed borderless menu center" id="edittopmenu"><div class="left menu"><a class="ui item" ui-sref="myprofile"><i class="left chevron icon"></i></a></div><div class="header item">Edit Profile</div><div class="right menu"><a class="ui item" ng-click="startSavingChanges()" ng-class="{\'loading\': savingAllChanges}">Save</a></div></div><div class="segment" id="my-profile-header-edit" ng-hide="showModal || editInterest"><div class="ui segment"><div id="tiles" ng-cloak=""><div class="ui image tile" ng-class="{\'left floated medium tile-big\': $index === 0, \'left floated small tile-small\': $index === 1 || $index === 2 || $index === 4 || $index === 5, \'small tile-small\': $index === 3 }" ng-repeat="photo in user.photos track by $index" end-repeat-photos="" ng-drop="true" ng-drop-success="onDropComplete($index, $data,$event)"><a href="" ng-click="$parent.userPhotoDelete = photo; $parent.userPhotoDeleteIndex = $index;" class="ui right corner delete_photo label" ng-show="photo.photo !== \'\'"><i class="close icon"></i></a><div class="tile-content" ng-show="photo.photo === \'\'"><div class="content"><div class="center"><a href="" ng-click="$parent.newPhotoIndex = $index; getFBAlbums();" class="ui compact icon button add_photo"><i class="circle add icon"></i> Add Photo</a></div></div></div><div style="background-image: url(\'{{photo.photo}}\')" ng-if="photo.cropped_photo === \'\'" ng-drag="true" ng-drag-data="photo" class="img-bounding-box"></div><div style="background-image: url(\'{{photo.cropped_photo}}\')" ng-if="photo.cropped_photo !== \'\'" ng-drag="true" ng-drag-data="photo" class="img-bounding-box"></div></div></div></div></div><div class="body segment edit" id="my-profile-body" ng-hide="showModal || editInterest"><div class="ui attached segment" id="my-profile-title"><h3 class="ui left floated header">{{ user.firstName }}<span ng-hide="user.firstName === \'\'">,</span> {{ user.age }}</h3></div><div class="ui attached segment" ng-class="{loading: loadingGoals || loadingOffers || loadingUser || loadingLikes || loadingInterests }"><h4 class="ui header">Goals</h4><div class="ui large list"><div class="item" end-repeat="" ng-repeat="goal in user.goals track by $index"><div class="content"><div class="description"><div class="ui fluid search goals" rel="{{$index}}" ng-class="{\'loading\': goal.loading }"><div class="ui fluid leftright action input" ng-class="{\'error\': goal.error}"><div class="ui removebutton icon circular button" ng-click="removeGoal($index)"><i class="remove icon"></i></div><input type="text" class="prompt" ng-model="goal.subject" ng-change="goalNeedSaving($index)"></div><div class="results"></div></div><div class="ui red pointing fluid label visible transition" ng-if="goal.error">{{goal.errorMessage}}</div></div></div></div></div><div class="ui fluid labeled blue button" ng-click="createNewGoal()"><i class="plus icon"></i> Create new Goal</div><h4 class="ui header">Offers</h4><div class="ui large list"><div class="item" end-repeat="" ng-repeat="offer in user.offers track by $index"><div class="content"><div class="description"><div class="ui fluid search offers" rel="{{$index}}" ng-class="{\'loading\': offer.loading }"><div class="ui fluid leftright action input" ng-class="{\'error\': offer.error}"><div class="ui removebutton icon circular button" ng-click="removeOffer($index)"><i class="remove icon"></i></div><input type="text" class="prompt" ng-model="offer.subject" ng-change="offerNeedSaving($index)"></div><div class="results"></div></div><div class="ui red pointing fluid label visible transition" ng-if="offer.error">{{offer.errorMessage}}</div></div></div></div></div><div class="ui fluid labeled blue button" ng-click="createNewOffer()"><i class="plus icon"></i> Create new Offer</div><h4 class="ui header">About</h4><form class="ui form" ng-class="{loading: loadingAbout}"><div class="field"><label></label> <textarea rows="3" ng-model="user.about_me" ng-blur="saveAbout()"></textarea></div></form><h4 class="ui header">Activities &amp; Interests</h4><div class="ui large list"><div class="item" end-repeat="" ng-repeat="interest in user.interests track by $index"><div class="content"><div class="description"><div class="ui fluid search interests" rel="{{$index}}" ng-class="{\'loading\': interest.loading }"><div class="ui fluid leftright action input" ng-class="{\'error\': interest.error}"><div class="ui removebutton icon circular button" ng-click="removeInterest($index)"><i class="remove icon"></i></div><input type="text" class="prompt" ng-model="interest.interest_subject" ng-change="interestNeedSaving($index)"></div><div class="results"></div></div><div class="ui red pointing fluid label visible transition" ng-if="interest.error">{{interest.errorMessage}}</div></div></div></div></div><div class="ui fluid labeled blue button" ng-click="createNewInterest()"><i class="plus icon"></i> Create new Interest</div><h4 class="ui header">Likes</h4><div class="ui list likes"><div class="item" ng-repeat="like in user.likes | limitTo:5 track by $index"><div class="content"><div class="description">{{ like.name }}</div></div></div></div></div><div class="ui attached segment" id="socialaccounts"><h4 class="ui header">Social Accounts</h4><a ng-click="link(\'linkedin\')" class="ui icon linkedin labeled fluid button" ng-show="linkedin === null"><i class="linkedin icon"></i> Connect</a><div class="ui fluid buttons socialbuttons" ng-show="linkedin !== null"><a href="{{ linkedin }}" target="_new" class="ui social icon twitter labeled button"><i class="linkedin icon"></i> {{user.firstName}} <i class="check circle icon right"></i></a> <a ng-click="unlink(\'linkedin\')" class="ui right icon circular button disconnect"><i class="remove icon"></i></a></div><br><a ng-click="link(\'twitter\')" class="ui icon twitter labeled fluid button" ng-show="twitter === null"><i class="twitter icon"></i> Connect</a><div class="ui fluid buttons socialbuttons" ng-show="twitter !== null"><a href="https://twitter.com/{{ twitter }}" target="_new" class="ui social icon twitter labeled button"><i class="twitter icon"></i> {{twitter}} <i class="check circle icon right"></i></a> <a ng-click="unlink(\'twitter\')" class="ui right icon circular button disconnect"><i class="remove icon"></i></a></div><br><a href="{{ user.facebookProfile }}" target="_new" class="ui social icon facebook labeled fluid button" ng-if="user.facebookProfile !== \'\'"><i class="facebook icon"></i> {{user.firstName}} <i class="lock icon right"></i></a></div></div><div class="ui basic modal" id="deletePhotoModal"><i class="close icon"></i><div class="header">Please Confirm</div><div class="content" ng-cloak=""><img ng-src="{{userPhotoDelete.photo}}" class="ui image small" alt=""><div class="description"><p>Are you sure you want to delete your photo?</p></div></div><div class="actions"><div class="two fluid ui inverted buttons"><div class="ui red basic inverted button"><i class="remove icon"></i> No</div><div ng-click="deletePhoto()" class="ui green basic inverted button"><i class="checkmark icon"></i> Yes</div></div></div></div><div class="body segment edit" id="my-profile-photos" ng-if="showModal" ng-cloak=""><div class="ui attached segment"><div class="ui fluid primary button" ng-click="closeModal()">Back to Edit Profile</div></div><div class="ui attached segment" ng-class="{loading: albumsLoading}"><div class="ui dividing header" ng-show="currentAlbum == \'\'">Choose Facebook Album</div><div class="ui dividing header" ng-show="currentAlbum != \'\' && showPhotos">Choose Photo</div><div class="ui selection list" ng-hide="hideAlbums"><div class="item" ng-click="getFBPhotos(fbAlbum.id, fbAlbum.name)" ng-repeat="fbAlbum in facebookAlbums track by $index"><img class="ui tiny image" ng-src="{{fbAlbum.picture.data.url}}"><div class="content"><div class="header">{{fbAlbum.name}}</div></div></div></div><div ng-show="hideAlbums" class="ui segment" ng-class="{loading: photosLoading}"><div class="fluid ui button" ng-click="backToAlbums()">Back to Albums</div><h3 ng-show="showPhotos" class="ui header">{{currentAlbum}}</h3><h3 ng-hide="showPhotos" class="ui header">Crop Photo</h3><div class="ui selection list" ng-show="showPhotos"><div ng-click="showCrop($index)" class="item button ok" ng-repeat="fbPhoto in facebookPhotos track by $index"><img class="ui small image" ng-src="{{fbPhoto.source}}"><div class="content"><div class="header"></div></div></div></div><div ng-hide="showPhotos"><div class="cropArea"><img-crop image="myImage" result-image="myCroppedImage" area-type="square"></img-crop></div><br><br><br><div class="ui fluid primary button" ng-click="createPhoto(myCroppedImage)">Save Photo</div></div></div></div></div><script type="text/javascript">\n\n  \'use strict\';\n  function refreshConnect() {\n    angular.element($(\'#socialaccounts\')).scope().refreshUser();\n  }\n</script>'),e.put("app/finalstep/finalstep.html",'<div id="finalstep"><div class="ui fixed borderless menu center" id="mainheadermenu"><div class="header item"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">4</i></span> Final Step</div></div><div class="ui grid fullheight"><div class="row"><div class="wide column"><div class="body segment"><h2 class="ui center aligned header withborder"><hr>Connect your LinkedIn and<br>Twitter accounts<hr></h2><div class="ui basic segment"><div class="ui center aligned grid"><div class="row"><div class="column"><div class="ui segment basic center alligend"><p>This will improve your match results within the Icebr&#257;k community.</p><p><i class="icon lock"></i> Icebr&#257;k will never share your information or post on your behalf.</p></div></div></div><div class="row"><div class="column"><div class="ui segment basic center alligend" ng-class="{\'loading\': finalstep.loading}"><a class="ui linkedin big button" ng-click="finalstep.link(\'linkedin\')" ng-show="finalstep.linkedin === null"><i class="linkedin icon"></i> Connect</a> <a href="{{ finalstep.linkedin }}" target="_new" class="ui social icon linkedin big labeled button" ng-show="finalstep.linkedin !== null"><i class="linkedin icon"></i> {{finalstep.firstName}} <i class="check circle icon right"></i></a><br><br><a class="ui twitter big button" ng-click="finalstep.link(\'twitter\')" ng-show="finalstep.twitter === null"><i class="twitter icon"></i> Connect</a> <a href="https://twitter.com/{{ finalstep.twitter }}" target="_new" class="ui social icon twitter labeled big button" ng-show="finalstep.twitter !== null"><i class="twitter icon"></i> {{finalstep.twitter}} <i class="check circle icon right"></i></a></div></div></div><div class="row"><div class="column"><div class="ui segment basic center aligned"><a class="ui" ui-sref="matchfeed" ng-show="finalstep.twitter === null && finalstep.linkedin === null">skip &raquo;</a> <a class="ui green big button" ui-sref="matchfeed" ng-show="finalstep.twitter !== null || finalstep.linkedin !== null">Next &raquo;</a></div></div></div></div></div></div></div></div></div><script type="text/javascript">\n\n    \'use strict\';\n    function refreshConnect() {\n      angular.element($(\'#finalstep\')).scope().finalstep.refreshUser();\n    }\n  </script></div>'),e.put("app/friendprofile/friendprofile.html",'<div id="connectionPage"><div class="ui fixed borderless menu" id="headermenu"><a class="icon item" ui-sref="myconnections"><i class="left chevron icon"></i></a><h3 class="ui center aligned header">{{ friendprofile.user.firstName }}</h3></div><div class="ui fixed menu" id="submenu"><div class="3 fluid large ui buttons"><a ui-sref="conversations({ userId: friendprofile.user.id })" class="ui leftalign button"><i class="fa fa-comment-o icon"></i></a> <a ui-sref="friendprofile({ userId: friendprofile.user.id })" ng-class="{\'active\': friendprofile.middleActive}" class="ui button"><i class="fa fa-user icon"></i></a> <a class="ui button rightalign dropdown"><i class="fa fa-ellipsis-h icon"></i><div class="menu" id="friendmenu"><div class="item">Get Introduced</div><div class="item">Add to Group</div><div class="item">Arrange Meetup</div><div class="item">Flag as Inappropriate</div><div class="item deleteconnection">Remove Connection</div></div></a></div></div><div class="ui grid fullheight"><div class="row"><div class="wide column"><div class="header segment with-menu" id="friendprofileheader"><div class="pagination-container"><div id="PhotoSlider" ng-if="friendprofile.photosSlider.length > 0"><ul rn-carousel="" rn-carousel-index="friendprofile.carouselIndex2"><li ng-repeat="item in friendprofile.photosSlider | orderBy:\'order\' track by $index"><img ng-show="item.cropped_photo === \'\'" class="img-bounding-box-full-width" ng-src="{{item.photo}}"> <img ng-show="item.cropped_photo !== \'\'" class="img-bounding-box-full-width" ng-src="{{item.cropped_photo}}"></li></ul><div class="carousel-indicators" rn-carousel-indicators="" ng-if="friendprofile.photosSlider.length > 1" slides="friendprofile.photosSlider" rn-carousel-index="friendprofile.carouselIndex2"></div></div></div></div><div class="body segment" id="matched-profile-body"><div class="ui top attached segment"><h3 class="ui left floated header">{{ friendprofile.user.firstName }}<span ng-hide="friendprofile.user.firstName === \'\'">,</span> {{ friendprofile.user.age }}</h3></div><div class="ui attached segment" ng-class="{loading: friendprofile.loadingGoals || friendprofile.loadingOffers || friendprofile.loadingUser || friendprofile.loadingLikes || friendprofile.loadingInterests}"><h4 class="ui header">Goals</h4><div class="ui list"><div class="item" ng-repeat="goal in friendprofile.user.goals | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': goal.match === 1, \'empty smallicon\': goal.match === 0 }"></i><div class="content"><div class="description">{{ goal.value }}</div></div></div><p ng-if="friendprofile.user.goals.length === 0">No goals yet.</p></div><h4 class="ui header">Offers</h4><div class="ui list"><div class="item" ng-repeat="offer in friendprofile.user.offers | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': offer.match === 1, \'empty smallicon\': offer.match === 0 }"></i><div class="content"><div class="description">{{ offer.value }}</div></div></div><p ng-if="friendprofile.user.offers.length === 0">No offers yet.</p></div><h4 class="ui header">About</h4><div class="ui list"><div class="item"><i class="empty icon"></i><div class="content"><div class="description"><span>{{friendprofile.user.about_me}}</span></div></div></div></div><h4 class="ui header">Activities &amp; Interests</h4><div class="ui list"><div class="item" ng-repeat="interest in friendprofile.user.interests | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': interest.match === 1, \'empty smallicon\': interest.match === 0 }"></i><div class="content"><div class="description">{{ interest.value }}</div></div></div><p ng-if="friendprofile.user.interests.length === 0">No interests yet.</p></div><h4 class="ui header">Likes</h4><div class="ui list likes"><div class="item" ng-repeat="like in friendprofile.user.likes | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': like.match === 1, \'empty smallicon\': like.match === 0 }"></i><div class="content"><div class="description">{{ like.value }}</div></div></div><p ng-if="friendprofile.user.likes.length === 0">No likes yet.</p></div><h4 ng-if="friendprofile.user.friends.length > 0" class="ui header">Mutual Friends</h4><div ng-if="friendprofile.user.friends.length > 0" class="ui selection list"><a ui-sref="friendprofile({ userId: friend.user_id })" class="item" ng-repeat="friend in friendprofile.user.friends track by $index"><img class="ui avatar image" ng-src="http://graph.facebook.com/{{ friend.facebook_id }}/picture"><div class="content"><div class="header">{{ friend.first_name }}</div></div></a></div><h4 ng-if="friendprofile.user.facebookfriends.length > 0" class="ui header">Mutual Facebook Friends ({{ friendprofile.user.facebookfriends.length }})</h4><div ng-if="friendprofile.user.facebookfriends.length > 0" class="ui selection list"><div class="item" ng-repeat="friend in friendprofile.user.facebookfriends track by $index"><img class="ui avatar image" ng-src="http://graph.facebook.com/{{ friend.facebook_id }}/picture"><div class="content"><div class="header">{{ friend.first_name }}</div></div></div></div><h4 ng-if="friendprofile.user.twitterfriends.length > 0" class="ui header">Mutual Twitter Friends ({{ friendprofile.user.twitterfriends.length }})</h4><div ng-if="friendprofile.user.twitterfriends.length > 0" class="ui selection list"><div class="item" ng-repeat="friend in friendprofile.user.twitterfriends track by $index"><img class="ui avatar image" ng-src="{{friend.profile_image_url}}"><div class="content"><div class="header">{{ friend.name }}</div></div></div></div><h4 ng-if="friendprofile.user.twitterfollowers.length > 0" class="ui header">Mutual Twitter Followers ({{ friendprofile.user.twitterfollowers.length }})</h4><div ng-if="friendprofile.user.twitterfollowers.length > 0" class="ui selection list"><div class="item" ng-repeat="friend in friendprofile.user.twitterfollowers track by $index"><img class="ui avatar image" ng-src="{{friend.profile_image_url}}"><div class="content"><div class="header">{{ friend.name }}</div></div></div></div><h4 ng-if="friendprofile.user.linkedinconnections.length > 0" class="ui header">Mutual LinkedIn Connections ({{ friendprofile.user.linkedinconnections.length }})</h4><div ng-if="friendprofile.user.linkedinconnections.length > 0" class="ui selection list"><div class="item" ng-repeat="friend in friendprofile.user.linkedinconnections track by $index"><img class="ui avatar image" ng-src="{{friend.pictureUrls.values[0]}}"><div class="content"><div class="header">{{ friend.firstName }}</div></div></div></div><h4 ng-if="friendprofile.user.linkedin_provider !== null || friendprofile.user.twitter_provider !== null" class="ui header">Social Profiles</h4><a ng-if="friendprofile.user.linkedin_provider !== null" href="{{friendprofile.user.linkedin_provider}}" target="_new" class="ui linkedin button"><i class="linkedin icon"></i> LinkedIn</a> <a ng-if="friendprofile.user.twitter_provider !== null" href="http://www.twitter.com/{{friendprofile.user.twitter_provider}}" target="_new" class="ui twitter button"><i class="twitter icon"></i> Twitter</a></div></div></div></div></div></div><script>\n    \'use strict\';\n    $(\'.ui.dropdown\')\n    .dropdown({\n        onShow:  function(){\n            var scope = angular.element($("#submenu")).scope();\n            scope.$apply(function(){\n                scope.friendprofile.middleActive = false;\n            });\n        },\n        onHide: function(){\n            var scope = angular.element($("#submenu")).scope();\n            setTimeout(function() {\n                scope.$apply(function(){\n                    scope.friendprofile.middleActive = true;\n                });\n            }, 100);\n        }\n    })\n    ;\n\n</script><div class="ui basic delete modal"><i class="close icon"></i><div class="header">Please Confirm</div><div class="content"><div class="description"><p>Are you sure you want remove this connection?</p></div></div><div class="actions"><div class="two fluid ui inverted buttons"><div class="ui red negative basic inverted button"><i class="remove icon"></i> No</div><a class="ui green basic inverted button ok"><i class="checkmark icon"></i> Yes</a></div></div></div><script>\n  \'use strict\';\n  $(\'.basic.delete.modal\')\n  .modal({\n    onDeny    : function(){\n      console.log(\'cancel\');\n  },\n  onApprove : function() {\n      console.log(\'deleting user\');\n      angular.element(document.getElementById(\'connectionPage\')).scope().friendprofile.unFriend();\n  }\n})\n  .modal(\'attach events\', \'.deleteconnection\', \'show\');\n\n\n</script>'),e.put("app/goalcreate/goalcreate.html",'<div class="ui fixed borderless menu center" id="mainheadermenu"><div class="header item"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">2</i></span> Create a goal</div></div><div class="ui grid fullheight"><div class="row"><div class="wide column"><div class="body segment"><h2 class="ui center aligned header withborder">My goal is to...<hr></h2><div class="ui attached warning message" id="warningmessage" ng-show="messageShow"><div class="header">Warning</div><p>{{message}}</p></div><div class="ui basic segment"><div class="ui center aligned grid"><div class="row"><div class="search-wrapper ui icon large left input"><i class="fa fa-search fa-lg"></i><div field-required="false" angucomplete-alt="" text-no-results="No existing goal found. Create new goal &raquo;" minlength="3" input-changed="inputChanged" match-class="highlight" selected-object="selectResult" description-field="description[3]" title-field="description" remote-url="/api/v1/subject/?format=json&description__icontains=" remote-url-data-field="objects" type="text" input-name="description" id="id_description" placeholder="enter your goal here"></div></div></div><div class="row" ng-hide="subject === \'\'"><a ng-click="createGoal()" class="ui button submit green big" role="button">Next &rarr;</a></div></div></div><div class="ui secondary segment" id="instructions" ng-hide="subject !== \'\'"><h4>This should be something you want other people to help you with.</h4><br><h4>For example:</h4><p><ul class="unstyled"><li>&quot;Learn to play tennis&quot;</li><li>&quot;Find a running partner&quot;</li><li>&quot;Hire a cat sitter&quot;</li><li>&quot;Move my sofa upstairs&quot;</li></ul></p></div></div></div></div></div>'),e.put("app/inbox/inbox.html",'<div id="search-header"><div class="ui left icon input"><input type="text" ng-model="inbox.q" name="q" placeholder="Search"> <i class="circular search icon"></i></div></div><div id="inbox-body" class="basic ui segment" ng-class="{\'loading\': inbox.loadingMessages}" when-scroll-ends="inbox.loadMore()"><div class="ui selection divided list"><a ng-class="{\'unread\': message.readAt === null}" ui-sref="conversations({ userId: message.friendId })" class="item repeat-animation" ng-if="message.body !== null" ng-repeat="message in inbox.allMessages | filter:{firstName: inbox.q} track by message.id"><div class="ui circular tiny image img-bounding-box" ng-style="{\'background-image\': \'url(//graph.facebook.com/{{ message.facebookId }}/picture?type=large)\'}"></div><span class="message-time">{{message.sentAt}}</span><div class="content"><div class="header">{{message.firstName}}</div><div class="description">{{message.body | words: 8}}</div></div></a></div><three-bounce-spinner class="page-spinner-bar" ng-show="inbox.loadingMore"></three-bounce-spinner></div>'),e.put("app/interests/interests.html",'<div class="ui fixed borderless menu" id="mainheadermenu"><div class="header item"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">1</i></span> What interests you?</div><div class="right menu"><a class="ui item" ng-click="interest.nextStep()">Next &raquo;</a></div></div><div id="interests-header"><div class="ui left icon input"><input type="text" ng-model="interest.searchQuery" ng-change="interest.getAllInterests()" ng-model-options="{debounce:300}" placeholder="Search"> <i class="circular search icon"></i></div></div><div id="interests" class="basic ui segment" ng-class="{\'loading\': interest.loadingInterests}" when-scroll-ends="interest.loadMoreInterests()"><div ng-click="interest.useInterest($index)" class="ui button toggle compact repeat-animation" ng-repeat="inter in interest.allInterests track by $index" ng-class="{\'active\': inter.active, \'loading\': interest.inter.loading}">{{inter.description}}</div><div class="ui info message" ng-show="interest.noResults && !interest.loadingInterests"><p>No interests found.</p><p>Try with another search term or <a href="" ng-click="interest.reset()">reset your search</a>.</p></div><three-bounce-spinner class="page-spinner-bar" ng-show="interest.loadingMore"></three-bounce-spinner></div>'),e.put("app/main/main.html",'<div class="ui center aligned grid fullheight" id="homepage"><div class="row"><div class="wide column"><div class="ui huge header aligned center">Welcome to</div></div></div><div class="row"><div class="wide column"><ul class="social-icon" id="intro-title"><li><h1>Icebr&#257;k</h1></li></ul><br><br><p><a ui-sref="selectinterests" class="ui green button huge">Start</a></p></div></div></div>'),e.put("app/matchfeed/matchfeed.html",'<div class="ui grid fullheight"><div class="row"><div class="wide column"><div ng-if="total > 0"><three-bounce-spinner ng-show="loadingFeed" class="ui inverted dimmer transition visible active"></three-bounce-spinner><div ng-hide="showDimmer"><div class="dimmable"><div class="header segment with-menu" id="my-profile-header" ng-if="showfullprofile"><div class="container"><div class="pagination-container"><div id="PhotoSlider"><ul rn-carousel="" rn-carousel-index="carouselIndex2"><li ng-repeat="item in photosSlider | orderBy:\'order\' track by $index"><img ng-show="item.cropped_photo === \'\'" class="img-bounding-box-full-width" ng-src="{{item.photo}}"> <img ng-show="item.cropped_photo !== \'\'" class="img-bounding-box-full-width" ng-src="{{item.cropped_photo}}"></li></ul><div class="carousel-indicators" rn-carousel-indicators="" ng-if="photosSlider.length > 1" slides="photosSlider" rn-carousel-index="carouselIndex2"></div></div></div></div></div><div class="header segment" id="matched-profile-header" ng-hide="showfullprofile"><div class="ui segment" ng-click="changeTopMenu()"><div ng-show="photosSlider[0].cropped_photo === \'\'" class="ui circular middle aligned left floated small image img-bounding-box" style="background-image: url(\'{{photosSlider[0].photo}}\');"></div><div ng-show="photosSlider[0].cropped_photo !== \'\'" class="ui circular middle aligned left floated small image img-bounding-box" style="background-image: url(\'{{photosSlider[0].cropped_photo}}\');"></div><h2 class="ui header">{{ matchedUser.first_name }}, {{ matchedUser.age }}<div class="sub header">{{matchedUser.distance}} mi.</div></h2><div class="ui mini statistics"><div class="statistic"><div class="value"><i class="intersecticon icon"></i></div><div class="label">{{totalmatchingcount}}</div></div><div class="statistic"><div class="value"><i class="empty users usericon icon"></i></div><div class="label">{{totalfriendscount}}</div></div></div></div></div><div class="body segment" id="matched-profile-body"><div class="ui top attached segment" ng-show="showfullprofile"><h3 class="ui left floated header">{{ matchedUser.first_name }} {{ matchedUser.age }}</h3><h5 class="ui right floated header">{{matchedUser.distance}} mi.</h5></div><div class="ui attached segment"><h4 class="ui header" ng-if="matchedUser.goals.length > 0">Goals</h4><div class="ui list"><div ng-hide="!showfullprofile && $index > 2" class="item" ng-repeat="goal in matchedUser.goals | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': goal.match === 1, \'empty smallicon\': goal.match === 0 }"></i><div class="content"><div class="description">{{ goal.value }}</div></div></div></div><h4 class="ui header" ng-if="matchedUser.offers.length > 0">Offers</h4><div class="ui list"><div ng-hide="!showfullprofile && $index > 2" class="item" ng-repeat="offer in matchedUser.offers | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': offer.match === 1, \'empty smallicon\': offer.match === 0 }"></i><div class="content"><div class="description">{{ offer.value }}</div></div></div></div><h4 class="ui header" ng-show="showfullprofile" ng-if="matchedUser.about !== \'\'">About</h4><div class="ui list" ng-show="showfullprofile"><div class="item"><i class="empty icon"></i><div class="content"><div class="description"><span>{{matchedUser.about}}</span></div></div></div></div><h4 class="ui header" ng-if="matchedUser.interests.length > 0">Activities &amp; Interests</h4><div class="ui list"><div class="item" ng-hide="!showfullprofile && $index > 2" ng-repeat="interest in matchedUser.interests | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': interest.match === 1, \'empty smallicon\': interest.match === 0 }"></i><div class="content"><div class="description">{{ interest.value }}</div></div></div></div><h4 class="ui header" ng-if="matchedUser.likes.length > 0">Likes</h4><div class="ui list likes"><div class="item" ng-hide="!showfullprofile && $index > 2" ng-repeat="like in matchedUser.likes | orderBy:[\'-match\'] track by $index"><i class="icon" ng-class="{\'stop smallicon\': like.match === 1, \'empty smallicon\': like.match === 0 }"></i><div class="content"><div class="description">{{ like.value }}</div></div></div></div><h4 ng-if="matchedUser.friends.length > 0" class="ui header" ng-show="showfullprofile">Mutual Friends</h4><div ng-if="matchedUser.friends.length > 0" class="ui selection list" ng-show="showfullprofile"><a ui-sref="friendprofile({ userId: friend.user_id })" class="item" ng-repeat="friend in matchedUser.friends track by $index"><img class="ui avatar image" ng-src="http://graph.facebook.com/{{ friend.facebook_id }}/picture"><div class="content"><div class="header">{{ friend.first_name }}</div></div></a></div><h4 ng-if="matchedUser.facebookfriends.length > 0" class="ui header" ng-show="showfullprofile">Mutual Facebook Friends ({{ matchedUser.facebookfriends.length }})</h4><div ng-if="matchedUser.facebookfriends.length > 0" class="ui selection list" ng-show="showfullprofile"><div class="item" ng-repeat="friend in matchedUser.facebookfriends track by $index"><img class="ui avatar image" ng-src="http://graph.facebook.com/{{ friend.facebook_id }}/picture"><div class="content"><div class="header">{{ friend.first_name }}</div></div></div></div><h4 ng-if="matchedUser.twitterfriends.length > 0" class="ui header" ng-show="showfullprofile">Mutual Twitter Friends ({{ matchedUser.twitterfriends.length }})</h4><div ng-if="matchedUser.twitterfriends.length > 0" class="ui selection list" ng-show="showfullprofile"><div class="item" ng-repeat="friend in matchedUser.twitterfriends track by $index"><img class="ui avatar image" ng-src="{{friend.profile_image_url}}"><div class="content"><div class="header">{{ friend.name }}</div></div></div></div><h4 ng-if="matchedUser.twitterfollowers.length > 0" class="ui header" ng-show="showfullprofile">Mutual Twitter Followers ({{ matchedUser.twitterfollowers.length }})</h4><div ng-if="matchedUser.twitterfollowers.length > 0" class="ui selection list" ng-show="showfullprofile"><div class="item" ng-repeat="friend in matchedUser.twitterfollowers track by $index"><img class="ui avatar image" ng-src="{{friend.profile_image_url}}"><div class="content"><div class="header">{{ friend.name }}</div></div></div></div><h4 ng-if="matchedUser.linkedinconnections.length > 0" class="ui header" ng-show="showfullprofile">Mutual LinkedIn Connections ({{ matchedUser.linkedinconnections.length }})</h4><div ng-if="matchedUser.linkedinconnections.length > 0" class="ui selection list" ng-show="showfullprofile"><div class="item" ng-repeat="friend in matchedUser.linkedinconnections track by $index"><img class="ui avatar image" ng-src="{{friend.pictureUrls.values[0]}}"><div class="content"><div class="header">{{ friend.firstName }}</div></div></div></div><h4 ng-show="showfullprofile" ng-if="matchedUser.linkedin_provider !== null || matchedUser.twitter_provider !== null" class="ui header">Social Profiles</h4><a ng-show="showfullprofile" ng-if="matchedUser.linkedin_provider !== null" href="{{matchedUser.linkedin_provider}}" target="_new" class="ui linkedin button"><i class="linkedin icon"></i> LinkedIn</a> <a ng-show="showfullprofile" ng-if="matchedUser.twitter_provider !== null" href="http://www.twitter.com/{{matchedUser.twitter_provider}}" target="_new" class="ui twitter button"><i class="twitter icon"></i> Twitter</a></div></div><div class="footer segment" id="matched-profile-footer" ng-hide="showfullprofile"><div class="ui grid one column aligned center"><div class="row"><div class="column"><div class="ui labeled icon menu"><a href="" ng-click="cancelMatch()" class="item" id="left_button"><i class="remove red circle icon"></i></a> <a href="" ng-click="confirmMatch()" class="item" id="accept_button"><i class="check green circle icon"></i></a></div></div></div></div><br></div></div></div></div><div class="body segment" ng-show="total === 0"><div class="ui info message"><div class="header">Sorry. Currently you don\'t have any matches.</div><p>Add more information to your profile. <a class="ui icon mini button blue" ui-sref="myprofile"><i class="angle double right icon"></i></a></p><p>Adjust your match filter to be less restrictive. <a class="ui icon mini button blue" id="showFilter" href=""><i class="angle double right icon"></i></a></p></div></div></div></div></div><page-dimmer ng-model="showDimmer" show="true"><h1 class="ui header">Icebr&#257;k</h1><h2 class="ui header">Locating people with similar goals...</h2><fading-circle-spinner></fading-circle-spinner></page-dimmer><script>\n    \'use strict\';\n\n    $(\'.right.sidebar\').first()\n    .sidebar(\'attach events\', \'#showFilter\', \'show\')\n    ;\n    $(\'#showFilter\')\n    .removeClass(\'disabled\')\n    ;\n\n</script>'),e.put("app/myconnections/myconnections.html",'<div id="search-header"><div class="ui left icon input"><input type="text" ng-model="myconnections.q" ng-change="myconnections.getFriends()" placeholder="Search" ng-model-options="{debounce:300}"> <i class="circular search icon"></i></div></div><div id="friends-list-body" class="basic ui segment" ng-class="{\'loading\': myconnections.loading}" when-scroll-ends="myconnections.loadMoreFriends()"><div class="ui basic segment notice" ng-if="myconnections.noConnections"><div class="ui info message"><p>You don\'t have any connections. Go to your Match Feed to find people with similar goals and interests.</p><p><a class="ui icon button blue" ui-sref="matchfeed">Match Feed</a></p></div></div><div class="ui divided selection list"><div class="ui info message" ng-show="myconnections.noResults && !myconnections.loading && !myconnections.noConnections"><p>No connections found.</p><p>Try with another search term or <a href="" ng-click="myconnections.reset()">reset your search</a>.</p></div><div ui-sref="friendprofile({ userId: friend.friend_id })" class="item repeat-animation" ng-repeat="friend in myconnections.friends track by $index"><div class="ui circular tiny image img-bounding-box" ng-style="{\'background-image\': \'url(//graph.facebook.com/{{ friend.facebook_id }}/picture?type=large)\'}"></div><div class="content"><div class="header">{{friend.first_name}}</div><div class="description"><div class="ui mini statistics"><div class="statistic"><div class="value"><i class="intersecticon icon"></i></div><div class="label">{{friend.common_goals_offers_interests}}</div></div><div class="statistic"><div class="value"><i class="empty users usericon icon"></i></div><div class="label">{{friend.totalFriends}}</div></div></div></div></div></div></div><three-bounce-spinner class="page-spinner-bar" ng-show="myconnections.loadingMore"></three-bounce-spinner></div>'),e.put("app/myprofile/myprofile.html",'<div class="ui grid"><div class="row"><div class="wide column"><div class="header segment with-menu" id="my-profile-header"><div class="pagination-container"><div id="PhotoSlider" ng-if="photosSlider.length > 0"><ul rn-carousel="" rn-carousel-index="carouselIndex2"><li ng-repeat="item in photosSlider | orderBy:\'order\' track by $index"><img ng-show="item.cropped_photo === \'\'" class="img-bounding-box-full-width" ng-src="{{item.photo}}"> <img ng-show="item.cropped_photo !== \'\'" class="img-bounding-box-full-width" ng-src="{{item.cropped_photo}}"></li></ul><div class="carousel-indicators" rn-carousel-indicators="" ng-if="photosSlider.length > 1" slides="photosSlider" rn-carousel-index="carouselIndex2"></div></div></div></div><div class="body segment" id="matched-profile-body"><div class="ui top attached segment"><h3 class="ui left floated header">{{ user.firstName }}<span ng-hide="user.firstName === \'\'">,</span> {{ user.age }}</h3><h5 class="ui right floated header"><a ui-sref="editmyprofile" class="ui tiny button blue">Edit</a></h5></div><div class="ui attached segment" ng-class="{loading: loadingGoals || loadingOffers || loadingUser || loadingLikes || loadingInterests}"><h4 class="ui header">Goals</h4><div class="ui list"><div class="item" ng-repeat="goal in user.goals track by $index"><i class="icon empty"></i><div class="content"><div class="description">{{ goal.subject }}</div></div></div><p ng-if="user.goals.length == 0">No goals yet.</p></div><h4 class="ui header">Offers</h4><div class="ui list"><div class="item" ng-repeat="offer in user.offers track by $index"><i class="icon empty"></i><div class="content"><div class="description">{{ offer.subject }}</div></div></div><p ng-if="user.offers.length == 0">No offers yet.</p></div><h4 class="ui header">About</h4><div class="ui list"><div class="item"><i class="empty icon"></i><div class="content"><div class="description"><span>{{user.about_me}}</span></div></div></div></div><h4 class="ui header">Activities &amp; Interests</h4><div class="ui list"><div class="item" ng-repeat="interest in user.interests | limitTo:5 track by $index"><i class="icon empty"></i><div class="content"><div class="description">{{ interest.interest_subject }}</div></div></div><p ng-if="user.interests.length == 0">No interests yet.</p></div><h4 class="ui header">Likes</h4><div class="ui list likes"><div class="item" ng-repeat="like in user.likes | limitTo:5 track by $index"><i class="icon empty"></i><div class="content"><div class="description">{{ like.name }}</div></div></div><p ng-if="user.likes.length == 0">No likes yet.</p></div><h4 class="ui header">Social Accounts</h4><a href="{{ linkedin }}" target="_new" class="ui social icon fluid linkedin labeled button" ng-show="linkedin !== null"><i class="linkedin icon"></i> {{user.firstName}} <i class="check circle icon right"></i></a><br ng-show="linkedin !== null"><a href="https://twitter.com/{{ twitter }}" target="_new" class="ui social fluid icon twitter labeled button" ng-show="twitter !== null"><i class="twitter icon"></i> {{twitter}} <i class="check circle icon right"></i></a><br ng-show="twitter !== null"><a href="{{ user.facebookProfile }}" class="ui social icon facebook labeled fluid button" ng-if="user.facebookProfile !== \'\'"><i class="facebook icon"></i> {{user.firstName}} <i class="lock icon right"></i></a></div></div></div></div></div>'),e.put("app/offercreate/offercreate.html",'<div class="ui fixed borderless menu center" id="mainheadermenu"><div class="header item"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">3</i></span> Post an offer</div></div><div class="ui grid fullheight"><div class="row"><div class="wide column"><div class="body segment"><h2 class="ui center aligned header withborder">I can help people...<hr></h2><div class="ui attached warning message" id="warningmessage" ng-show="messageShow"><div class="header">Warning</div><p>{{message}}</p></div><div class="ui basic segment"><div class="ui form"><div class="ui center aligned grid"><div class="row"><div class="search-wrapper ui icon large left input"><i class="fa fa-search fa-lg"></i><div field-required="false" angucomplete-alt="" minlength="3" text-no-results="No existing offer found. Create new offer &raquo;" input-changed="inputChanged" match-class="highlight" selected-object="selectResult" description-field="description[3]" title-field="description" remote-url="/api/v1/subject/?format=json&description__icontains=" remote-url-data-field="objects" type="text" input-name="description" id="id_description" placeholder="enter your offer here"></div></div></div><div class="row" ng-hide="subject === \'\'"><a ng-click="createOffer()" class="ui button submit green big" role="button">Next &rarr;</a></div></div></div></div><div class="ui secondary segment" id="instructions" ng-hide="subject !== \'\'"><h4>This should be something you\'re willing to help other people achieve.</h4><br><h4>For example:</h4><p><ul class="unstyled"><li>&quot;Learn to play the banjo&quot;</li><li>&quot;Find a great restaurant&quot;</li><li>&quot;Take care of their pets&quot;</li><li>&quot;Move their 500 lb sofa&quot;</li></ul></p></div></div></div></div></div>'),e.put("app/settings/settings.html",'<div class="ui grid fullheight"><div class="row"><div class="wide column"><div class="ui basic segment"><h4 class="ui header">Manage Account</h4><div class="ui deleteitem red fluid button"><i class="remove circle icon"></i> Delete Account</div><br><br><hr><a class="ui fluid button" ui-sref-ignore="" href="accounts/logout"><i class="fa fa-sign-out icon"></i> Sign out</a></div><div class="ui basic delete modal"><i class="close icon"></i><div class="header">Please Confirm</div><div class="content"><div class="description"><p>Are you sure you want to delete?</p></div></div><div class="actions"><div class="two fluid ui inverted buttons"><div class="ui red negative basic inverted button"><i class="remove icon"></i> No</div><a class="ui green basic inverted button ok"><i class="checkmark icon"></i> Yes</a></div></div></div></div></div></div><script>\n  \'use strict\';\n  $(\'.basic.delete.modal\')\n  .modal({\n    onDeny    : function(){\n      console.log(\'cancel\');\n    },\n    onApprove : function() {\n      console.log(\'deleting user\');\n      angular.element(document.getElementById(\'settingsPage\')).scope().deleteUser();\n    }\n  })\n  .modal(\'attach events\', \'.deleteitem\', \'show\');\n\n\n</script>'),e.put("components/filter/matchfeedFilter.directive.html",'<div id="FilterController" class="{{filter.class}}" ng-cloak=""><h4 class="ui header" ng-show="filter.class === \'desktopview\'">FILTERS</h4><div class="ui fitted divider" ng-show="filter.class === \'desktopview\'"></div><div id="{{filter.id}}" class="ui form"><form name="filterForm" id="filterForm"><div class="field"><label>Distance <span class="range">{{filter.distanceValue}} mi.</span></label><div no-ui-slider="filter.distanceOptions" ng-model="filter.distanceValue" ng-change="filter.saveFilters()"></div></div><div class="field"><label>Age <span class="range">{{filter.ageValues[0]}} &ndash; {{filter.ageValues[1]}}</span></label><div no-ui-slider="filter.ageOptions" ng-model="filter.ageValues" ng-change="filter.saveFilters()"></div></div><div class="field"><label class="">Show</label></div><div class="field field-checkbox"><uicheckbox value="m" change="filter.toggleGender(value, checked)" checked="{{filter.checkedmale}}" type="toggle" ng-model="filter.male">Men</uicheckbox></div><div class="field field-checkbox"><uicheckbox value="f" change="filter.toggleGender(value, checked)" checked="{{filter.checkedfemale}}" type="toggle" ng-model="filter.female">Women</uicheckbox></div><div class="field" ng-show="filter.showFilterMessage"><label><div class="ui small negative message"><p>{{filter.filtermessage}}</p></div></label></div><div class="ui icon input"><input ng-minlength="3" type="text" placeholder="Enter keyword" ng-enter="filter.addKeyword(filter.newKeyword)" ng-model="filter.newKeyword"> <i class="circular plus icon" ng-click="filter.addKeyword(filter.newKeyword)"></i></div><a ng-click="filter.removeKeyword($index)" href="" class="item" ng-repeat="keyword in filter.myKeywords track by $index"><div class="content"><div class="header"><i class="circle remove icon"></i> {{keyword}}</div></div></a><div class="ui divider"></div><a href="" class="button ui submit green" ng-click="filter.refreshMatchFeed()" role="button">Filter</a></form></div></div>')
}]);