/*! Persice App v1.0.0 by @sasha7 from @Toptal */
webpackJsonp([3],{0:function(t,e,n){function i(){return o.bootstrap(h.SignupComponent,g)["catch"](function(t){return console.error(t)})}var s=n(2),o=n(123),r=n(83),c=n(59),a=n(15),u=n(35),l=n(401),p=n(12),h=n(802),f=[a.ROUTER_PROVIDERS,r.ELEMENT_PROBE_PROVIDERS,c.FORM_PROVIDERS,u.HTTP_PROVIDERS,p.HttpClient,l.APP_SERVICES_PROVIDERS],d=[s.provide(a.LocationStrategy,{useClass:a.HashLocationStrategy}),s.provide(a.ROUTER_PRIMARY_COMPONENT,{useValue:h.SignupComponent})],g=[f,d];s.enableProdMode(),e.main=i,document.addEventListener("DOMContentLoaded",i)},540:function(t,e){t.exports='<div class="signup">\n  <signup-header [counterInterests]="cInt" [counterOffers]="cOff" [counterGoals]="cGoa"></signup-header>\n  <notification [main]="1" [title]="notificationMain.title" [body]="notificationMain.body" [active]="notificationMain.active" [type]="notificationMain.type"></notification>\n  <div class="signup__content">\n    <router-outlet></router-outlet>\n  </div>\n  <footer class="footer-signup">\n    <div class="layout layout--flush">\n      <div class="layout__item 1/2">\n        <div class="page-number">{{page}}/4</div>\n      </div>\n      <div class="layout__item 1/2 text-right">\n        <a *ngIf="showSkip" (click)="skip($event)" class="link--darkgrey mr-">Skip</a>\n        <a (click)="next($event)" class="btn btn-1 btn-1--green btn-1--medium">Next</a>\n      </div>\n    </div>\n  </footer>\n</div>\n'},541:function(t,e){t.exports='<h2 class="signup-step__title mb mt+">Connect your LinkedIn and <br> Twitter accounts</h2>\n<p class="signup-step__subtitle">\n  This will improve your match results within the Persice community.\n  <br>\n  <svg role="img" class="icon">\n    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#icon-lock"></use>\n  </svg> Persice will never share your information or post on your behalf.\n</p>\n<a class="mr" id="twitterLink" (click)="link(\'twitter\')">\n  <svg role="img" class="icon icon--extralarge">\n    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#twitter_big"></use>\n  </svg>\n</a>\n<a id="linkedinLink" (click)="link(\'linkedin\')">\n  <svg role="img" class="icon icon--extralarge">\n    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#linkedin_big"></use>\n  </svg>\n</a>\n'},542:function(t,e){t.exports='<h2 class="signup-step__title">My goal is to...</h2>\n<p class="signup-step__subtitle">You can customize this later.</p>\n<div class="search-signup-wrapper">\n  <div class="search search--signup typeahead-search">\n    <div class="search__top">\n      <svg role="img" class="icon">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#icon-search"></use>\n      </svg>\n      <input [(ngModel)]="newGoal" (keyup.enter)="addGoal($event)" type="text" id="goalsInput" class="search__input typeahead" placeholder="Enter your goal or search existing goals">\n      <button class="btn">\n        <svg role="img" class="icon" (click)="addGoal($event)">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#icon-plus-big"></use>\n        </svg>\n      </button>\n    </div>\n  </div>\n  <div class="search__tags-wrapper text-left">\n    <span class="search-tag-secondary" *ngFor="#item of items">\n      <a (click)="removeGoal(item)">\n        <svg role="img" class="icon ">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#icon-close"></use>\n        </svg>\n      </a>\n      {{item.subject}}\n    </span>\n  </div>\n</div>\n'},543:function(t,e){t.exports='<header class="header-signup">\n  <div class="layout layout--auto">\n    <div class="layout__item">\n      <div class="header-signup__logo-place">\n        <a [routerLink]="[\'./SignupInterests\']" class="site-logo" href="Persice">\n          <img alt="#" src="/static/persiceApp/src/public/images/logo.svg" class="site-logo__mark">\n          <h1 class="site-logo__type">Persice</h1>\n        </a>\n      </div>\n    </div>\n    <div class="layout__item">\n      <ul class="header-signup__steps">\n        <li><a [routerLink]="[\'./SignupInterests\']"><b>{{counterInterests}}</b> interests</a></li>\n        <li><a [routerLink]="[\'./SignupGoals\']"><b>{{counterGoals}}</b> goals</a></li>\n        <li><a [routerLink]="[\'./SignupOffers\']"><b>{{counterOffers}}</b> offers</a></li>\n      </ul>\n    </div>\n  </div>\n</header>\n'},544:function(t,e){t.exports='<h2 class="signup-step__title">What interests you?</h2>\n<p class="signup-step__subtitle">You can customize this later.</p>\n<div class="search-signup-wrapper">\n  <div class="search search--signup">\n    <div class="search__top" id="interestsSearch">\n      <svg role="img" class="icon ">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#icon-search"></use>\n      </svg>\n      <input [ngModel]="newInterest" (keyup.enter)="addInterest($event)" (ngModelChange)="newInterest = $event; onSearchInputChanged();" type="text" class="search__input" id="interestsInput" placeholder="Enter your interests or search existing">\n      <button class="btn" (click)="addInterest($event)">\n        <svg role="img" class="icon ">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#icon-plus-big"></use>\n        </svg>\n      </button>\n    </div>\n  </div>\n  <div class="search__tags-wrapper" id="interests">\n    <span (click)="onInterestClick(item)" [ngClass]="{\'is-current\': item.active}" class="search-tag" *ngFor="#item of items">{{item.description}}</span>\n    <loading [status]="loading"></loading>\n  </div>\n</div>\n'},545:function(t,e){t.exports='<h2 class="signup-step__title">I can help people...</h2>\n<p class="signup-step__subtitle">You can customize this later.</p>\n<div class="search-signup-wrapper">\n  <div class="search search--signup typeahead-search">\n    <div class="search__top">\n      <svg role="img" class="icon">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#icon-search"></use>\n      </svg>\n      <input [(ngModel)]="newOffer" (keyup.enter)="addOffer($event)" type="text" id="offersInput" class="search__input typeahead" placeholder="Enter your offer or search existing offers">\n      <button class="btn">\n        <svg role="img" class="icon" (click)="addOffer($event)">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#icon-plus-big"></use>\n        </svg>\n      </button>\n    </div>\n  </div>\n  <div class="search__tags-wrapper text-left">\n    <span class="search-tag-secondary" *ngFor="#item of items">\n      <a (click)="removeOffer(item)">\n        <svg role="img" class="icon ">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/static/persiceApp/src/public/icons/icons.svg#icon-close"></use>\n        </svg>\n      </a>\n      {{item.subject}}\n    </span>\n  </div>\n</div>\n'},802:function(t,e,n){var i=this&&this.__decorate||function(t,e,n,i){var s,o=arguments.length,r=3>o?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(r=(3>o?s(r):o>3?s(e,n,r):s(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},s=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},o=n(2),r=n(15),c=n(806),a=n(804),u=n(807),l=n(803),p=n(805),h=n(120),f=n(81),d=n(18),g=n(119),v=n(121),m=n(82),y=n(186),b=n(185),w=n(117),S=n(540),_=function(){function t(t,e,n,i,s,o,r,c,a){var u=this;this.notificationService=n,this.goalsService=i,this.offersService=s,this.interestsService=o,this.userService=r,this.userAuthService=c,this.onboardingService=a,this.page=1,this.cGoa=0,this.cOff=0,this.cInt=0,this.showSkip=!1,this.nextStep="SignupGoals",this.is_complete=null,this.timeoutId=null,this.notificationMain={body:"",title:"",active:!1,type:""},this.router=t,this.location=e;var l=null;this.router.subscribe(function(t){l&&(l.unsubscribe(),l=null),u.myElem1&&(l=u.myElem1.counter.subscribe(function(t){return u.onCounterChanged(t)})),u.myElem2&&(l=u.myElem2.counter.subscribe(function(t){return u.onCounterChanged(t)})),u.myElem3&&(l=u.myElem3.counter.subscribe(function(t){return u.onCounterChanged(t)})),u.onRouteChanged(t)})}return t.prototype.ngOnInit=function(){var t=this;this.notificationService.addObserver("signupapp"),this.notificationService.observer("signupapp").subscribe(function(e){return t.showNotification(e)},function(t){console.log("Notification error %s",t)},function(){return console.log("event completed")}),this.userService.get().subscribe(function(e){var n=e.objects[0];t.cGoa=n.goals_count,t.cOff=n.offers_count,t.cInt=n.interest_count,t.is_complete=n.onboardingflow}),this.userAuthService.findOneByUri("me").subscribe(function(e){var n=e;t.is_complete=n.onboardingflow})},t.prototype.ngOnDestroy=function(){this.notificationService.observer("signupapp").unsubscribe(),this.notificationService.removeObserver("signupapp")},t.prototype.showNotification=function(t){this.notificationMain.body=t.body,this.notificationMain.type=t.type,this.notificationMain.title=t.title,this.notificationMain.active=!0,t.autoclose>0&&this.closeNotification(t.autoclose)},t.prototype.closeNotification=function(t){var e=this;this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){e.notificationMain.active=!1},t)},t.prototype.onRouteChanged=function(t){switch(t){case"interests":this.page=1,this.showSkip=!1,this.nextStep="SignupGoals";break;case"goals":this.page=2,this.showSkip=!0,this.nextStep="SignupOffers";break;case"offers":this.page=3,this.showSkip=!0,this.nextStep="SignupConnect";break;case"connect":this.page=4,this.showSkip=!0,this.nextStep=null;break;default:this.page=1,this.showSkip=!1,this.nextStep="SignupGoals"}},t.prototype.next=function(t){if(console.log("clicked next"),this.nextStep){switch(this.nextStep){case"SignupGoals":if(this.cInt<3)return void this.notificationService.push({type:"warning",title:"",body:"To continue, please select at least three interests.",autoclose:4e3})}this.router.navigate([this.nextStep])}else this.completeOnboarding()},t.prototype.skip=function(t){this.nextStep?this.router.navigate([this.nextStep]):this.completeOnboarding()},t.prototype.completeOnboarding=function(){null===this.is_complete?this.onboardingService.complete().subscribe(function(t){window.location.href="/#/crowd"},function(t){console.log(t)},function(){}):window.location.href="/#/crowd"},t.prototype.onCounterChanged=function(t){switch(t.type){case"interests":this.cInt=t.count;break;case"goals":this.cGoa=t.count;break;case"offers":this.cOff=t.count}},i([o.ViewChild(c.SignupInterestsComponent),s("design:type",c.SignupInterestsComponent)],t.prototype,"myElem1",void 0),i([o.ViewChild(a.SignupGoalsComponent),s("design:type",a.SignupGoalsComponent)],t.prototype,"myElem2",void 0),i([o.ViewChild(u.SignupOffersComponent),s("design:type",u.SignupOffersComponent)],t.prototype,"myElem3",void 0),t=i([o.Component({template:S,selector:"persice-signup",directives:[p.SignupHeaderComponent,r.ROUTER_DIRECTIVES,w.NotificationComponent],providers:[h.InterestsService,g.GoalsService,v.OffersService,f.KeywordsService,d.NotificationService,m.UserService,y.UserAuthService,b.OnboardingService]}),r.RouteConfig([{path:"/",redirectTo:["SignupInterests"]},{path:"/interests",component:c.SignupInterestsComponent,name:"SignupInterests",data:{page:1}},{path:"/goals",component:a.SignupGoalsComponent,name:"SignupGoals",data:{page:2}},{path:"/offers",component:u.SignupOffersComponent,name:"SignupOffers",data:{page:3}},{path:"/connect",component:l.SignupConnectComponent,name:"SignupConnect",data:{page:4}}]),s("design:paramtypes",[r.Router,r.Location,d.NotificationService,g.GoalsService,v.OffersService,h.InterestsService,m.UserService,y.UserAuthService,b.OnboardingService])],t)}();e.SignupComponent=_},803:function(t,e,n){var i=this&&this.__decorate||function(t,e,n,i){var s,o=arguments.length,r=3>o?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(r=(3>o?s(r):o>3?s(e,n,r):s(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},s=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},o=n(2),r=n(541),c=function(){function t(){}return t.prototype.link=function(t){var e=400,n=300,i=window.screenLeft,s=window.screenTop,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,c=o/2-e/2+i,a=r/2-n/2+s,u="height="+n+",width="+e+",left="+c+",top="+a+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=yes,directories=no,status=yes",l="/social/associate/"+t+"/?next=/goals/close_login_popup",p=window.open(l,"Connecting...",u);window.focus&&p.focus()},t=i([o.Component({selector:"signup-connect",template:r}),s("design:paramtypes",[])],t)}();e.SignupConnectComponent=c},804:function(t,e,n){var i=this&&this.__decorate||function(t,e,n,i){var s,o=arguments.length,r=3>o?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(r=(3>o?s(r):o>3?s(e,n,r):s(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},s=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},o=n(2),r=n(20),c=n(119),a=n(18),u=n(25),l=n(542),p=function(){function t(t,e){this.goalsService=t,this.notificationService=e,this.counter=new o.EventEmitter,this.timeoutId=null,this.items=[],this.loading=!1,this.isListEmpty=!1,this.limit=12,this.query="",this.next="",this.total_count=0,this.offset=0,this.newGoal=""}return t.prototype.ngOnInit=function(){this.getList(),this.initializeTokenInput()},t.prototype.ngOnDestroy=function(){jQuery("#goalsInput").typeahead("destroy")},t.prototype.initializeTokenInput=function(){var t=this,e=new Bloodhound({remote:{url:"/api/v1/subject/?format=json&description__icontains=%QUERY",filter:function(t){return jQuery.map(t.objects,function(t){return t.description})},wildcard:"%QUERY"},datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace});e.initialize(),jQuery("#goalsInput").typeahead({hint:!1,highlight:!0,minLength:2,limit:20},{source:e}),jQuery("#goalsInput").bind("typeahead:select",function(e,n){console.log("Selection: "+n),t.newGoal=n})},t.prototype.addGoal=function(t){var e=this;return 0===this.newGoal.length?void this.notificationService.push({type:"warning",title:"",body:"Please enter your goal first.",autoclose:4e3}):this.newGoal.length>100?void this.notificationService.push({type:"warning",title:"",body:"New goal must have less than 100 characters.",autoclose:4e3}):void this.goalsService.save(this.newGoal).subscribe(function(t){var n=t;e.items.push(n),e.notificationService.push({type:"success",title:"",body:"Goal '"+e.newGoal+"' has been successfully created.",autoclose:4e3}),e.total_count++,e.counter.next({type:"goals",count:e.total_count}),e.newGoal="",jQuery("#goalsInput").typeahead("val","")},function(t){console.log(t);var n=JSON.parse(t._body);"goal"in n&&e.notificationService.push({type:"error",title:"",body:""+n.goal.error[0],autoclose:4e3})},function(){})},t.prototype.removeGoal=function(t){var e=this,n=r.findIndex(this.items,t);this.items[n]&&this.goalsService["delete"](t.resource_uri).subscribe(function(t){e.items.splice(n,1),e.total_count--,e.counter.next({type:"goals",count:e.total_count})})},t.prototype.getList=function(){var t=this;null!==this.next&&(this.loading=!0,this.goalsService.get(this.next,100).subscribe(function(e){return t.assignList(e)},function(e){console.log(e),t.loading=!1},function(){}))},t.prototype.refreshList=function(){document.body.scrollTop=document.documentElement.scrollTop=0,this.items.splice(0,this.items.length),this.isListEmpty=!1,this.next="",this.getList()},t.prototype.assignList=function(t){if(this.loading=!1,this.total_count=t.meta.total_count,this.counter.next({type:"goals",count:this.total_count}),0===this.total_count)return void(this.isListEmpty=!0);if(this.isListEmpty=!1,this.items.length>0)for(var e=t.objects,n=0;n<=e.length-1;n++)this.items.push(e[n]);else this.items=t.objects;this.next=t.meta.next,this.offset=t.meta.offset,null!==this.next?jQuery("#goals").bind("scroll",this.handleScrollEvent.bind(this)):jQuery("#goals").unbind("scroll")},t.prototype.handleScrollEvent=function(t){var e=jQuery("#goals").scrollTop()+jQuery("#goals").innerHeight(),n=jQuery("#goals")[0].scrollHeight;this.next&&e>=n&&(this.loading||this.getList())},i([o.Output(),s("design:type",o.EventEmitter)],t.prototype,"counter",void 0),t=i([o.Component({selector:"signup-goals",template:l,directives:[u.LoadingComponent]}),s("design:paramtypes",[c.GoalsService,a.NotificationService])],t)}();e.SignupGoalsComponent=p},805:function(t,e,n){var i=this&&this.__decorate||function(t,e,n,i){var s,o=arguments.length,r=3>o?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(r=(3>o?s(r):o>3?s(e,n,r):s(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},s=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},o=n(2),r=n(15),c=n(543),a=function(){function t(){}return i([o.Input(),s("design:type",Object)],t.prototype,"counterInterests",void 0),i([o.Input(),s("design:type",Object)],t.prototype,"counterGoals",void 0),i([o.Input(),s("design:type",Object)],t.prototype,"counterOffers",void 0),t=i([o.Component({selector:"signup-header",template:c,directives:[r.ROUTER_DIRECTIVES]}),s("design:paramtypes",[])],t)}();e.SignupHeaderComponent=a},806:function(t,e,n){var i=this&&this.__decorate||function(t,e,n,i){var s,o=arguments.length,r=3>o?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(r=(3>o?s(r):o>3?s(e,n,r):s(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},s=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},o=n(2),r=n(20),c=n(120),a=n(81),u=n(18),l=n(25),p=n(544),h=function(){function t(t,e,n){this.interestsService=t,this.keywordsService=e,this.notificationService=n,this.counter=new o.EventEmitter,this.timeoutId=null,this.items=[],this.loading=!1,this.isListEmpty=!1,this.limit=12,this.query="",this.next="",this.total_count=0,this.offset=0,this.newInterest="",this.userInterest=[],this.userInterestCounter=0}return t.prototype.ngOnInit=function(){this.getList()},t.prototype.addInterest=function(t){var e=this;if(0===this.newInterest.length)return void this.notificationService.push({type:"warning",title:"",body:"Please enter your interest first.",autoclose:4e3});if(this.newInterest.length>100)return void this.notificationService.push({type:"warning",title:"",body:"New interest must have less than 100 characters.",autoclose:4e3});var n=r.findIndex(this.items,"description",this.newInterest);this.items[n]?this.items[n].active?this.notificationService.push({type:"warning",title:"",body:"Interest '"+this.newInterest+"' is already selected below.",autoclose:4e3}):this.interestsService.save(this.items[n].description).subscribe(function(t){e.items[n].active=!0,e.items[n].interest_resource=t.resource_uri,e.userInterestCounter++,e.counter.next({type:"interests",count:e.userInterestCounter})}):this.interestsService.save(this.newInterest).subscribe(function(t){var n=t;n.active=!0,n.description=t.interest_subject,n.interest_resource=t.resource_uri,e.items.push(n),e.notificationService.push({type:"success",title:"",body:"Interest '"+e.newInterest+"' has been successfully created.",autoclose:4e3}),e.userInterestCounter++,e.counter.next({type:"interests",count:e.userInterestCounter}),e.newInterest="",e.refreshList()})},t.prototype.onSearchInputChanged=function(){var t=this;this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){t.refreshList()},300)},t.prototype.getList=function(){var t=this;null!==this.next&&(this.loading=!0,this.interestsService.get("",2e3).mergeMap(function(e){return t.userInterestCounter=e.meta.total_count,t.counter.next({type:"interests",count:t.userInterestCounter}),t.userInterestCounter>0&&(t.userInterest=e.objects),t.keywordsService.get(t.next,100,t.newInterest)}).subscribe(function(e){return t.assignList(e)},function(e){console.log(e),t.loading=!1},function(){}))},t.prototype.refreshList=function(){document.body.scrollTop=document.documentElement.scrollTop=0,this.items.splice(0,this.items.length),this.isListEmpty=!1,this.next="",this.userInterest.splice(0,this.userInterest.length),this.userInterestCounter=0,this.getList()},t.prototype.assignList=function(t){if(this.loading=!1,this.total_count=t.meta.total_count,0===this.total_count)return void(this.isListEmpty=!0);this.isListEmpty=!1;for(var e=t.objects,n=0;n<=e.length-1;n++){e[n].active=!1,e[n].interest_resource=null;for(var i=this.userInterest.length-1;i>=0;i--)e[n].resource_uri===this.userInterest[i].interest&&(e[n].interest_resource=this.userInterest[i].resource_uri,e[n].active=!0);this.items.push(e[n])}this.next=t.meta.next,this.offset=t.meta.offset,null!==this.next?jQuery("#interests").bind("scroll",this.handleScrollEvent.bind(this)):jQuery("#interests").unbind("scroll")},t.prototype.handleScrollEvent=function(t){var e=jQuery("#interests").scrollTop()+jQuery("#interests").innerHeight(),n=jQuery("#interests")[0].scrollHeight;this.next&&e>=n&&(this.loading||this.getList())},t.prototype.onInterestClick=function(t){var e=this,n=r.findIndex(this.items,t);if(this.items[n])if(this.items[n].active){var i=this.items[n].interest_resource;this.interestsService["delete"](i).subscribe(function(t){e.items[n].active=!1,e.items[n].interest_resource=null,e.userInterestCounter--,e.counter.next({type:"interests",count:e.userInterestCounter})})}else this.interestsService.save(this.items[n].description).subscribe(function(t){e.items[n].active=!0,e.items[n].interest_resource=t.resource_uri,e.userInterestCounter++,e.counter.next({type:"interests",count:e.userInterestCounter})})},i([o.Output(),s("design:type",o.EventEmitter)],t.prototype,"counter",void 0),t=i([o.Component({selector:"signup-interests",template:p,directives:[l.LoadingComponent]}),s("design:paramtypes",[c.InterestsService,a.KeywordsService,u.NotificationService])],t)}();e.SignupInterestsComponent=h},807:function(t,e,n){var i=this&&this.__decorate||function(t,e,n,i){var s,o=arguments.length,r=3>o?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(r=(3>o?s(r):o>3?s(e,n,r):s(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},s=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},o=n(2),r=n(20),c=n(121),a=n(18),u=n(25),l=n(545),p=function(){function t(t,e){this.offersService=t,this.notificationService=e,this.counter=new o.EventEmitter,this.timeoutId=null,this.items=[],this.loading=!1,this.isListEmpty=!1,this.limit=12,this.query="",this.next="",this.total_count=0,this.offset=0,this.newOffer=""}return t.prototype.ngOnInit=function(){this.getList(),this.initializeTokenInput()},t.prototype.ngOnDestroy=function(){jQuery("#offersInput").typeahead("destroy")},t.prototype.initializeTokenInput=function(){var t=this,e=new Bloodhound({remote:{url:"/api/v1/subject/?format=json&description__icontains=%QUERY",filter:function(t){return jQuery.map(t.objects,function(t){return t.description})},wildcard:"%QUERY"},datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace});e.initialize(),jQuery("#offersInput").typeahead({hint:!1,highlight:!0,minLength:2,limit:20},{source:e}),jQuery("#offersInput").bind("typeahead:select",function(e,n){console.log("Selection: "+n),t.newOffer=n})},t.prototype.addOffer=function(t){var e=this;return 0===this.newOffer.length?void this.notificationService.push({type:"warning",title:"",body:"Please enter your offer first.",autoclose:4e3}):this.newOffer.length>100?void this.notificationService.push({type:"warning",title:"",body:"New offer must have less than 100 characters.",autoclose:4e3}):void this.offersService.save(this.newOffer).subscribe(function(t){var n=t;e.items.push(n),e.notificationService.push({type:"success",title:"",body:"Offer '"+e.newOffer+"' has been successfully created.",autoclose:4e3}),e.total_count++,e.counter.next({type:"offers",count:e.total_count}),e.newOffer="",jQuery("#offersInput").typeahead("val","")},function(t){console.log(t);var n=JSON.parse(t._body);"offer"in n&&e.notificationService.push({type:"error",title:"",body:""+n.offer.error[0],autoclose:4e3})},function(){})},t.prototype.removeOffer=function(t){var e=this,n=r.findIndex(this.items,t);this.items[n]&&this.offersService["delete"](t.resource_uri).subscribe(function(t){e.items.splice(n,1),e.total_count--,e.counter.next({type:"offers",count:e.total_count})})},t.prototype.getList=function(){var t=this;null!==this.next&&(this.loading=!0,this.offersService.get(this.next,100).subscribe(function(e){return t.assignList(e)},function(e){console.log(e),t.loading=!1},function(){}))},t.prototype.refreshList=function(){document.body.scrollTop=document.documentElement.scrollTop=0,this.items.splice(0,this.items.length),this.isListEmpty=!1,this.next="",this.getList()},t.prototype.assignList=function(t){if(this.loading=!1,this.total_count=t.meta.total_count,this.counter.next({type:"offers",count:this.total_count}),0===this.total_count)return void(this.isListEmpty=!0);if(this.isListEmpty=!1,this.items.length>0)for(var e=t.objects,n=0;n<=e.length-1;n++)this.items.push(e[n]);else this.items=t.objects;this.next=t.meta.next,this.offset=t.meta.offset,null!==this.next?jQuery("#offers").bind("scroll",this.handleScrollEvent.bind(this)):jQuery("#offers").unbind("scroll")},t.prototype.handleScrollEvent=function(t){var e=jQuery("#offers").scrollTop()+jQuery("#offers").innerHeight(),n=jQuery("#offers")[0].scrollHeight;this.next&&e>=n&&(this.loading||this.getList())},i([o.Output(),s("design:type",o.EventEmitter)],t.prototype,"counter",void 0),t=i([o.Component({selector:"signup-offers",template:l,directives:[u.LoadingComponent]}),s("design:paramtypes",[c.OffersService,a.NotificationService])],t)}();e.SignupOffersComponent=p}});
//# sourceMappingURL=signup.f822aaa49a23c6d24027.min.js.map