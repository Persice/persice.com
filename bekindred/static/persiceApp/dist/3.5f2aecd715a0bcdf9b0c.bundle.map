{"version":3,"sources":["webpack:///3.5f2aecd715a0bcdf9b0c.chunk.js","webpack:///./src/app/components/message_list/message_list.component.ts","webpack:///./src/app/components/message_single/message_single.component.ts","webpack:///./src/app/components/messages/messages.component.ts","webpack:///./src/app/components/messages/messages.html","webpack:///./src/app/components/messages/messages_chat.component.ts","webpack:///./src/app/components/messages/messages_input.component.ts","webpack:///./src/app/components/messages/messages_new.component.ts","webpack:///./src/app/components/messages/messages_new.html","webpack:///./src/app/components/messages/messages_sidebar.component.ts","webpack:///./src/app/components/messages/messages_sidebar_header.component.ts","webpack:///./src/app/components/messages_header/messages_header.component.ts","webpack:///./src/app/components/messages_header/messages_header.html","webpack:///./src/app/components/messages_header_new/messages_header_new.component.ts","webpack:///./src/app/components/messages_header_new/messages_header_new.html","webpack:///./src/app/components/messages_search_connections/messages_search_connections.component.ts","webpack:///./src/app/components/messages_search_connections/messages_search_connections.html","webpack:///./src/app/components/thread_list/thread_list.component.ts","webpack:///./src/app/components/thread_single/thread_single.component.ts"],"names":["webpackJsonp",864,"module","exports","__webpack_require__","__decorate","__metadata","core_1","message_single_component_1","MessageListComponent","Input","Object","prototype","Component","selector","template","directives","MessageSingleComponent","call",865,"router_1","_router","this","openProfile","username","parent","navigate","changeDetection","ChangeDetectionStrategy","OnPush","Router",433,"inbox_service_1","messages_sidebar_component_1","messages_chat_component_1","messages_new_component_1","messages_sidebar_header_component_1","view","MessagesComponent","inboxService","counter","ngOnInit","document","body","scrollTop","documentElement","navigateToConversation","id","threadId","MessagesSidebarComponent","MessagesSidebarHeaderComponent","ROUTER_DIRECTIVES","providers","InboxService","RouteConfig","path","component","MessagesChatComponent","name","MessagesNewComponent","useAsDefault",839,866,"userauth_service_1","messages_service_1","messages_counter_service_1","websocket_service_1","message_list_component_1","messages_input_component_1","loading_component_1","messages_header_component_1","_params","messagesService","userService","messagesCounterService","websocketService","messages","loadingMessages","loadingMessagesFinished","isMessagesEmpty","messagesNext","hasNew","scrollOffset","get","_this","url","channel","findByUri","subscribe","data","first_name","unsubscribe","err","console","log","select","setTimeout","refreshCounter","messagesServiceInstance","serviceObserver","res","loading","finished","isEmpty","next","prevCount","length","total","initialLoadingFinished","friendId","elem_1","jQuery","scrollHeight","elem_2","elem_3","bind","handleScrollEvent","unbind","startLoadingMessages","websocketServiceInstance","on","sender","recievedMessage","event","elem","loadMore","sendMessage","message","send","ngOnDestroy","MessagesHeaderComponent","MessagesInputComponent","LoadingComponent","MessagesService","UserAuthService","RouteParams","MessagesCounterService","WebsocketService",828,"newMessage","EventEmitter","disabled","Output",867,"messages_header_new_component_1","tokens","initialTokens","uri","channel_1","findOneByUri","image","friend_id","channel_2","sendNew","addSender","error","routerOnActivate","nextInstruction","prevInstruction","deselectThreads","MessagesHeaderNewComponent",840,868,"thread_list_component_1","element","selected","threads","loadingInbox","loadingInboxFinished","isInboxEmpty","inboxNext","activeThread","inboxServiceInstance","nativeElement","startLoadingInbox","markRead","onSelect","thread","threshold","height","ThreadListComponent","ElementRef",869,"inboxServiceObserver","serviceCounterObserver",870,"dropdown_directive_1","DropdownDirective",841,871,"lodash_1","messages_search_connections_component_1","TOKEN_LIMIT","searchInputVisible","activeToken","ngOnChanges","values","currentValue","addToken","token","i","findIndex","concat","emit","removeToken","index","splice","MessagesSearchConnections",842,872,"common_1","http_1","http","searchTerm","Control","resultsVisible","selectedIndex","resultsCount","resultsCache","results","_search","valueChanges","keyEvent","keyCode","container","scrollTo","offset","top","preventDefault","result","updateValue","terms","debounceDuration","debounceTime","distinctUntilChanged","switchMap","term","_rawSearch","map","request","json","objects","meta","total_count","Http",843,875,"thread_single_component_1","ThreadSingleComponent",876,"isActive"],"mappings":"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","file":"3.5f2aecd715a0bcdf9b0c.chunk.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 864:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar message_single_component_1 = __webpack_require__(865);\n\tvar MessageListComponent = (function () {\n\t    function MessageListComponent() {\n\t    }\n\t    __decorate([\n\t        core_1.Input(), \n\t        __metadata('design:type', Object)\n\t    ], MessageListComponent.prototype, \"messages\", void 0);\n\t    MessageListComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'message-list',\n\t            template: \"\\n  <template ngFor #item [ngForOf]=\\\"messages\\\">\\n    <div class=\\\"chat__time\\\">\\n      <hr class=\\\"hr\\\">\\n      <span class=\\\"chat__time__value\\\">{{item.displayDate}}</span>\\n    </div>\\n    <message *ngFor=\\\"#m of item.data\\\" [message]=\\\"m\\\"></message>\\n  </template>\\n  \",\n\t            directives: [\n\t                message_single_component_1.MessageSingleComponent\n\t            ]\n\t        }), \n\t        __metadata('design:paramtypes', [])\n\t    ], MessageListComponent);\n\t    return MessageListComponent;\n\t}());\n\texports.MessageListComponent = MessageListComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 865:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar router_1 = __webpack_require__(20);\n\tvar MessageSingleComponent = (function () {\n\t    function MessageSingleComponent(_router) {\n\t        this._router = _router;\n\t    }\n\t    MessageSingleComponent.prototype.openProfile = function (username) {\n\t        this._router.parent.parent.navigate(['./ProfileView', { username: username }]);\n\t    };\n\t    __decorate([\n\t        core_1.Input(), \n\t        __metadata('design:type', Object)\n\t    ], MessageSingleComponent.prototype, \"message\", void 0);\n\t    MessageSingleComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'message',\n\t            template: \"\\n  <div class=\\\"message is-open\\\">\\n    <div class=\\\"flag flag--top flag--small\\\">\\n      <div class=\\\"flag__img\\\" (click)=\\\"openProfile(message.username)\\\">\\n        <div class=\\\"avatar avatar--medium\\\">\\n          <div class=\\\"avatar-holder\\\"\\n          [ngStyle]=\\\"{'background-image': 'url(' + message.image + ')'}\\\">\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\\\"flag__body\\\">\\n        <div class=\\\"message__name\\\">\\n          <span (click)=\\\"openProfile(message.username)\\\">{{message?.name}}</span>\\n          <span (click)=\\\"openProfile(message.username)\\\" class=\\\"message__timestamp\\\">{{message?.time}}</span>\\n        </div>\\n        <div class=\\\"message__text\\\">{{message?.body}}</div>\\n      </div>\\n    </div>\\n  </div>\\n  \",\n\t            changeDetection: core_1.ChangeDetectionStrategy.OnPush\n\t        }), \n\t        __metadata('design:paramtypes', [router_1.Router])\n\t    ], MessageSingleComponent);\n\t    return MessageSingleComponent;\n\t}());\n\texports.MessageSingleComponent = MessageSingleComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 433:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar router_1 = __webpack_require__(20);\n\tvar inbox_service_1 = __webpack_require__(199);\n\tvar messages_sidebar_component_1 = __webpack_require__(868);\n\tvar messages_chat_component_1 = __webpack_require__(866);\n\tvar messages_new_component_1 = __webpack_require__(867);\n\tvar messages_sidebar_header_component_1 = __webpack_require__(869);\n\tvar view = __webpack_require__(839);\n\tvar MessagesComponent = (function () {\n\t    function MessagesComponent(inboxService, _router) {\n\t        this.inboxService = inboxService;\n\t        this._router = _router;\n\t        this.counter = 0;\n\t    }\n\t    MessagesComponent.prototype.ngOnInit = function () {\n\t        document.body.scrollTop = document.documentElement.scrollTop = 0;\n\t    };\n\t    MessagesComponent.prototype.navigateToConversation = function (id) {\n\t        this._router.navigate(['SingleConversation', { threadId: id }]);\n\t    };\n\t    MessagesComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'message',\n\t            template: view,\n\t            directives: [\n\t                messages_sidebar_component_1.MessagesSidebarComponent,\n\t                messages_sidebar_header_component_1.MessagesSidebarHeaderComponent,\n\t                router_1.ROUTER_DIRECTIVES\n\t            ],\n\t            providers: [\n\t                inbox_service_1.InboxService\n\t            ]\n\t        }),\n\t        router_1.RouteConfig([\n\t            {\n\t                path: '/:threadId',\n\t                component: messages_chat_component_1.MessagesChatComponent,\n\t                name: 'SingleConversation'\n\t            },\n\t            {\n\t                path: '/new/',\n\t                component: messages_new_component_1.MessagesNewComponent,\n\t                name: 'ConversationNew',\n\t                useAsDefault: true\n\t            },\n\t            {\n\t                path: '/new/:friendId',\n\t                component: messages_new_component_1.MessagesNewComponent,\n\t                name: 'ConversationNewSelected',\n\t            }\n\t        ]), \n\t        __metadata('design:paramtypes', [inbox_service_1.InboxService, router_1.Router])\n\t    ], MessagesComponent);\n\t    return MessagesComponent;\n\t}());\n\texports.MessagesComponent = MessagesComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 839:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"layout layout--flush position-relative\\\">\\n  <div class=\\\"layout__item extralarge-and-up-3/10 4/10\\\">\\n    <messages-sidebar-header [counter]=\\\"counter\\\"></messages-sidebar-header>\\n    <aside class=\\\"chat-sidebar is-scrollable-y\\\" id=\\\"inbox\\\" (selected)=\\\"navigateToConversation($event)\\\">\\n    </aside>\\n  </div>\\n  <div class=\\\"layout__item extralarge-and-up-7/10 6/10\\\">\\n    <router-outlet></router-outlet>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n\n/***/ 866:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar router_1 = __webpack_require__(20);\n\tvar inbox_service_1 = __webpack_require__(199);\n\tvar userauth_service_1 = __webpack_require__(47);\n\tvar messages_service_1 = __webpack_require__(207);\n\tvar messages_counter_service_1 = __webpack_require__(89);\n\tvar websocket_service_1 = __webpack_require__(127);\n\tvar message_list_component_1 = __webpack_require__(864);\n\tvar messages_input_component_1 = __webpack_require__(828);\n\tvar loading_component_1 = __webpack_require__(26);\n\tvar messages_header_component_1 = __webpack_require__(870);\n\tvar MessagesChatComponent = (function () {\n\t    function MessagesChatComponent(_params, inboxService, messagesService, userService, messagesCounterService, websocketService, _router) {\n\t        this._params = _params;\n\t        this.inboxService = inboxService;\n\t        this.messagesService = messagesService;\n\t        this.userService = userService;\n\t        this.messagesCounterService = messagesCounterService;\n\t        this.websocketService = websocketService;\n\t        this._router = _router;\n\t        this.name = '';\n\t        this.messages = [];\n\t        this.loadingMessages = false;\n\t        this.loadingMessagesFinished = false;\n\t        this.isMessagesEmpty = false;\n\t        this.messagesNext = '';\n\t        this.hasNew = false;\n\t        this.scrollOffset = null;\n\t        this.threadId = this._params.get('threadId');\n\t    }\n\t    MessagesChatComponent.prototype.ngOnInit = function () {\n\t        var _this = this;\n\t        var url = \"/api/v1/auth/user/\" + this.threadId + \"/\";\n\t        var channel = this.userService.findByUri(url)\n\t            .subscribe(function (data) {\n\t            _this.name = data.first_name;\n\t            channel.unsubscribe();\n\t        }, function (err) { return console.log('User could not be loaded'); });\n\t        this.inboxService.select(this.threadId);\n\t        setTimeout(function () {\n\t            _this.messagesCounterService.refreshCounter();\n\t        }, 500);\n\t        this.messagesServiceInstance = this.messagesService.serviceObserver()\n\t            .subscribe(function (res) {\n\t            _this.loadingMessages = res.loading;\n\t            _this.loadingMessagesFinished = res.finished;\n\t            _this.isMessagesEmpty = res.isEmpty;\n\t            _this.messagesNext = res.next;\n\t            _this.hasNew = res.hasNew;\n\t            var prevCount = _this.messages.length;\n\t            if (res.total === 0 && res.initialLoadingFinished) {\n\t                _this._router.parent.navigate(['/Messages', 'ConversationNewSelected', { friendId: _this.threadId }]);\n\t            }\n\t            if (prevCount === 0 && !_this.loadingMessages) {\n\t                var elem_1 = jQuery('#messages')[0];\n\t                setTimeout(function () {\n\t                    elem_1.scrollTop = elem_1.scrollHeight;\n\t                });\n\t            }\n\t            if (_this.hasNew && !_this.loadingMessages) {\n\t                var elem_2 = jQuery('#messages')[0];\n\t                setTimeout(function () {\n\t                    elem_2.scrollTop = elem_2.scrollHeight;\n\t                });\n\t                _this.hasNew = false;\n\t            }\n\t            _this.messages = res.data;\n\t            if (prevCount > 0 && !_this.loadingMessages && _this.scrollOffset !== null) {\n\t                var elem_3 = jQuery('#messages')[0];\n\t                setTimeout(function () {\n\t                    elem_3.scrollTop = elem_3.scrollHeight - _this.scrollOffset;\n\t                    _this.scrollOffset = null;\n\t                });\n\t            }\n\t            if (_this.loadingMessagesFinished === false) {\n\t                jQuery('#messages').bind('scroll', _this.handleScrollEvent.bind(_this));\n\t            }\n\t            else {\n\t                jQuery('#messages').unbind('scroll');\n\t            }\n\t        });\n\t        this.messagesService.startLoadingMessages(this.threadId);\n\t        this.websocketServiceInstance = this.websocketService.on('messages:new').subscribe(function (data) {\n\t            if (data.sender === \"/api/v1/auth/user/\" + _this.threadId + \"/\") {\n\t                _this.messagesService.recievedMessage(data);\n\t            }\n\t        });\n\t    };\n\t    MessagesChatComponent.prototype.handleScrollEvent = function (event) {\n\t        var elem = jQuery('#messages')[0];\n\t        if (this.messagesNext && elem.scrollTop <= 50) {\n\t            if (!this.loadingMessages && !this.hasNew) {\n\t                this.scrollOffset = elem.scrollHeight;\n\t                this.messagesService.loadMore(this.threadId);\n\t            }\n\t        }\n\t    };\n\t    MessagesChatComponent.prototype.sendMessage = function (message) {\n\t        this.messagesService.send(this.threadId, message);\n\t    };\n\t    MessagesChatComponent.prototype.ngOnDestroy = function () {\n\t        if (this.messagesServiceInstance) {\n\t            this.messagesServiceInstance.unsubscribe();\n\t        }\n\t        if (this.websocketServiceInstance) {\n\t            this.websocketServiceInstance.unsubscribe();\n\t        }\n\t    };\n\t    MessagesChatComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'messages-chat',\n\t            directives: [\n\t                messages_header_component_1.MessagesHeaderComponent,\n\t                message_list_component_1.MessageListComponent,\n\t                messages_input_component_1.MessagesInputComponent,\n\t                loading_component_1.LoadingComponent\n\t            ],\n\t            providers: [\n\t                messages_service_1.MessagesService,\n\t                userauth_service_1.UserAuthService\n\t            ],\n\t            template: \"\\n  <messages-header [name]=\\\"name\\\"></messages-header>\\n  <div class=\\\"chat\\\">\\n    <div class=\\\"chat-wrapper\\\" id=\\\"messages\\\">\\n      <div class=\\\"chat__messages-wrapper\\\">\\n        <div class=\\\"chat__messages\\\">\\n          <loading [status]=\\\"loadingMessages\\\"></loading>\\n          <message-list [messages]=\\\"messages\\\"></message-list>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\\\"chat__send-message\\\" [disabled]=\\\"0\\\" (newMessage)=\\\"sendMessage($event)\\\"></div>\\n  </div>\\n  \"\n\t        }), \n\t        __metadata('design:paramtypes', [router_1.RouteParams, inbox_service_1.InboxService, messages_service_1.MessagesService, userauth_service_1.UserAuthService, messages_counter_service_1.MessagesCounterService, websocket_service_1.WebsocketService, router_1.Router])\n\t    ], MessagesChatComponent);\n\t    return MessagesChatComponent;\n\t}());\n\texports.MessagesChatComponent = MessagesChatComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 828:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar MessagesInputComponent = (function () {\n\t    function MessagesInputComponent() {\n\t        this.newMessage = new core_1.EventEmitter();\n\t        this.message = '';\n\t    }\n\t    MessagesInputComponent.prototype.sendMessage = function (event) {\n\t        if (this.message.length > 0 && !this.disabled) {\n\t            this.newMessage.next(this.message);\n\t            this.message = '';\n\t        }\n\t    };\n\t    __decorate([\n\t        core_1.Output(), \n\t        __metadata('design:type', core_1.EventEmitter)\n\t    ], MessagesInputComponent.prototype, \"newMessage\", void 0);\n\t    __decorate([\n\t        core_1.Input(), \n\t        __metadata('design:type', Object)\n\t    ], MessagesInputComponent.prototype, \"disabled\", void 0);\n\t    MessagesInputComponent = __decorate([\n\t        core_1.Component({\n\t            selector: '.chat__send-message',\n\t            template: \"\\n  <div class=\\\"tableize\\\">\\n    <div class=\\\"tableize__cell tableize__cell--fill\\\">\\n      <div class=\\\"tableize__content\\\">\\n        <textarea [(ngModel)]=\\\"message\\\" class=\\\"c-input c-input--large\\\" placeholder=\\\"Write a message\\\"></textarea>\\n      </div>\\n    </div>\\n    <div class=\\\"tableize__cell\\\">\\n      <div class=\\\"tableize__content chat__send-message__has-btn\\\">\\n        <a (click)=\\\"sendMessage($event)\\\" class=\\\"btn btn-1 btn-1--full btn-1--filled btn-1--blue \\\">Send</a>\\n      </div>\\n    </div>\\n  </div>\\n  \"\n\t        }), \n\t        __metadata('design:paramtypes', [])\n\t    ], MessagesInputComponent);\n\t    return MessagesInputComponent;\n\t}());\n\texports.MessagesInputComponent = MessagesInputComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 867:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar router_1 = __webpack_require__(20);\n\tvar messages_input_component_1 = __webpack_require__(828);\n\tvar messages_header_new_component_1 = __webpack_require__(871);\n\tvar inbox_service_1 = __webpack_require__(199);\n\tvar messages_service_1 = __webpack_require__(207);\n\tvar userauth_service_1 = __webpack_require__(47);\n\tvar MessagesNewComponent = (function () {\n\t    function MessagesNewComponent(inboxService, messagesService, userService, _router, _params) {\n\t        var _this = this;\n\t        this.inboxService = inboxService;\n\t        this.messagesService = messagesService;\n\t        this.userService = userService;\n\t        this._router = _router;\n\t        this._params = _params;\n\t        this.tokens = [];\n\t        this.initialTokens = [];\n\t        this.message = '';\n\t        this.friendId = this._params.get('friendId');\n\t        if (this.friendId !== null) {\n\t            var uri = \"/api/v1/auth/user/\" + this.friendId + \"/\";\n\t            var channel_1 = this.userService.findOneByUri(uri)\n\t                .subscribe(function (data) {\n\t                _this.initialTokens = [{\n\t                        first_name: data.first_name,\n\t                        image: data.image,\n\t                        friend_id: _this.friendId\n\t                    }];\n\t                channel_1.unsubscribe();\n\t            }, function (err) { return console.log('user could not be found'); });\n\t        }\n\t    }\n\t    MessagesNewComponent.prototype.sendMessage = function (message) {\n\t        var _this = this;\n\t        if (this.tokens.length === 1) {\n\t            var channel_2 = this.messagesService.sendNew(this.tokens[0].friend_id, message)\n\t                .subscribe(function (data) {\n\t                channel_2.unsubscribe();\n\t                _this.inboxService.addSender(_this.tokens[0].friend_id);\n\t                _this._router.parent.navigate(['/Messages', 'SingleConversation', { threadId: _this.tokens[0].friend_id }]);\n\t            }, function (error) { return console.log('Could not create new message.'); });\n\t        }\n\t    };\n\t    MessagesNewComponent.prototype.routerOnActivate = function (nextInstruction, prevInstruction) {\n\t        this.inboxService.deselectThreads();\n\t    };\n\t    MessagesNewComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'messages-new',\n\t            template: __webpack_require__(840),\n\t            directives: [\n\t                messages_header_new_component_1.MessagesHeaderNewComponent,\n\t                messages_input_component_1.MessagesInputComponent\n\t            ],\n\t            providers: [\n\t                messages_service_1.MessagesService\n\t            ]\n\t        }), \n\t        __metadata('design:paramtypes', [inbox_service_1.InboxService, messages_service_1.MessagesService, userauth_service_1.UserAuthService, router_1.Router, router_1.RouteParams])\n\t    ], MessagesNewComponent);\n\t    return MessagesNewComponent;\n\t}());\n\texports.MessagesNewComponent = MessagesNewComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 840:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<messages-header-new [initialTokens]=\\\"initialTokens\\\" (selected)=\\\"tokens = $event\\\"></messages-header-new>\\n<div class=\\\"chat\\\">\\n  <div class=\\\"chat-wrapper\\\">\\n    <div class=\\\"chat__messages-wrapper\\\">\\n      <div class=\\\"chat__messages\\\">\\n        <div class=\\\"chat__messages__blank-slate\\\">\\n          <svg role=\\\"img\\\" class=\\\"icon chat-empty-state__icon\\\">\\n            <use xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xlink:href=\\\"/static/persiceApp/src/assets/icons/icons.svg#start_conversation\\\"></use>\\n          </svg>\\n          <h3 class=\\\"chat-empty-state__title\\\">Start conversation</h3>\\n          <p class=\\\"chat-empty-state__par\\\">Type your message below to start Conversation</p>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"chat__send-message\\\" [disabled]=\\\"tokens.length === 0\\\" (newMessage)=\\\"sendMessage($event)\\\"></div>\\n</div>\\n\"\n\n/***/ },\n\n/***/ 868:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar inbox_service_1 = __webpack_require__(199);\n\tvar messages_counter_service_1 = __webpack_require__(89);\n\tvar websocket_service_1 = __webpack_require__(127);\n\tvar thread_list_component_1 = __webpack_require__(875);\n\tvar loading_component_1 = __webpack_require__(26);\n\tvar MessagesSidebarComponent = (function () {\n\t    function MessagesSidebarComponent(inboxService, messagesCounterService, websocketService, element) {\n\t        this.inboxService = inboxService;\n\t        this.messagesCounterService = messagesCounterService;\n\t        this.websocketService = websocketService;\n\t        this.element = element;\n\t        this.selected = new core_1.EventEmitter();\n\t        this.threads = [];\n\t        this.loadingInbox = false;\n\t        this.loadingInboxFinished = false;\n\t        this.isInboxEmpty = false;\n\t        this.inboxNext = '';\n\t        this.activeThread = null;\n\t    }\n\t    MessagesSidebarComponent.prototype.ngOnInit = function () {\n\t        var _this = this;\n\t        this.messagesCounterService.refreshCounter();\n\t        this.inboxServiceInstance = this.inboxService.serviceObserver()\n\t            .subscribe(function (res) {\n\t            _this.loadingInbox = res.loading;\n\t            _this.threads = res.data;\n\t            _this.loadingInboxFinished = res.finished;\n\t            _this.isInboxEmpty = res.isEmpty;\n\t            _this.inboxNext = res.next;\n\t            _this.activeThread = res.selected;\n\t            if (_this.loadingInboxFinished === false) {\n\t                jQuery(_this.element.nativeElement).bind('scroll', _this.handleScrollEvent.bind(_this));\n\t            }\n\t            else {\n\t                jQuery(_this.element.nativeElement).unbind('scroll');\n\t            }\n\t        });\n\t        this.inboxService.startLoadingInbox();\n\t        this.websocketServiceInstance = this.websocketService.on('messages:new').subscribe(function (data) {\n\t            if (_this.activeThread !== null) {\n\t                _this.inboxService.markRead(_this.activeThread);\n\t            }\n\t            setTimeout(function () {\n\t                _this.inboxService.addSender(data.friend_id);\n\t                _this.messagesCounterService.refreshCounter();\n\t            }, 500);\n\t        });\n\t    };\n\t    MessagesSidebarComponent.prototype.onSelect = function (thread) {\n\t        this.inboxService.select(thread.threadId);\n\t        this.selected.next(thread.threadId);\n\t    };\n\t    MessagesSidebarComponent.prototype.handleScrollEvent = function (event) {\n\t        var scrollOffset = jQuery(this.element.nativeElement).scrollTop();\n\t        var threshold = jQuery(document).height() - jQuery('#inbox').height() - 60;\n\t        if (this.inboxNext && scrollOffset > threshold) {\n\t            if (!this.loadingInbox) {\n\t                this.inboxService.loadMore();\n\t            }\n\t        }\n\t    };\n\t    MessagesSidebarComponent.prototype.ngOnDestroy = function () {\n\t        if (this.inboxServiceInstance) {\n\t            this.inboxServiceInstance.unsubscribe();\n\t        }\n\t        if (this.websocketServiceInstance) {\n\t            this.websocketServiceInstance.unsubscribe();\n\t        }\n\t    };\n\t    __decorate([\n\t        core_1.Output(), \n\t        __metadata('design:type', core_1.EventEmitter)\n\t    ], MessagesSidebarComponent.prototype, \"selected\", void 0);\n\t    MessagesSidebarComponent = __decorate([\n\t        core_1.Component({\n\t            selector: '.chat-sidebar',\n\t            directives: [\n\t                thread_list_component_1.ThreadListComponent,\n\t                loading_component_1.LoadingComponent\n\t            ],\n\t            template: \"\\n  <thread-list (selected)=\\\"onSelect($event)\\\" [active]=\\\"activeThread\\\" [threads]=\\\"threads\\\"></thread-list>\\n  <loading [status]=\\\"loadingInbox\\\"></loading>\\n  \"\n\t        }), \n\t        __metadata('design:paramtypes', [inbox_service_1.InboxService, messages_counter_service_1.MessagesCounterService, websocket_service_1.WebsocketService, core_1.ElementRef])\n\t    ], MessagesSidebarComponent);\n\t    return MessagesSidebarComponent;\n\t}());\n\texports.MessagesSidebarComponent = MessagesSidebarComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 869:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar router_1 = __webpack_require__(20);\n\tvar inbox_service_1 = __webpack_require__(199);\n\tvar MessagesSidebarHeaderComponent = (function () {\n\t    function MessagesSidebarHeaderComponent(inboxService) {\n\t        var _this = this;\n\t        this.inboxService = inboxService;\n\t        this.inboxServiceObserver = this.inboxService.serviceCounterObserver()\n\t            .subscribe(function (data) {\n\t            _this.counter = data;\n\t        });\n\t    }\n\t    MessagesSidebarHeaderComponent.prototype.ngOnDestroy = function () {\n\t        this.inboxServiceObserver.unsubscribe();\n\t    };\n\t    __decorate([\n\t        core_1.Input(), \n\t        __metadata('design:type', Object)\n\t    ], MessagesSidebarHeaderComponent.prototype, \"counter\", void 0);\n\t    MessagesSidebarHeaderComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'messages-sidebar-header',\n\t            directives: [\n\t                router_1.ROUTER_DIRECTIVES\n\t            ],\n\t            template: \"\\n  <header class=\\\"chat-sidebar-header\\\">\\n    <div class=\\\"layout layout--middle\\\">\\n      <div class=\\\"layout__item 3/4\\\">\\n        <h3 class=\\\"chat-sidebar-header__title\\\">Conversation <span class=\\\"chat-sidebar-header__title__value\\\">({{counter}})</span></h3>\\n      </div>\\n      <div class=\\\"layout__item 1/4 text-right\\\">\\n        <a [routerLink]=\\\"['/Messages']\\\" class=\\\"btn btn-1 btn-1--blue btn--icon-circle-small js-share mr-\\\">\\n          <svg role=\\\"img\\\" class=\\\"icon icon--tiny\\\">\\n            <use xlink:href=\\\"/static/persiceApp/src/assets/icons/icons.svg#icon-new-message\\\"></use>\\n          </svg>\\n        </a>\\n      </div>\\n    </div>\\n  </header>\\n  \"\n\t        }), \n\t        __metadata('design:paramtypes', [inbox_service_1.InboxService])\n\t    ], MessagesSidebarHeaderComponent);\n\t    return MessagesSidebarHeaderComponent;\n\t}());\n\texports.MessagesSidebarHeaderComponent = MessagesSidebarHeaderComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 870:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar dropdown_directive_1 = __webpack_require__(421);\n\tvar MessagesHeaderComponent = (function () {\n\t    function MessagesHeaderComponent() {\n\t    }\n\t    MessagesHeaderComponent.prototype.ngOnInit = function () {\n\t    };\n\t    __decorate([\n\t        core_1.Input(), \n\t        __metadata('design:type', Object)\n\t    ], MessagesHeaderComponent.prototype, \"name\", void 0);\n\t    MessagesHeaderComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'messages-header',\n\t            directives: [\n\t                dropdown_directive_1.DropdownDirective\n\t            ],\n\t            template: __webpack_require__(841)\n\t        }), \n\t        __metadata('design:paramtypes', [])\n\t    ], MessagesHeaderComponent);\n\t    return MessagesHeaderComponent;\n\t}());\n\texports.MessagesHeaderComponent = MessagesHeaderComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 841:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<header class=\\\"chat-header\\\">\\n  <div class=\\\"layout layout--middle\\\" *ngIf=\\\"name !== ''\\\">\\n    <div class=\\\"layout__item 3/4\\\">\\n      <div class=\\\"has-input-left-labeled has-input-left-labeled--big\\\">\\n        <label class=\\\"left-labeled-label is-hidden\\\" for=\\\"\\\">To:</label>\\n        <div class=\\\"left-labeled-input\\\">\\n          <input type=\\\"text\\\" class=\\\"left-labeled-input is-hidden\\\" placeholder=\\\"NAME\\\">\\n          <span class=\\\"left-labeled-value\\\">{{name}}</span>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\\\"layout__item 1/4 text-right\\\">\\n      <div class=\\\"has-dropdown-basic\\\">\\n        <a class=\\\"btn btn-1 btn-1--red btn--icon-circle-small js-share mr\\\" dropdown=\\\"#messagesDropdown\\\">\\n          <svg role=\\\"img\\\" class=\\\"icon icon--tiny\\\">\\n            <use xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xlink:href=\\\"/static/persiceApp/src/assets/icons/icons.svg#icon-more\\\"></use>\\n          </svg>\\n        </a>\\n        <div class=\\\"dropdown-basic dropdown-basic--medium dropdown-basic--arrow-right\\\" id=\\\"messagesDropdown\\\">\\n          <ul class=\\\"list-bare\\\">\\n            <li><a>Delete conversation</a></li>\\n            <li><a>Report spam</a></li>\\n          </ul>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</header>\\n\"\n\n/***/ },\n\n/***/ 871:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar lodash_1 = __webpack_require__(23);\n\tvar messages_search_connections_component_1 = __webpack_require__(872);\n\tvar TOKEN_LIMIT = 1;\n\tvar MessagesHeaderNewComponent = (function () {\n\t    function MessagesHeaderNewComponent() {\n\t        this.selected = new core_1.EventEmitter;\n\t        this.tokens = [];\n\t        this.searchInputVisible = true;\n\t        this.activeToken = -1;\n\t    }\n\t    MessagesHeaderNewComponent.prototype.ngOnChanges = function (values) {\n\t        if (values.initialTokens && values.initialTokens.currentValue[0]) {\n\t            this.addToken(values.initialTokens.currentValue[0]);\n\t        }\n\t    };\n\t    MessagesHeaderNewComponent.prototype.addToken = function (token) {\n\t        if (this.tokens.length < TOKEN_LIMIT) {\n\t            var i = lodash_1.findIndex(this.tokens, { friend_id: token.friend_id });\n\t            if (i === -1) {\n\t                this.tokens = this.tokens.concat([token]);\n\t                this.activeToken = -1;\n\t                this.selected.emit(this.tokens);\n\t            }\n\t            else {\n\t                this.activeToken = i;\n\t            }\n\t            if (this.tokens.length === TOKEN_LIMIT) {\n\t                this.searchInputVisible = false;\n\t            }\n\t        }\n\t    };\n\t    MessagesHeaderNewComponent.prototype.removeToken = function (index) {\n\t        this.activeToken = -1;\n\t        this.tokens.splice(index, 1);\n\t        this.selected.emit(this.tokens);\n\t        this.searchInputVisible = true;\n\t    };\n\t    __decorate([\n\t        core_1.Output(), \n\t        __metadata('design:type', core_1.EventEmitter)\n\t    ], MessagesHeaderNewComponent.prototype, \"selected\", void 0);\n\t    __decorate([\n\t        core_1.Input(), \n\t        __metadata('design:type', Object)\n\t    ], MessagesHeaderNewComponent.prototype, \"initialTokens\", void 0);\n\t    MessagesHeaderNewComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'messages-header-new',\n\t            directives: [\n\t                messages_search_connections_component_1.MessagesSearchConnections\n\t            ],\n\t            template: __webpack_require__(842)\n\t        }), \n\t        __metadata('design:paramtypes', [])\n\t    ], MessagesHeaderNewComponent);\n\t    return MessagesHeaderNewComponent;\n\t}());\n\texports.MessagesHeaderNewComponent = MessagesHeaderNewComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 842:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<header class=\\\"chat-header has-message-drop\\\">\\n  <div class=\\\"layout layout--middle\\\">\\n    <div class=\\\"layout__item\\\">\\n      <div class=\\\"has-input-left-labeled has-input-left-labeled--big\\\">\\n        <label class=\\\"left-labeled-label\\\" for=\\\"\\\">To:&nbsp;</label>\\n        <div class=\\\"tokenfield\\\" *ngIf=\\\"tokens.length > 0\\\">\\n          <div class=\\\"token\\\" *ngFor=\\\"#token of tokens; #i = index;\\\" (click)=\\\"activeToken = i\\\" [ngClass]=\\\"{'active': activeToken === i}\\\">\\n            <span class=\\\"token-label\\\">{{token.first_name}}</span>\\n            <a (click)=\\\"removeToken(i)\\\" class=\\\"close\\\"></a>\\n          </div>\\n        </div>\\n        <div class=\\\"left-labeled-input\\\" [ngClass]=\\\"{'is-hidden': !searchInputVisible}\\\">\\n          <messages-search-connections (selected)=\\\"addToken($event)\\\"></messages-search-connections>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</header>\\n\"\n\n/***/ },\n\n/***/ 872:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar common_1 = __webpack_require__(86);\n\tvar http_1 = __webpack_require__(83);\n\tvar MessagesSearchConnections = (function () {\n\t    function MessagesSearchConnections(http) {\n\t        this.http = http;\n\t        this.selected = new core_1.EventEmitter();\n\t        this.searchTerm = new common_1.Control();\n\t        this.resultsVisible = false;\n\t        this.selectedIndex = -1;\n\t        this.resultsCount = 0;\n\t        this.resultsCache = [];\n\t        this.results = this._search(this.searchTerm.valueChanges);\n\t    }\n\t    MessagesSearchConnections.prototype.keyEvent = function (event) {\n\t        switch (event.keyCode) {\n\t            case 13:\n\t                if (this.selectedIndex !== -1) {\n\t                    this.select(this.resultsCache[this.selectedIndex]);\n\t                }\n\t                break;\n\t            case 40:\n\t                this.selectedIndex++;\n\t                if (this.selectedIndex > this.resultsCount - 1) {\n\t                    this.selectedIndex = this.resultsCount - 1;\n\t                }\n\t                if (this.selectedIndex > 3) {\n\t                    setTimeout(function () {\n\t                        var container = jQuery('.message-drop');\n\t                        var scrollTo = jQuery('.message-drop__results__result.is-active');\n\t                        jQuery('.message-drop').scrollTop(scrollTo.offset().top - container.offset().top + container.scrollTop());\n\t                    });\n\t                }\n\t                break;\n\t            case 38:\n\t                this.selectedIndex--;\n\t                if (this.selectedIndex < 0) {\n\t                    this.selectedIndex = 0;\n\t                }\n\t                if (this.selectedIndex !== -1) {\n\t                    setTimeout(function () {\n\t                        var container = jQuery('.message-drop');\n\t                        var scrollTo = jQuery('.message-drop__results__result.is-active');\n\t                        jQuery('.message-drop').scrollTop(scrollTo.offset().top - container.offset().top + container.scrollTop());\n\t                    });\n\t                }\n\t                event.preventDefault();\n\t                break;\n\t            case 27:\n\t                this.resultsVisible = false;\n\t                break;\n\t            default:\n\t                break;\n\t        }\n\t    };\n\t    MessagesSearchConnections.prototype.ngOnInit = function () {\n\t    };\n\t    MessagesSearchConnections.prototype.select = function (result) {\n\t        this.resultsVisible = false;\n\t        this.resultsCache = [];\n\t        this.searchTerm.updateValue('');\n\t        this.selected.emit(result);\n\t    };\n\t    MessagesSearchConnections.prototype._search = function (terms, debounceDuration) {\n\t        var _this = this;\n\t        if (debounceDuration === void 0) { debounceDuration = 400; }\n\t        return terms.debounceTime(debounceDuration)\n\t            .distinctUntilChanged()\n\t            .switchMap(function (term) { return _this._rawSearch(term); });\n\t    };\n\t    MessagesSearchConnections.prototype._rawSearch = function (term) {\n\t        var _this = this;\n\t        var url = \"/api/v1/connectionssearch/?format=json&first_name=\" + term;\n\t        return this.http\n\t            .get(url)\n\t            .map(function (request) {\n\t            _this.selectedIndex = -1;\n\t            var res = request.json();\n\t            _this.resultsCache = res.objects;\n\t            _this.resultsCount = res.meta.total_count;\n\t            if (_this.resultsCount > 0) {\n\t                _this.resultsVisible = true;\n\t            }\n\t            else {\n\t                _this.resultsVisible = false;\n\t            }\n\t            return _this.resultsCache;\n\t        });\n\t    };\n\t    __decorate([\n\t        core_1.Output(), \n\t        __metadata('design:type', core_1.EventEmitter)\n\t    ], MessagesSearchConnections.prototype, \"selected\", void 0);\n\t    MessagesSearchConnections = __decorate([\n\t        core_1.Component({\n\t            selector: 'messages-search-connections',\n\t            template: __webpack_require__(843)\n\t        }), \n\t        __metadata('design:paramtypes', [http_1.Http])\n\t    ], MessagesSearchConnections);\n\t    return MessagesSearchConnections;\n\t}());\n\texports.MessagesSearchConnections = MessagesSearchConnections;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 843:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<input (click)=\\\"resultsVisible = true\\\" (focus)=\\\"resultsVisible = true\\\" (blur)=\\\"resultsVisible = false\\\" (keydown)=\\\"keyEvent($event)\\\" [ngFormControl]=\\\"searchTerm\\\" type=\\\"text\\\" class=\\\"left-labeled-input__element js-message-to\\\" placeholder=\\\"NAME\\\">\\n<div class=\\\"message-drop\\\" [ngClass]=\\\"{'is-invisible': !resultsVisible}\\\">\\n  <div class=\\\"message-drop__results\\\">\\n    <a class=\\\"message-drop__results__result\\\" *ngFor=\\\"#result of results | async; #i = index\\\" (mouseover)=\\\"selectedIndex = i\\\" (click)=\\\"select(result)\\\" [ngClass]=\\\"{'is-active': selectedIndex === i}\\\">\\n      <div class=\\\"flag flag--small\\\">\\n        <div class=\\\"flag__img\\\">\\n          <div class=\\\"avatar avatar--medium\\\">\\n            <div class=\\\"avatar-holder\\\" [ngStyle]=\\\"{'background-image': 'url(' + result.image + ')'}\\\">>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"flag__body\\\">\\n          <div class=\\\"message__name\\\">{{result.first_name}}</div>\\n        </div>\\n      </div>\\n    </a>\\n  </div>\\n</div>\\n\"\n\n/***/ },\n\n/***/ 875:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar thread_single_component_1 = __webpack_require__(876);\n\tvar ThreadListComponent = (function () {\n\t    function ThreadListComponent() {\n\t        this.selected = new core_1.EventEmitter();\n\t    }\n\t    __decorate([\n\t        core_1.Input(), \n\t        __metadata('design:type', Object)\n\t    ], ThreadListComponent.prototype, \"threads\", void 0);\n\t    __decorate([\n\t        core_1.Input(), \n\t        __metadata('design:type', Object)\n\t    ], ThreadListComponent.prototype, \"active\", void 0);\n\t    __decorate([\n\t        core_1.Output(), \n\t        __metadata('design:type', core_1.EventEmitter)\n\t    ], ThreadListComponent.prototype, \"selected\", void 0);\n\t    ThreadListComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'thread-list',\n\t            template: \"\\n  <thread-single [isActive]=\\\"active\\\" (selected)=\\\"selected.next($event)\\\" *ngFor=\\\"#item of threads\\\" [thread]=\\\"item\\\"></thread-single>\\n  \",\n\t            directives: [\n\t                thread_single_component_1.ThreadSingleComponent\n\t            ]\n\t        }), \n\t        __metadata('design:paramtypes', [])\n\t    ], ThreadListComponent);\n\t    return ThreadListComponent;\n\t}());\n\texports.ThreadListComponent = ThreadListComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ },\n\n/***/ 876:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__decorate, __metadata) {\"use strict\";\n\tvar core_1 = __webpack_require__(2);\n\tvar ThreadSingleComponent = (function () {\n\t    function ThreadSingleComponent() {\n\t        this.selected = new core_1.EventEmitter();\n\t    }\n\t    ThreadSingleComponent.prototype.onSelect = function (thread) {\n\t        if (this.isActive !== thread.threadId) {\n\t            this.selected.next(thread);\n\t        }\n\t    };\n\t    __decorate([\n\t        core_1.Input(), \n\t        __metadata('design:type', Object)\n\t    ], ThreadSingleComponent.prototype, \"thread\", void 0);\n\t    __decorate([\n\t        core_1.Input(), \n\t        __metadata('design:type', Object)\n\t    ], ThreadSingleComponent.prototype, \"isActive\", void 0);\n\t    __decorate([\n\t        core_1.Output(), \n\t        __metadata('design:type', core_1.EventEmitter)\n\t    ], ThreadSingleComponent.prototype, \"selected\", void 0);\n\t    ThreadSingleComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'thread-single',\n\t            template: \"\\n  <div class=\\\"message\\\" [ngClass]=\\\"{'is-active': isActive === thread.threadId, 'is-unread': thread.unread === true}\\\" (click)=\\\"onSelect(thread)\\\">\\n    <div class=\\\"flag flag--responsive flag--small\\\">\\n      <div class=\\\"flag__img\\\">\\n        <span class=\\\"message__inread-indicator\\\"></span>\\n        <div class=\\\"avatar avatar--medium\\\">\\n          <div class=\\\"avatar-holder\\\"\\n          [ngStyle]=\\\"{'background-image': 'url(' + thread.image + ')'}\\\">\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\\\"flag__body\\\">\\n        <div class=\\\"message__name\\\">{{thread.name}}</div>\\n        <div class=\\\"message__text truncate\\\">{{thread.body}}</div>\\n        <div class=\\\"message__time\\\">{{thread.sentAt}}</div>\\n        <div class=\\\"message__total\\\" [ngClass]=\\\"{'is-visible': thread.unreadCounter > 0}\\\">{{thread.unreadCounter}}</div>\\n      </div>\\n    </div>\\n  </div>\\n  \"\n\t        }), \n\t        __metadata('design:paramtypes', [])\n\t    ], ThreadSingleComponent);\n\t    return ThreadSingleComponent;\n\t}());\n\texports.ThreadSingleComponent = ThreadSingleComponent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4), __webpack_require__(5)))\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 3.5f2aecd715a0bcdf9b0c.chunk.js\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar message_single_component_1 = require('../message_single/message_single.component');\nvar MessageListComponent = (function () {\n    function MessageListComponent() {\n    }\n    __decorate([\n        core_1.Input(), \n        __metadata('design:type', Object)\n    ], MessageListComponent.prototype, \"messages\", void 0);\n    MessageListComponent = __decorate([\n        core_1.Component({\n            selector: 'message-list',\n            template: \"\\n  <template ngFor #item [ngForOf]=\\\"messages\\\">\\n    <div class=\\\"chat__time\\\">\\n      <hr class=\\\"hr\\\">\\n      <span class=\\\"chat__time__value\\\">{{item.displayDate}}</span>\\n    </div>\\n    <message *ngFor=\\\"#m of item.data\\\" [message]=\\\"m\\\"></message>\\n  </template>\\n  \",\n            directives: [\n                message_single_component_1.MessageSingleComponent\n            ]\n        }), \n        __metadata('design:paramtypes', [])\n    ], MessageListComponent);\n    return MessageListComponent;\n}());\nexports.MessageListComponent = MessageListComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/message_list/message_list.component.ts\n ** module id = 864\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar router_1 = require('angular2/router');\nvar MessageSingleComponent = (function () {\n    function MessageSingleComponent(_router) {\n        this._router = _router;\n    }\n    MessageSingleComponent.prototype.openProfile = function (username) {\n        this._router.parent.parent.navigate(['./ProfileView', { username: username }]);\n    };\n    __decorate([\n        core_1.Input(), \n        __metadata('design:type', Object)\n    ], MessageSingleComponent.prototype, \"message\", void 0);\n    MessageSingleComponent = __decorate([\n        core_1.Component({\n            selector: 'message',\n            template: \"\\n  <div class=\\\"message is-open\\\">\\n    <div class=\\\"flag flag--top flag--small\\\">\\n      <div class=\\\"flag__img\\\" (click)=\\\"openProfile(message.username)\\\">\\n        <div class=\\\"avatar avatar--medium\\\">\\n          <div class=\\\"avatar-holder\\\"\\n          [ngStyle]=\\\"{'background-image': 'url(' + message.image + ')'}\\\">\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\\\"flag__body\\\">\\n        <div class=\\\"message__name\\\">\\n          <span (click)=\\\"openProfile(message.username)\\\">{{message?.name}}</span>\\n          <span (click)=\\\"openProfile(message.username)\\\" class=\\\"message__timestamp\\\">{{message?.time}}</span>\\n        </div>\\n        <div class=\\\"message__text\\\">{{message?.body}}</div>\\n      </div>\\n    </div>\\n  </div>\\n  \",\n            changeDetection: core_1.ChangeDetectionStrategy.OnPush\n        }), \n        __metadata('design:paramtypes', [router_1.Router])\n    ], MessageSingleComponent);\n    return MessageSingleComponent;\n}());\nexports.MessageSingleComponent = MessageSingleComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/message_single/message_single.component.ts\n ** module id = 865\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar router_1 = require('angular2/router');\nvar inbox_service_1 = require('../../services/inbox.service');\nvar messages_sidebar_component_1 = require('./messages_sidebar.component');\nvar messages_chat_component_1 = require('./messages_chat.component');\nvar messages_new_component_1 = require('./messages_new.component');\nvar messages_sidebar_header_component_1 = require('./messages_sidebar_header.component');\nvar view = require('./messages.html');\nvar MessagesComponent = (function () {\n    function MessagesComponent(inboxService, _router) {\n        this.inboxService = inboxService;\n        this._router = _router;\n        this.counter = 0;\n    }\n    MessagesComponent.prototype.ngOnInit = function () {\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n    };\n    MessagesComponent.prototype.navigateToConversation = function (id) {\n        this._router.navigate(['SingleConversation', { threadId: id }]);\n    };\n    MessagesComponent = __decorate([\n        core_1.Component({\n            selector: 'message',\n            template: view,\n            directives: [\n                messages_sidebar_component_1.MessagesSidebarComponent,\n                messages_sidebar_header_component_1.MessagesSidebarHeaderComponent,\n                router_1.ROUTER_DIRECTIVES\n            ],\n            providers: [\n                inbox_service_1.InboxService\n            ]\n        }),\n        router_1.RouteConfig([\n            {\n                path: '/:threadId',\n                component: messages_chat_component_1.MessagesChatComponent,\n                name: 'SingleConversation'\n            },\n            {\n                path: '/new/',\n                component: messages_new_component_1.MessagesNewComponent,\n                name: 'ConversationNew',\n                useAsDefault: true\n            },\n            {\n                path: '/new/:friendId',\n                component: messages_new_component_1.MessagesNewComponent,\n                name: 'ConversationNewSelected',\n            }\n        ]), \n        __metadata('design:paramtypes', [inbox_service_1.InboxService, router_1.Router])\n    ], MessagesComponent);\n    return MessagesComponent;\n}());\nexports.MessagesComponent = MessagesComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/ts-loader?{\"compilerOptions\":{\"removeComments\":true,\"noEmitHelpers\":true}}!./~/tslint-loader!./src/app/components/messages/messages.component.ts\n ** module id = 433\n ** module chunks = 3\n **/","module.exports = \"<div class=\\\"layout layout--flush position-relative\\\">\\n  <div class=\\\"layout__item extralarge-and-up-3/10 4/10\\\">\\n    <messages-sidebar-header [counter]=\\\"counter\\\"></messages-sidebar-header>\\n    <aside class=\\\"chat-sidebar is-scrollable-y\\\" id=\\\"inbox\\\" (selected)=\\\"navigateToConversation($event)\\\">\\n    </aside>\\n  </div>\\n  <div class=\\\"layout__item extralarge-and-up-7/10 6/10\\\">\\n    <router-outlet></router-outlet>\\n  </div>\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages/messages.html\n ** module id = 839\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar router_1 = require('angular2/router');\nvar inbox_service_1 = require('../../services/inbox.service');\nvar userauth_service_1 = require('../../services/userauth.service');\nvar messages_service_1 = require('../../services/messages.service');\nvar messages_counter_service_1 = require('../../services/messages_counter.service');\nvar websocket_service_1 = require('../../services/websocket.service');\nvar message_list_component_1 = require('../message_list/message_list.component');\nvar messages_input_component_1 = require('./messages_input.component');\nvar loading_component_1 = require('../loading/loading.component');\nvar messages_header_component_1 = require('../messages_header/messages_header.component');\nvar MessagesChatComponent = (function () {\n    function MessagesChatComponent(_params, inboxService, messagesService, userService, messagesCounterService, websocketService, _router) {\n        this._params = _params;\n        this.inboxService = inboxService;\n        this.messagesService = messagesService;\n        this.userService = userService;\n        this.messagesCounterService = messagesCounterService;\n        this.websocketService = websocketService;\n        this._router = _router;\n        this.name = '';\n        this.messages = [];\n        this.loadingMessages = false;\n        this.loadingMessagesFinished = false;\n        this.isMessagesEmpty = false;\n        this.messagesNext = '';\n        this.hasNew = false;\n        this.scrollOffset = null;\n        this.threadId = this._params.get('threadId');\n    }\n    MessagesChatComponent.prototype.ngOnInit = function () {\n        var _this = this;\n        var url = \"/api/v1/auth/user/\" + this.threadId + \"/\";\n        var channel = this.userService.findByUri(url)\n            .subscribe(function (data) {\n            _this.name = data.first_name;\n            channel.unsubscribe();\n        }, function (err) { return console.log('User could not be loaded'); });\n        this.inboxService.select(this.threadId);\n        setTimeout(function () {\n            _this.messagesCounterService.refreshCounter();\n        }, 500);\n        this.messagesServiceInstance = this.messagesService.serviceObserver()\n            .subscribe(function (res) {\n            _this.loadingMessages = res.loading;\n            _this.loadingMessagesFinished = res.finished;\n            _this.isMessagesEmpty = res.isEmpty;\n            _this.messagesNext = res.next;\n            _this.hasNew = res.hasNew;\n            var prevCount = _this.messages.length;\n            if (res.total === 0 && res.initialLoadingFinished) {\n                _this._router.parent.navigate(['/Messages', 'ConversationNewSelected', { friendId: _this.threadId }]);\n            }\n            if (prevCount === 0 && !_this.loadingMessages) {\n                var elem_1 = jQuery('#messages')[0];\n                setTimeout(function () {\n                    elem_1.scrollTop = elem_1.scrollHeight;\n                });\n            }\n            if (_this.hasNew && !_this.loadingMessages) {\n                var elem_2 = jQuery('#messages')[0];\n                setTimeout(function () {\n                    elem_2.scrollTop = elem_2.scrollHeight;\n                });\n                _this.hasNew = false;\n            }\n            _this.messages = res.data;\n            if (prevCount > 0 && !_this.loadingMessages && _this.scrollOffset !== null) {\n                var elem_3 = jQuery('#messages')[0];\n                setTimeout(function () {\n                    elem_3.scrollTop = elem_3.scrollHeight - _this.scrollOffset;\n                    _this.scrollOffset = null;\n                });\n            }\n            if (_this.loadingMessagesFinished === false) {\n                jQuery('#messages').bind('scroll', _this.handleScrollEvent.bind(_this));\n            }\n            else {\n                jQuery('#messages').unbind('scroll');\n            }\n        });\n        this.messagesService.startLoadingMessages(this.threadId);\n        this.websocketServiceInstance = this.websocketService.on('messages:new').subscribe(function (data) {\n            if (data.sender === \"/api/v1/auth/user/\" + _this.threadId + \"/\") {\n                _this.messagesService.recievedMessage(data);\n            }\n        });\n    };\n    MessagesChatComponent.prototype.handleScrollEvent = function (event) {\n        var elem = jQuery('#messages')[0];\n        if (this.messagesNext && elem.scrollTop <= 50) {\n            if (!this.loadingMessages && !this.hasNew) {\n                this.scrollOffset = elem.scrollHeight;\n                this.messagesService.loadMore(this.threadId);\n            }\n        }\n    };\n    MessagesChatComponent.prototype.sendMessage = function (message) {\n        this.messagesService.send(this.threadId, message);\n    };\n    MessagesChatComponent.prototype.ngOnDestroy = function () {\n        if (this.messagesServiceInstance) {\n            this.messagesServiceInstance.unsubscribe();\n        }\n        if (this.websocketServiceInstance) {\n            this.websocketServiceInstance.unsubscribe();\n        }\n    };\n    MessagesChatComponent = __decorate([\n        core_1.Component({\n            selector: 'messages-chat',\n            directives: [\n                messages_header_component_1.MessagesHeaderComponent,\n                message_list_component_1.MessageListComponent,\n                messages_input_component_1.MessagesInputComponent,\n                loading_component_1.LoadingComponent\n            ],\n            providers: [\n                messages_service_1.MessagesService,\n                userauth_service_1.UserAuthService\n            ],\n            template: \"\\n  <messages-header [name]=\\\"name\\\"></messages-header>\\n  <div class=\\\"chat\\\">\\n    <div class=\\\"chat-wrapper\\\" id=\\\"messages\\\">\\n      <div class=\\\"chat__messages-wrapper\\\">\\n        <div class=\\\"chat__messages\\\">\\n          <loading [status]=\\\"loadingMessages\\\"></loading>\\n          <message-list [messages]=\\\"messages\\\"></message-list>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\\\"chat__send-message\\\" [disabled]=\\\"0\\\" (newMessage)=\\\"sendMessage($event)\\\"></div>\\n  </div>\\n  \"\n        }), \n        __metadata('design:paramtypes', [router_1.RouteParams, inbox_service_1.InboxService, messages_service_1.MessagesService, userauth_service_1.UserAuthService, messages_counter_service_1.MessagesCounterService, websocket_service_1.WebsocketService, router_1.Router])\n    ], MessagesChatComponent);\n    return MessagesChatComponent;\n}());\nexports.MessagesChatComponent = MessagesChatComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages/messages_chat.component.ts\n ** module id = 866\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar MessagesInputComponent = (function () {\n    function MessagesInputComponent() {\n        this.newMessage = new core_1.EventEmitter();\n        this.message = '';\n    }\n    MessagesInputComponent.prototype.sendMessage = function (event) {\n        if (this.message.length > 0 && !this.disabled) {\n            this.newMessage.next(this.message);\n            this.message = '';\n        }\n    };\n    __decorate([\n        core_1.Output(), \n        __metadata('design:type', core_1.EventEmitter)\n    ], MessagesInputComponent.prototype, \"newMessage\", void 0);\n    __decorate([\n        core_1.Input(), \n        __metadata('design:type', Object)\n    ], MessagesInputComponent.prototype, \"disabled\", void 0);\n    MessagesInputComponent = __decorate([\n        core_1.Component({\n            selector: '.chat__send-message',\n            template: \"\\n  <div class=\\\"tableize\\\">\\n    <div class=\\\"tableize__cell tableize__cell--fill\\\">\\n      <div class=\\\"tableize__content\\\">\\n        <textarea [(ngModel)]=\\\"message\\\" class=\\\"c-input c-input--large\\\" placeholder=\\\"Write a message\\\"></textarea>\\n      </div>\\n    </div>\\n    <div class=\\\"tableize__cell\\\">\\n      <div class=\\\"tableize__content chat__send-message__has-btn\\\">\\n        <a (click)=\\\"sendMessage($event)\\\" class=\\\"btn btn-1 btn-1--full btn-1--filled btn-1--blue \\\">Send</a>\\n      </div>\\n    </div>\\n  </div>\\n  \"\n        }), \n        __metadata('design:paramtypes', [])\n    ], MessagesInputComponent);\n    return MessagesInputComponent;\n}());\nexports.MessagesInputComponent = MessagesInputComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages/messages_input.component.ts\n ** module id = 828\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar router_1 = require('angular2/router');\nvar messages_input_component_1 = require('./messages_input.component');\nvar messages_header_new_component_1 = require('../messages_header_new/messages_header_new.component');\nvar inbox_service_1 = require('../../services/inbox.service');\nvar messages_service_1 = require('../../services/messages.service');\nvar userauth_service_1 = require('../../services/userauth.service');\nvar MessagesNewComponent = (function () {\n    function MessagesNewComponent(inboxService, messagesService, userService, _router, _params) {\n        var _this = this;\n        this.inboxService = inboxService;\n        this.messagesService = messagesService;\n        this.userService = userService;\n        this._router = _router;\n        this._params = _params;\n        this.tokens = [];\n        this.initialTokens = [];\n        this.message = '';\n        this.friendId = this._params.get('friendId');\n        if (this.friendId !== null) {\n            var uri = \"/api/v1/auth/user/\" + this.friendId + \"/\";\n            var channel_1 = this.userService.findOneByUri(uri)\n                .subscribe(function (data) {\n                _this.initialTokens = [{\n                        first_name: data.first_name,\n                        image: data.image,\n                        friend_id: _this.friendId\n                    }];\n                channel_1.unsubscribe();\n            }, function (err) { return console.log('user could not be found'); });\n        }\n    }\n    MessagesNewComponent.prototype.sendMessage = function (message) {\n        var _this = this;\n        if (this.tokens.length === 1) {\n            var channel_2 = this.messagesService.sendNew(this.tokens[0].friend_id, message)\n                .subscribe(function (data) {\n                channel_2.unsubscribe();\n                _this.inboxService.addSender(_this.tokens[0].friend_id);\n                _this._router.parent.navigate(['/Messages', 'SingleConversation', { threadId: _this.tokens[0].friend_id }]);\n            }, function (error) { return console.log('Could not create new message.'); });\n        }\n    };\n    MessagesNewComponent.prototype.routerOnActivate = function (nextInstruction, prevInstruction) {\n        this.inboxService.deselectThreads();\n    };\n    MessagesNewComponent = __decorate([\n        core_1.Component({\n            selector: 'messages-new',\n            template: require('./messages_new.html'),\n            directives: [\n                messages_header_new_component_1.MessagesHeaderNewComponent,\n                messages_input_component_1.MessagesInputComponent\n            ],\n            providers: [\n                messages_service_1.MessagesService\n            ]\n        }), \n        __metadata('design:paramtypes', [inbox_service_1.InboxService, messages_service_1.MessagesService, userauth_service_1.UserAuthService, router_1.Router, router_1.RouteParams])\n    ], MessagesNewComponent);\n    return MessagesNewComponent;\n}());\nexports.MessagesNewComponent = MessagesNewComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages/messages_new.component.ts\n ** module id = 867\n ** module chunks = 3\n **/","module.exports = \"<messages-header-new [initialTokens]=\\\"initialTokens\\\" (selected)=\\\"tokens = $event\\\"></messages-header-new>\\n<div class=\\\"chat\\\">\\n  <div class=\\\"chat-wrapper\\\">\\n    <div class=\\\"chat__messages-wrapper\\\">\\n      <div class=\\\"chat__messages\\\">\\n        <div class=\\\"chat__messages__blank-slate\\\">\\n          <svg role=\\\"img\\\" class=\\\"icon chat-empty-state__icon\\\">\\n            <use xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xlink:href=\\\"/static/persiceApp/src/assets/icons/icons.svg#start_conversation\\\"></use>\\n          </svg>\\n          <h3 class=\\\"chat-empty-state__title\\\">Start conversation</h3>\\n          <p class=\\\"chat-empty-state__par\\\">Type your message below to start Conversation</p>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"chat__send-message\\\" [disabled]=\\\"tokens.length === 0\\\" (newMessage)=\\\"sendMessage($event)\\\"></div>\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages/messages_new.html\n ** module id = 840\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar inbox_service_1 = require('../../services/inbox.service');\nvar messages_counter_service_1 = require('../../services/messages_counter.service');\nvar websocket_service_1 = require('../../services/websocket.service');\nvar thread_list_component_1 = require('../thread_list/thread_list.component');\nvar loading_component_1 = require('../loading/loading.component');\nvar MessagesSidebarComponent = (function () {\n    function MessagesSidebarComponent(inboxService, messagesCounterService, websocketService, element) {\n        this.inboxService = inboxService;\n        this.messagesCounterService = messagesCounterService;\n        this.websocketService = websocketService;\n        this.element = element;\n        this.selected = new core_1.EventEmitter();\n        this.threads = [];\n        this.loadingInbox = false;\n        this.loadingInboxFinished = false;\n        this.isInboxEmpty = false;\n        this.inboxNext = '';\n        this.activeThread = null;\n    }\n    MessagesSidebarComponent.prototype.ngOnInit = function () {\n        var _this = this;\n        this.messagesCounterService.refreshCounter();\n        this.inboxServiceInstance = this.inboxService.serviceObserver()\n            .subscribe(function (res) {\n            _this.loadingInbox = res.loading;\n            _this.threads = res.data;\n            _this.loadingInboxFinished = res.finished;\n            _this.isInboxEmpty = res.isEmpty;\n            _this.inboxNext = res.next;\n            _this.activeThread = res.selected;\n            if (_this.loadingInboxFinished === false) {\n                jQuery(_this.element.nativeElement).bind('scroll', _this.handleScrollEvent.bind(_this));\n            }\n            else {\n                jQuery(_this.element.nativeElement).unbind('scroll');\n            }\n        });\n        this.inboxService.startLoadingInbox();\n        this.websocketServiceInstance = this.websocketService.on('messages:new').subscribe(function (data) {\n            if (_this.activeThread !== null) {\n                _this.inboxService.markRead(_this.activeThread);\n            }\n            setTimeout(function () {\n                _this.inboxService.addSender(data.friend_id);\n                _this.messagesCounterService.refreshCounter();\n            }, 500);\n        });\n    };\n    MessagesSidebarComponent.prototype.onSelect = function (thread) {\n        this.inboxService.select(thread.threadId);\n        this.selected.next(thread.threadId);\n    };\n    MessagesSidebarComponent.prototype.handleScrollEvent = function (event) {\n        var scrollOffset = jQuery(this.element.nativeElement).scrollTop();\n        var threshold = jQuery(document).height() - jQuery('#inbox').height() - 60;\n        if (this.inboxNext && scrollOffset > threshold) {\n            if (!this.loadingInbox) {\n                this.inboxService.loadMore();\n            }\n        }\n    };\n    MessagesSidebarComponent.prototype.ngOnDestroy = function () {\n        if (this.inboxServiceInstance) {\n            this.inboxServiceInstance.unsubscribe();\n        }\n        if (this.websocketServiceInstance) {\n            this.websocketServiceInstance.unsubscribe();\n        }\n    };\n    __decorate([\n        core_1.Output(), \n        __metadata('design:type', core_1.EventEmitter)\n    ], MessagesSidebarComponent.prototype, \"selected\", void 0);\n    MessagesSidebarComponent = __decorate([\n        core_1.Component({\n            selector: '.chat-sidebar',\n            directives: [\n                thread_list_component_1.ThreadListComponent,\n                loading_component_1.LoadingComponent\n            ],\n            template: \"\\n  <thread-list (selected)=\\\"onSelect($event)\\\" [active]=\\\"activeThread\\\" [threads]=\\\"threads\\\"></thread-list>\\n  <loading [status]=\\\"loadingInbox\\\"></loading>\\n  \"\n        }), \n        __metadata('design:paramtypes', [inbox_service_1.InboxService, messages_counter_service_1.MessagesCounterService, websocket_service_1.WebsocketService, core_1.ElementRef])\n    ], MessagesSidebarComponent);\n    return MessagesSidebarComponent;\n}());\nexports.MessagesSidebarComponent = MessagesSidebarComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages/messages_sidebar.component.ts\n ** module id = 868\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar router_1 = require('angular2/router');\nvar inbox_service_1 = require('../../services/inbox.service');\nvar MessagesSidebarHeaderComponent = (function () {\n    function MessagesSidebarHeaderComponent(inboxService) {\n        var _this = this;\n        this.inboxService = inboxService;\n        this.inboxServiceObserver = this.inboxService.serviceCounterObserver()\n            .subscribe(function (data) {\n            _this.counter = data;\n        });\n    }\n    MessagesSidebarHeaderComponent.prototype.ngOnDestroy = function () {\n        this.inboxServiceObserver.unsubscribe();\n    };\n    __decorate([\n        core_1.Input(), \n        __metadata('design:type', Object)\n    ], MessagesSidebarHeaderComponent.prototype, \"counter\", void 0);\n    MessagesSidebarHeaderComponent = __decorate([\n        core_1.Component({\n            selector: 'messages-sidebar-header',\n            directives: [\n                router_1.ROUTER_DIRECTIVES\n            ],\n            template: \"\\n  <header class=\\\"chat-sidebar-header\\\">\\n    <div class=\\\"layout layout--middle\\\">\\n      <div class=\\\"layout__item 3/4\\\">\\n        <h3 class=\\\"chat-sidebar-header__title\\\">Conversation <span class=\\\"chat-sidebar-header__title__value\\\">({{counter}})</span></h3>\\n      </div>\\n      <div class=\\\"layout__item 1/4 text-right\\\">\\n        <a [routerLink]=\\\"['/Messages']\\\" class=\\\"btn btn-1 btn-1--blue btn--icon-circle-small js-share mr-\\\">\\n          <svg role=\\\"img\\\" class=\\\"icon icon--tiny\\\">\\n            <use xlink:href=\\\"/static/persiceApp/src/assets/icons/icons.svg#icon-new-message\\\"></use>\\n          </svg>\\n        </a>\\n      </div>\\n    </div>\\n  </header>\\n  \"\n        }), \n        __metadata('design:paramtypes', [inbox_service_1.InboxService])\n    ], MessagesSidebarHeaderComponent);\n    return MessagesSidebarHeaderComponent;\n}());\nexports.MessagesSidebarHeaderComponent = MessagesSidebarHeaderComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages/messages_sidebar_header.component.ts\n ** module id = 869\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar dropdown_directive_1 = require('../../directives/dropdown.directive');\nvar MessagesHeaderComponent = (function () {\n    function MessagesHeaderComponent() {\n    }\n    MessagesHeaderComponent.prototype.ngOnInit = function () {\n    };\n    __decorate([\n        core_1.Input(), \n        __metadata('design:type', Object)\n    ], MessagesHeaderComponent.prototype, \"name\", void 0);\n    MessagesHeaderComponent = __decorate([\n        core_1.Component({\n            selector: 'messages-header',\n            directives: [\n                dropdown_directive_1.DropdownDirective\n            ],\n            template: require('./messages_header.html')\n        }), \n        __metadata('design:paramtypes', [])\n    ], MessagesHeaderComponent);\n    return MessagesHeaderComponent;\n}());\nexports.MessagesHeaderComponent = MessagesHeaderComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages_header/messages_header.component.ts\n ** module id = 870\n ** module chunks = 3\n **/","module.exports = \"<header class=\\\"chat-header\\\">\\n  <div class=\\\"layout layout--middle\\\" *ngIf=\\\"name !== ''\\\">\\n    <div class=\\\"layout__item 3/4\\\">\\n      <div class=\\\"has-input-left-labeled has-input-left-labeled--big\\\">\\n        <label class=\\\"left-labeled-label is-hidden\\\" for=\\\"\\\">To:</label>\\n        <div class=\\\"left-labeled-input\\\">\\n          <input type=\\\"text\\\" class=\\\"left-labeled-input is-hidden\\\" placeholder=\\\"NAME\\\">\\n          <span class=\\\"left-labeled-value\\\">{{name}}</span>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\\\"layout__item 1/4 text-right\\\">\\n      <div class=\\\"has-dropdown-basic\\\">\\n        <a class=\\\"btn btn-1 btn-1--red btn--icon-circle-small js-share mr\\\" dropdown=\\\"#messagesDropdown\\\">\\n          <svg role=\\\"img\\\" class=\\\"icon icon--tiny\\\">\\n            <use xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xlink:href=\\\"/static/persiceApp/src/assets/icons/icons.svg#icon-more\\\"></use>\\n          </svg>\\n        </a>\\n        <div class=\\\"dropdown-basic dropdown-basic--medium dropdown-basic--arrow-right\\\" id=\\\"messagesDropdown\\\">\\n          <ul class=\\\"list-bare\\\">\\n            <li><a>Delete conversation</a></li>\\n            <li><a>Report spam</a></li>\\n          </ul>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</header>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages_header/messages_header.html\n ** module id = 841\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar lodash_1 = require('lodash');\nvar messages_search_connections_component_1 = require('../messages_search_connections/messages_search_connections.component');\nvar TOKEN_LIMIT = 1;\nvar MessagesHeaderNewComponent = (function () {\n    function MessagesHeaderNewComponent() {\n        this.selected = new core_1.EventEmitter;\n        this.tokens = [];\n        this.searchInputVisible = true;\n        this.activeToken = -1;\n    }\n    MessagesHeaderNewComponent.prototype.ngOnChanges = function (values) {\n        if (values.initialTokens && values.initialTokens.currentValue[0]) {\n            this.addToken(values.initialTokens.currentValue[0]);\n        }\n    };\n    MessagesHeaderNewComponent.prototype.addToken = function (token) {\n        if (this.tokens.length < TOKEN_LIMIT) {\n            var i = lodash_1.findIndex(this.tokens, { friend_id: token.friend_id });\n            if (i === -1) {\n                this.tokens = this.tokens.concat([token]);\n                this.activeToken = -1;\n                this.selected.emit(this.tokens);\n            }\n            else {\n                this.activeToken = i;\n            }\n            if (this.tokens.length === TOKEN_LIMIT) {\n                this.searchInputVisible = false;\n            }\n        }\n    };\n    MessagesHeaderNewComponent.prototype.removeToken = function (index) {\n        this.activeToken = -1;\n        this.tokens.splice(index, 1);\n        this.selected.emit(this.tokens);\n        this.searchInputVisible = true;\n    };\n    __decorate([\n        core_1.Output(), \n        __metadata('design:type', core_1.EventEmitter)\n    ], MessagesHeaderNewComponent.prototype, \"selected\", void 0);\n    __decorate([\n        core_1.Input(), \n        __metadata('design:type', Object)\n    ], MessagesHeaderNewComponent.prototype, \"initialTokens\", void 0);\n    MessagesHeaderNewComponent = __decorate([\n        core_1.Component({\n            selector: 'messages-header-new',\n            directives: [\n                messages_search_connections_component_1.MessagesSearchConnections\n            ],\n            template: require('./messages_header_new.html')\n        }), \n        __metadata('design:paramtypes', [])\n    ], MessagesHeaderNewComponent);\n    return MessagesHeaderNewComponent;\n}());\nexports.MessagesHeaderNewComponent = MessagesHeaderNewComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages_header_new/messages_header_new.component.ts\n ** module id = 871\n ** module chunks = 3\n **/","module.exports = \"<header class=\\\"chat-header has-message-drop\\\">\\n  <div class=\\\"layout layout--middle\\\">\\n    <div class=\\\"layout__item\\\">\\n      <div class=\\\"has-input-left-labeled has-input-left-labeled--big\\\">\\n        <label class=\\\"left-labeled-label\\\" for=\\\"\\\">To:&nbsp;</label>\\n        <div class=\\\"tokenfield\\\" *ngIf=\\\"tokens.length > 0\\\">\\n          <div class=\\\"token\\\" *ngFor=\\\"#token of tokens; #i = index;\\\" (click)=\\\"activeToken = i\\\" [ngClass]=\\\"{'active': activeToken === i}\\\">\\n            <span class=\\\"token-label\\\">{{token.first_name}}</span>\\n            <a (click)=\\\"removeToken(i)\\\" class=\\\"close\\\"></a>\\n          </div>\\n        </div>\\n        <div class=\\\"left-labeled-input\\\" [ngClass]=\\\"{'is-hidden': !searchInputVisible}\\\">\\n          <messages-search-connections (selected)=\\\"addToken($event)\\\"></messages-search-connections>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</header>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages_header_new/messages_header_new.html\n ** module id = 842\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar common_1 = require('angular2/common');\nvar http_1 = require('angular2/http');\nvar MessagesSearchConnections = (function () {\n    function MessagesSearchConnections(http) {\n        this.http = http;\n        this.selected = new core_1.EventEmitter();\n        this.searchTerm = new common_1.Control();\n        this.resultsVisible = false;\n        this.selectedIndex = -1;\n        this.resultsCount = 0;\n        this.resultsCache = [];\n        this.results = this._search(this.searchTerm.valueChanges);\n    }\n    MessagesSearchConnections.prototype.keyEvent = function (event) {\n        switch (event.keyCode) {\n            case 13:\n                if (this.selectedIndex !== -1) {\n                    this.select(this.resultsCache[this.selectedIndex]);\n                }\n                break;\n            case 40:\n                this.selectedIndex++;\n                if (this.selectedIndex > this.resultsCount - 1) {\n                    this.selectedIndex = this.resultsCount - 1;\n                }\n                if (this.selectedIndex > 3) {\n                    setTimeout(function () {\n                        var container = jQuery('.message-drop');\n                        var scrollTo = jQuery('.message-drop__results__result.is-active');\n                        jQuery('.message-drop').scrollTop(scrollTo.offset().top - container.offset().top + container.scrollTop());\n                    });\n                }\n                break;\n            case 38:\n                this.selectedIndex--;\n                if (this.selectedIndex < 0) {\n                    this.selectedIndex = 0;\n                }\n                if (this.selectedIndex !== -1) {\n                    setTimeout(function () {\n                        var container = jQuery('.message-drop');\n                        var scrollTo = jQuery('.message-drop__results__result.is-active');\n                        jQuery('.message-drop').scrollTop(scrollTo.offset().top - container.offset().top + container.scrollTop());\n                    });\n                }\n                event.preventDefault();\n                break;\n            case 27:\n                this.resultsVisible = false;\n                break;\n            default:\n                break;\n        }\n    };\n    MessagesSearchConnections.prototype.ngOnInit = function () {\n    };\n    MessagesSearchConnections.prototype.select = function (result) {\n        this.resultsVisible = false;\n        this.resultsCache = [];\n        this.searchTerm.updateValue('');\n        this.selected.emit(result);\n    };\n    MessagesSearchConnections.prototype._search = function (terms, debounceDuration) {\n        var _this = this;\n        if (debounceDuration === void 0) { debounceDuration = 400; }\n        return terms.debounceTime(debounceDuration)\n            .distinctUntilChanged()\n            .switchMap(function (term) { return _this._rawSearch(term); });\n    };\n    MessagesSearchConnections.prototype._rawSearch = function (term) {\n        var _this = this;\n        var url = \"/api/v1/connectionssearch/?format=json&first_name=\" + term;\n        return this.http\n            .get(url)\n            .map(function (request) {\n            _this.selectedIndex = -1;\n            var res = request.json();\n            _this.resultsCache = res.objects;\n            _this.resultsCount = res.meta.total_count;\n            if (_this.resultsCount > 0) {\n                _this.resultsVisible = true;\n            }\n            else {\n                _this.resultsVisible = false;\n            }\n            return _this.resultsCache;\n        });\n    };\n    __decorate([\n        core_1.Output(), \n        __metadata('design:type', core_1.EventEmitter)\n    ], MessagesSearchConnections.prototype, \"selected\", void 0);\n    MessagesSearchConnections = __decorate([\n        core_1.Component({\n            selector: 'messages-search-connections',\n            template: require('./messages_search_connections.html')\n        }), \n        __metadata('design:paramtypes', [http_1.Http])\n    ], MessagesSearchConnections);\n    return MessagesSearchConnections;\n}());\nexports.MessagesSearchConnections = MessagesSearchConnections;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages_search_connections/messages_search_connections.component.ts\n ** module id = 872\n ** module chunks = 3\n **/","module.exports = \"<input (click)=\\\"resultsVisible = true\\\" (focus)=\\\"resultsVisible = true\\\" (blur)=\\\"resultsVisible = false\\\" (keydown)=\\\"keyEvent($event)\\\" [ngFormControl]=\\\"searchTerm\\\" type=\\\"text\\\" class=\\\"left-labeled-input__element js-message-to\\\" placeholder=\\\"NAME\\\">\\n<div class=\\\"message-drop\\\" [ngClass]=\\\"{'is-invisible': !resultsVisible}\\\">\\n  <div class=\\\"message-drop__results\\\">\\n    <a class=\\\"message-drop__results__result\\\" *ngFor=\\\"#result of results | async; #i = index\\\" (mouseover)=\\\"selectedIndex = i\\\" (click)=\\\"select(result)\\\" [ngClass]=\\\"{'is-active': selectedIndex === i}\\\">\\n      <div class=\\\"flag flag--small\\\">\\n        <div class=\\\"flag__img\\\">\\n          <div class=\\\"avatar avatar--medium\\\">\\n            <div class=\\\"avatar-holder\\\" [ngStyle]=\\\"{'background-image': 'url(' + result.image + ')'}\\\">>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"flag__body\\\">\\n          <div class=\\\"message__name\\\">{{result.first_name}}</div>\\n        </div>\\n      </div>\\n    </a>\\n  </div>\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/messages_search_connections/messages_search_connections.html\n ** module id = 843\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar thread_single_component_1 = require('../thread_single/thread_single.component');\nvar ThreadListComponent = (function () {\n    function ThreadListComponent() {\n        this.selected = new core_1.EventEmitter();\n    }\n    __decorate([\n        core_1.Input(), \n        __metadata('design:type', Object)\n    ], ThreadListComponent.prototype, \"threads\", void 0);\n    __decorate([\n        core_1.Input(), \n        __metadata('design:type', Object)\n    ], ThreadListComponent.prototype, \"active\", void 0);\n    __decorate([\n        core_1.Output(), \n        __metadata('design:type', core_1.EventEmitter)\n    ], ThreadListComponent.prototype, \"selected\", void 0);\n    ThreadListComponent = __decorate([\n        core_1.Component({\n            selector: 'thread-list',\n            template: \"\\n  <thread-single [isActive]=\\\"active\\\" (selected)=\\\"selected.next($event)\\\" *ngFor=\\\"#item of threads\\\" [thread]=\\\"item\\\"></thread-single>\\n  \",\n            directives: [\n                thread_single_component_1.ThreadSingleComponent\n            ]\n        }), \n        __metadata('design:paramtypes', [])\n    ], ThreadListComponent);\n    return ThreadListComponent;\n}());\nexports.ThreadListComponent = ThreadListComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/thread_list/thread_list.component.ts\n ** module id = 875\n ** module chunks = 3\n **/","\"use strict\";\nvar core_1 = require('angular2/core');\nvar ThreadSingleComponent = (function () {\n    function ThreadSingleComponent() {\n        this.selected = new core_1.EventEmitter();\n    }\n    ThreadSingleComponent.prototype.onSelect = function (thread) {\n        if (this.isActive !== thread.threadId) {\n            this.selected.next(thread);\n        }\n    };\n    __decorate([\n        core_1.Input(), \n        __metadata('design:type', Object)\n    ], ThreadSingleComponent.prototype, \"thread\", void 0);\n    __decorate([\n        core_1.Input(), \n        __metadata('design:type', Object)\n    ], ThreadSingleComponent.prototype, \"isActive\", void 0);\n    __decorate([\n        core_1.Output(), \n        __metadata('design:type', core_1.EventEmitter)\n    ], ThreadSingleComponent.prototype, \"selected\", void 0);\n    ThreadSingleComponent = __decorate([\n        core_1.Component({\n            selector: 'thread-single',\n            template: \"\\n  <div class=\\\"message\\\" [ngClass]=\\\"{'is-active': isActive === thread.threadId, 'is-unread': thread.unread === true}\\\" (click)=\\\"onSelect(thread)\\\">\\n    <div class=\\\"flag flag--responsive flag--small\\\">\\n      <div class=\\\"flag__img\\\">\\n        <span class=\\\"message__inread-indicator\\\"></span>\\n        <div class=\\\"avatar avatar--medium\\\">\\n          <div class=\\\"avatar-holder\\\"\\n          [ngStyle]=\\\"{'background-image': 'url(' + thread.image + ')'}\\\">\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\\\"flag__body\\\">\\n        <div class=\\\"message__name\\\">{{thread.name}}</div>\\n        <div class=\\\"message__text truncate\\\">{{thread.body}}</div>\\n        <div class=\\\"message__time\\\">{{thread.sentAt}}</div>\\n        <div class=\\\"message__total\\\" [ngClass]=\\\"{'is-visible': thread.unreadCounter > 0}\\\">{{thread.unreadCounter}}</div>\\n      </div>\\n    </div>\\n  </div>\\n  \"\n        }), \n        __metadata('design:paramtypes', [])\n    ], ThreadSingleComponent);\n    return ThreadSingleComponent;\n}());\nexports.ThreadSingleComponent = ThreadSingleComponent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/thread_single/thread_single.component.ts\n ** module id = 876\n ** module chunks = 3\n **/"],"sourceRoot":""}