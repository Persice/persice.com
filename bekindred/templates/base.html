<!doctype html>
<html class="no-js" ng-app="beKindred" ng-controller="AppCtrl">
<head>
  <meta charset="utf-8">
  <title>Kindred</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="">
  <meta name="author" content="">
  <link href='//fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Lato:400,300,600,700' rel='stylesheet' type='text/css'>

  <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
  <!-- Favicons -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <!-- For third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/images/apple-touch-icon-144x144-precomposed.png">
  <!-- For iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/images/apple-touch-icon-114x114-precomposed.png">
  <!-- For first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/images/apple-touch-icon-72x72-precomposed.png">
  <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="assets/images/apple-touch-icon-precomposed.png">

  <link href="{{ STATIC_URL }}css/vendor.css" rel="stylesheet" media="screen">
  <link href="{{ STATIC_URL }}css/app.css" rel="stylesheet" media="screen">

  <script src="{{ STATIC_URL }}js/modernizr.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jstimezonedetect/1.0.4/jstz.min.js"></script>

</head>
<body id="main-page" class="gray">

  <toaster-container toaster-options="{'position-class': 'toast-top-full-width', 'time-out': 5000}"></toaster-container>


  {%verbatim%}
      <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
      <![endif]-->


      <div class="ui top horizontal large sidebar" id="MatchMenu">
        <div class="ui fluid six item menu">
          <a class="item" ng-click="goBack()">
            <i class="chevron left icon"></i>
          </a>
          <span class="item"></span>
          <a ng-click="cancelMatch()" class="item clearbefore">
            <i class="remove icon"></i>
          </a>
          <a ng-click="confirmMatch()" class="item clearbefore">
            <i class="check icon"></i>
          </a>
          <span class="item"></span>
          <span class="item"></span>
        </div>
      </div>

      <div class="ui vertical left inverted labeled sidebar menu" id="menu" ng-controller="LeftSidebarCtrl">
        <a ui-sref="home" ui-sref-active="active" class="item">Home <i class="home icon"></i></a>
        <a ui-sref="inbox" ui-sref-active="active" class="item">Inbox <i class="envelope icon"></i></a>
        <a ui-sref="matchfeed" ui-sref-active="active" class="item">Match Feed <i class="check icon"></i></a>
        <a ui-sref="myprofile" ui-sref-active="active" class="item">My Profile <i class="user icon"></i> </a>
        <a ui-sref="myconnections" ui-sref-active="active" class="item">My Connections <i class="plus icon"></i></a>
        <a ui-sref="settings" ui-sref-active="active" class="item">Settings <i class="setting icon"></i></a>
        <a ui-sref-ignore href="accounts/logout" class="item"><i class="fa fa-sign-out icon"></i> Sign out</a>
        <div class="item" id="side-menu-logo">
          <ul class="social-icon" id="intro-title">
            <li><a href="" class="facebook"><i class="fa fa-slideshare"></i></a></li>
            <li><h1>Kindred</h1></li>
          </ul>
        </div>
      </div>

      <div class="ui vertical right inverted labeled sidebar menu" id="filtersMenu" ng-show="isState('matchfeed')">
        <div id="FilterController" ng-controller="FilterController">
          <div id="filter" class="ui form">
            <form name="filterForm" id="filterForm" method="get" action="">
              <div class="field">
                <label>Distance <span class="range">{{distanceValue}} mi.</span></label>
                <div no-ui-slider="distanceOptions" ng-model="distanceValue" ng-change="saveFilters()"></div>
              </div>
              <div class="field">
                <label>Age <span class="range">{{ageValues[0]}} &ndash; {{ageValues[1]}}</span></label>
                <div no-ui-slider="ageOptions" ng-model="ageValues" ng-change="saveFilters()"></div>
              </div>
              <div class="field">
                <label class="">Show</label>
              </div>
              <div class="field field-checkbox">
                <div id="male" class="ui toggle checkbox">
                  <input type="checkbox" value="m">
                  <label>Men</label>
                </div>
              </div>
              <div class="field field-checkbox">
                <div id="female" class="ui toggle checkbox">
                  <input type="checkbox" value="f">
                  <label>Women</label>
                </div>
              </div>
              <div class="field">
                <input class="displayNone" ng-model="genders" ng-change="saveFilters()" id="gendersModel" value="" type="text">
              </div>

              <div class="field" ng-show="showFilterMessage">
                <label>
                  <div class="ui small negative message">
                    <p>
                      {{filtermessage}}
                    </p>
                  </div>
                </label>
              </div>

              <div class="ui icon input">
                <input ng-minlength=3 type="text" placeholder="Enter keyword" ng-enter="addKeyword(newKeyword)" ng-model="newKeyword">
                <i class="circular plus icon" ng-click="addKeyword(newKeyword)"></i>
              </div>
              <div class="">
                <a ng-click="removeKeyword(index)" href="" class="item" ng-repeat="keyword in myKeywords track by $index">
                  <div class="content">
                    <div class="header"><i class="circle remove icon"></i> {{keyword}}</div>
                  </div>
                </a>
              </div>
              <div class="ui divider"></div>
              <a href="" class="button ui submit green" ng-click="refreshMatchFeed()" role="button">Filter</a>
            </div>
          </div>
        </div>


        <div class="ui inverted top fixed menu" id="maintopmenu" ng-controller="TopNavbarCtrl" ng-class="{'hidden': hideTopMenu}" ng-hide="isState('conversations') || isState('friendprofile')">
          <div class="container">
            <a id="leftsidebarlaunch" class="launch item"><i class="content icon"></i></a>
            <div class="title item">
              <b>Kindred</b>
            </div>
            <div class="right menu" id="main-menu-right">
              <a ui-sref="home" ui-sref-active="active" class="item"><i class="icon home"></i> Home</a>
              <a ui-sref="inbox" ui-sref-active="active" class="item"><i class="icon envelope"></i> Inbox</a>
              <a ui-sref="matchfeed" ui-sref-active="active" class="item"><i class="icon check"></i> Match Feed</a>
              <a ui-sref="myprofile" ui-sref-active="active" class="item"><i class="icon user"></i> My Profile</a>
              <a ui-sref="myconnections" ui-sref-active="active" class="item"><i class="icon plus"></i> My Connections</a>
              <a ui-sref="settings" ui-sref-active="active" class="item"><i class="icon setting"></i> Settings</a>
              <div class="item">
                <a ui-sref-ignore href="accounts/logout" class="ui blue button">Sign out <i class="fa fa-sign-out"></i></a>
              </div>
            </div>

            <div class="right menu" id="right-menu-launcher" ng-show="!showfullprofile && isState('matchfeed')">
              <a class="launch item"><i class="fa fa-sliders icon"></i></a>
            </div>

          </div>
        </div>



        <div class="pusher">
          <div class="full-height" ui-view autoscroll="false">
            <three-bounce-spinner class="page-spinner-bar"></three-bounce-spinner>
          </div>
        </div>

        {%endverbatim%}
        <script src="https://staging.bekindred.com/socket.io/socket.io.js"></script>
        <script src="{{ STATIC_URL }}js/vendor.js"></script>
        <script src="{{ STATIC_URL }}js/app.js"></script>



        <script>
          'use strict';
          $('.left.sidebar').first()
          .sidebar('attach events', '#leftsidebarlaunch')
          ;
          $('#leftsidebarlaunch')
          .removeClass('disabled')
          ;

          $('.top.horizontal.sidebar').first()
          .sidebar('setting', {
            dimPage             : false,
            closable            : false,
            transition          : 'overlay',
            mobileTransition    : 'overlay'}
            )
          ;

          $('.right.sidebar').first()
          .sidebar('attach events', '#right-menu-launcher')
          .sidebar('setting', 'duration', 0)
          ;
          $('#right-menu-launcher')
          .removeClass('disabled')
          ;


          $('.ui.checkbox')
          .checkbox({
            onChecked: function () {
              var mergedInput = $('#genders');
              var modelInput = $('#gendersModel');
              var arr = [];
              $("#filterForm input:checkbox:checked").each(function(){
                arr.push($(this).val());
              });
              mergedInput.val(JSON.stringify(arr));
              modelInput.val(arr.join());
              modelInput.trigger('input');
            },
            onUnchecked: function () {
              var mergedInput = $('#genders');
              var modelInput = $('#gendersModel');
              var arr = [];
              $("#filterForm input:checkbox:checked").each(function(){
                arr.push($(this).val());
              });
              mergedInput.val(JSON.stringify(arr));
              modelInput.val(arr.join());
              modelInput.trigger('input');
            }
          });
        </script>

        <script>
          'use strict';

          angular.module('beKindred').constant('USER_ID', {{ user.id }});
          angular.module('beKindred').constant('USER_FIRSTNAME', '{{ user.first_name }}');
          angular.module('beKindred').constant('angularMomentConfig', (function() {
            var tz = jstz.determine();
            var localTimezone =  tz.name();
            return {
              timezone: localTimezone,
              preprocess: 'utc'
            }
          })());
          angular.module('beKindred').constant('USER_TWITTER',  {% if twitter_provider %} '{{ twitter_provider.screen_name }}' {% else %} '' {% endif %} );
          angular.module('beKindred').constant('USER_LINKEDIN_NAME',  {% if linkedin_provider %} '{{ linkedin_provider.first_name }} {{ linkedin_provider.last_name }}' {% else %} '' {% endif %} );
          angular.module('beKindred').constant('USER_LINKEDIN_URL',  {% if linkedin_provider %} '{{ linkedin_provider.public_profile_url }}' {% else %} '' {% endif %} );
          angular.module('beKindred').constant('USER_LASTNAME', '{{ user.last_name }}');
          angular.module('beKindred').constant('FB_TOKEN', '{{ user.access_token }}');
          angular.module('beKindred').constant('USER_PHOTO', '//graph.facebook.com/' + {{ user.facebook_id }} + '/picture?type=large');
        </script>

      </body>
      </html>