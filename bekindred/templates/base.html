<!doctype html>
<html class="no-js" ng-app="beKindred" ng-controller="AppCtrl">
<head>
  <meta charset="utf-8">
  <title update-title></title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="">
  <meta name="author" content="">
  <link href='//fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Lato:400,300,600,700' rel='stylesheet' type='text/css'>

  <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
  <!-- Favicons -->
  <link rel="icon" href="/static/img/favicon/favicon.ico" type="image/x-icon">
  <!-- For third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="static/img/favicon/apple-touch-icon-144x144-precomposed.png">
  <!-- For iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="static/img/favicon/apple-touch-icon-114x114-precomposed.png">
  <!-- For first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="static/img/favicon/apple-touch-icon-72x72-precomposed.png">
  <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="static/img/favicon/apple-touch-icon-precomposed.png">

  <link href="/static/beKindredFrontend/dist/styles/vendor.css" rel="stylesheet" media="screen">
  <link href="/static/beKindredFrontend/dist/styles/app.css" rel="stylesheet" media="screen">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jstimezonedetect/1.0.4/jstz.min.js"></script>

</head>
<body id="main-page" ng-cloak>
  {%verbatim%}
      <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
      <![endif]-->


      <div class="ui top horizontal large sidebar" id="MatchMenu">
        <div class="ui fluid six item menu">
          <a class="item" ng-click="goBack()">
            <i class="chevron left icon"></i>
          </a>
          <span class="item"></span>
          <a ng-click="cancelMatch()" class="item clearbefore">
            <i class="remove icon"></i>
          </a>
          <a ng-click="confirmMatch()" class="item clearbefore">
            <i class="check icon"></i>
          </a>
          <span class="item"></span>
          <span class="item"></span>
        </div>
      </div>

      <div class="ui vertical left inverted labeled icon sidebar menu" id="leftmenu" ng-controller="LeftSidebarCtrl">
        <a ui-sref="home" ui-sref-active="active" class="item"> <i class="fa fa-home icon"></i> <span class="content">Home</span></a>
        <a ui-sref="inbox" ui-sref-active="active" class="item"><i class="fa fa-comment-o icon"></i> <span class="content">Messages</span>  <div class="ui label" messages-counter></div></a>
        <a ui-sref="matchfeed" ui-sref-active="active" class="item"><i class="intersecticon-white-big icon"></i> <span class="content">Match Feed</span></a>
        <a ui-sref="myprofile" ui-sref-active="active" class="item"><i class="fa fa-user icon"></i> <span class="content">Profile</span> </a>
        <a ui-sref="myconnections" ui-sref-active="active" class="item"><i class="fa fa-check-circle-o icon"></i> <span class="content">Connections</span> <div class="ui label">0</div></a>
        <a ui-sref="settings" ui-sref-active="active" class="item"> <i class="fa fa-cog icon"></i> <span class="content">Settings</span></a>
        <div class="item" id="side-menu-logo">
          <ul class="social-icon" id="intro-title">
            <li><h2>Kindred</h2></li>
          </ul>
        </div>
      </div>




      <div class="ui vertical right inverted labeled sidebar menu" id="filtersMenu" ng-show="isState('matchfeed')">
        <div id="FilterController" ng-controller="FilterController">
          <div id="filter" class="ui form">
            <form name="filterForm" id="filterForm" method="get" action="">
              <div class="field">
                <label>Distance <span class="range">{{distanceValue}} mi.</span></label>
                <div no-ui-slider="distanceOptions" ng-model="distanceValue" ng-change="saveFilters()"></div>
              </div>
              <div class="field">
                <label>Age <span class="range">{{ageValues[0]}} &ndash; {{ageValues[1]}}</span></label>
                <div no-ui-slider="ageOptions" ng-model="ageValues" ng-change="saveFilters()"></div>
              </div>
              <div class="field">
                <label class="">Show</label>
              </div>
              <div class="field field-checkbox">
                <div id="male" class="ui toggle checkbox">
                  <input type="checkbox" value="m">
                  <label>Men</label>
                </div>
              </div>
              <div class="field field-checkbox">
                <div id="female" class="ui toggle checkbox">
                  <input type="checkbox" value="f">
                  <label>Women</label>
                </div>
              </div>
              <div class="field">
                <input class="displayNone" ng-model="genders" ng-change="saveFilters()" id="gendersModel" value="" type="text">
              </div>

              <div class="field" ng-show="showFilterMessage">
                <label>
                  <div class="ui small negative message">
                    <p>
                      {{filtermessage}}
                    </p>
                  </div>
                </label>
              </div>

              <div class="ui icon input">
                <input ng-minlength=3 type="text" placeholder="Enter keyword" ng-enter="addKeyword(newKeyword)" ng-model="newKeyword">
                <i class="circular plus icon" ng-click="addKeyword(newKeyword)"></i>
              </div>
              <div class="">
                <a ng-click="removeKeyword(index)" href="" class="item" ng-repeat="keyword in myKeywords track by $index">
                  <div class="content">
                    <div class="header"><i class="circle remove icon"></i> {{keyword}}</div>
                  </div>
                </a>
              </div>
              <div class="ui divider"></div>
              <a href="" class="button ui submit green" ng-click="refreshMatchFeed()" role="button">Filter</a>
            </div>
          </div>
        </div>


        <div class="ui inverted top fixed menu" ng-controller="TopNavbarCtrl" ng-class="{'hidden': hideTopMenu}" ng-hide="isState('conversations') || isState('friendprofile') || isState('selectinterests') || isState('goalcreate') || isState('offercreate') || isState('finalstep')">
          <div class="container">
            <a id="leftsidebarlaunch" class="launch item"><i class="content icon"></i></a>
            <div class="title item mobileview">
              <b update-title></b>
            </div>
            <div class="title item desktopview">
              <b>KINDRED</b>
            </div>
            <a ui-sref="home" class="icon item desktopview" id="homelink"><i class="home icon"></i></a>
            <div class="ui mini action input inverted desktopview searchbox">
              <input type="text" placeholder="Search">
              <button class="ui mini icon button">
                <i class="angle right black double icon"></i>
              </button>
            </div>
            <div class="ui pointing labeled dropdown item desktopview" id="browse">
              Browse
              <i class="dropdown icon"></i>
              <div class="menu">
                <a class="item">Item 1</a>
                <a class="item">Item 2</a>
                <a class="item">Item 3</a>
              </div>
            </div>

            <div class="right menu desktopview" id="main-menu-right">
              <a ui-sref="myprofile" ui-sref-active="active" class="item" id="profileimage">
                <img ng-src="{{userImg}}" class="ui mini image">
                {{userName}}
              </a>
              <a ui-sref="inbox" ui-sref-active="active" class="item"><i class="fa fa-comment-o icon"></i> <span class="content">Messages</span>  <div class="ui label">2</div></a>
              <a href="" class="item"> <span class="content">Help</span></a>

            </div>

            <div class="right menu" id="right-menu-launcher" ng-show="!showfullprofile && isState('matchfeed')">
              <a class="launch item"><i class="fa fa-sliders icon"></i></a>
            </div>

          </div>
        </div>



        div class="pusher">
        <div class="full height">
          <div class="main container">

            <div class="ui attached internal desktopview left rail">
              <div class="ui vertical menu" id="left-menu">

                <a ui-sref="matchfeed" ui-sref-active="active" class="item"> Match Feed <i class="icon inverted chevron right"></i></a>
                <a ui-sref="myprofile" ui-sref-active="active" class="item">Profile <i class="icon inverted chevron right"></i></a>
                <a ui-sref="myconnections" ui-sref-active="active" class="item">Connections <div class="ui label">2</div><i class="icon inverted chevron right"></i></a>
                <a ui-sref="settings" ui-sref-active="active" class="item">Settings<i class="icon inverted chevron right"></i></a>
              </div>
            </div>

            <div class="ui desktopview attached internal right rail" id="matchfeed-filters-container">

              <div id="FilterController" ng-controller="FilterController">

               <h4 class="ui header">FILTERS</h4>
               <div class="ui fitted divider"></div>

               <div id="matchfeed-filters" class="ui form">
                <form name="filterForm" id="filterForm" ng-submit="" class="form" method="get" action="">
                  <div class="field">
                    <label>Distance <span class="range">{{distanceValue}} mi.</span></label>
                    <div no-ui-slider="distanceOptions" ng-model="distanceValue" ng-change="saveFilters()"></div>
                    <input type="text" class="displayNone" ng-model="distanceValue" name="distance">
                  </div>
                  <div class="field">
                    <label>Age <span class="range">{{ageValues[0]}} &ndash; {{ageValues[1]}}</span></label>
                    <div no-ui-slider="ageOptions" ng-model="ageValues" ng-change="saveFilters()"></div>
                    <input type="text" class="displayNone" ng-model="ageValues[0]" name="min_age">
                    <input type="text" class="displayNone" ng-model="ageValues[1]" name="max_age">
                  </div>
                  <div class="field">
                    <label class="">Show</label>
                  </div>
                  <div class="field field-checkbox">
                    <div id="male" class="ui toggle checkbox">
                      <input type="checkbox" value="m">
                      <label>Men</label>
                    </div>
                  </div>
                  <div class="field field-checkbox">
                    <div id="female" class="ui toggle checkbox">
                      <input type="checkbox" value="f">
                      <label>Women</label>
                    </div>
                  </div>
                  <div class="field">
                    <input class="displayNone" value="{{myKeywords}}" type="text" name="keywords">
                  </div>
                  <div class="field">
                    <input class="displayNone" id="genders" value="" type="text" name="gender">
                    <input class="displayNone" ng-model="genders" ng-change="saveFilters()" id="gendersModel" value="" type="text">
                  </div>
                  <div class="ui small negative message" ng-show="showMessage">
                    <div class="header">
                      Keyword already exists.
                    </div>
                  </div>
                  <div class="ui icon input">
                    <input ng-minlength=3 type="text" placeholder="Enter keyword" on-enter-blur ng-enter="addKeyword(newKeyword)" ng-model="newKeyword">
                    <i class="circular search icon"></i>
                  </div>
                  <div class="">
                    <a ng-click="removeKeyword(index)" href="" class="item" ng-repeat="keyword in myKeywords track by $index">
                      <div class="content">
                        <div class="header"><i class="circle remove icon"></i> {{keyword}}</div>
                      </div>
                    </a>
                  </div>
                  <div class="ui divider"></div>
                  <button type="submit" class="button ui submit green" ng-click="refreshMatchFeed()" role="button">Filter</button>
                </div>
              </div>

            </div>


            <div id="main-content" class="gsapify-router" ui-view autoscroll="false">
              <three-bounce-spinner class="page-spinner-bar"></three-bounce-spinner>
            </div>

          </div>
        </div>
      </div>


      <!-- <script src="//test1.com:3000/socket.io/socket.io.js"></script> -->
      {%endverbatim%}
      <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.4/socket.io.min.js"></script>
      <script src="/static/beKindredFrontend/dist/scripts/vendor.js"></script>
      <script src="/static/beKindredFrontend/dist/scripts/app.js"></script>



      <script>
        'use strict';
        $('.dropdown')
        .dropdown({
        })
        ;

        $('.left.sidebar').first()
        .sidebar('attach events', '#leftsidebarlaunch')
        ;
        $('#leftsidebarlaunch')
        .removeClass('disabled')
        ;

        $('.top.horizontal.sidebar').first()
        .sidebar('setting', {
          dimPage             : false,
          closable            : false,
          transition          : 'overlay',
          mobileTransition    : 'overlay'}
          )
        ;

        $('.right.sidebar').first()
        .sidebar('attach events', '#right-menu-launcher')
        .sidebar('attach events', '#showFilter')
        .sidebar('setting', 'duration', 0)
        ;
        $('#right-menu-launcher')
        .removeClass('disabled')
        ;


        $('.ui.checkbox')
        .checkbox({
          onChecked: function () {
            var mergedInput = $('#genders');
            var modelInput = $('#gendersModel');
            var arr = [];
            $("#filterForm input:checkbox:checked").each(function(){
              arr.push($(this).val());
            });
            mergedInput.val(JSON.stringify(arr));
            modelInput.val(arr.join());
            modelInput.trigger('input');
          },
          onUnchecked: function () {
            var mergedInput = $('#genders');
            var modelInput = $('#gendersModel');
            var arr = [];
            $("#filterForm input:checkbox:checked").each(function(){
              arr.push($(this).val());
            });
            mergedInput.val(JSON.stringify(arr));
            modelInput.val(arr.join());
            modelInput.trigger('input');
          }
        });


      </script>

      <script>
        'use strict';

        angular.module('beKindred').constant('USER_ID', {{ user.id }});
        angular.module('beKindred').constant('USER_FIRSTNAME', '{{ user.first_name }}');
        angular.module('beKindred').constant('angularMomentConfig', (function() {
          var tz = jstz.determine();
          var localTimezone =  tz.name();
          return {
            timezone: localTimezone,
            preprocess: 'utc'
          }
        })());
        angular.module('beKindred').constant('USER_LASTNAME', '{{ user.last_name }}');
        angular.module('beKindred').constant('FB_TOKEN', '{{ user.access_token }}');
        angular.module('beKindred').constant('USER_PHOTO', '//graph.facebook.com/' + {{ user.facebook_id }} + '/picture?type=large');


      </script>

    </body>
    </html>